const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-GtHmzv2i.js","assets/index-CM-BcqkI.js","assets/index-CLM23Pdi.css"])))=>i.map(i=>d[i]);
import{d as m,r as N,a as xe,R as Y,j as e,F as G,_ as me,l as he,B as pe,C as ue}from"./index-CM-BcqkI.js";import{a as ge}from"./formatters-DUYcZ69c.js";import{D as fe}from"./download-BH5CRJm1.js";import{T as be}from"./target-UVQYc_9d.js";import{B as je}from"./bot-CmnUoBTB.js";import{S as Ne}from"./scale-CatRO3TW.js";import{O as ve}from"./octagon-alert-DOMDruwV.js";import{S as ye}from"./siren-L0784Kl7.js";import{T as we}from"./triangle-alert-DK0Clz4a.js";import{C as _e}from"./circle-check-PYAlSEgG.js";import{C as ke}from"./chevron-up-BojK28P9.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Ce=m("file-check",Ae);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3l8.384-8.381",key:"pgg06f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m21.5 10.5-8-8",key:"a17d9x"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m8.5 7.5 8 8",key:"1oyaui"}]],Se=m("gavel",Me);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Te=m("lightbulb",Oe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 19H3",key:"zzsher"}],["path",{d:"m15.5 9.5 5 5",key:"ytk86i"}],["path",{d:"m20.5 9.5-5 5",key:"17o44f"}]],De=m("list-x",Ee);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Fe=m("rotate-ccw",Re);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],Ie=m("scan",$e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Le=m("shopping-bag",ze);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Pe=m("zoom-in",Ve);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Be=m("zoom-out",Ue),v=({children:a,className:i="",title:d,icon:h,color:p="slate",delay:y=0,fullWidth:A=!1})=>{const C={slate:"bg-slate-500/10 text-slate-400",blue:"bg-blue-500/10 text-blue-400",emerald:"bg-emerald-500/10 text-emerald-400",amber:"bg-amber-500/10 text-amber-400",red:"bg-red-500/10 text-red-400",cyan:"bg-cyan-500/10 text-cyan-400",purple:"bg-purple-500/10 text-purple-400",indigo:"bg-indigo-500/10 text-indigo-400"};return e.jsxs("div",{className:`
                relative overflow-hidden rounded-[20px] bg-[#0c0c0c] border border-white/[0.05] hover:border-white/10 
                shadow-xl transition-all duration-300 animate-in fade-in slide-in-from-bottom-4 group
                ${A?"col-span-1 lg:col-span-2 xl:col-span-3":""}
                ${i}
            `,style:{animationDelay:`${y}ms`,animationFillMode:"both"},children:[d&&e.jsxs("div",{className:"flex items-center gap-3 px-6 py-4 border-b border-white/[0.05] bg-[#0f0f0f]/50",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${C[p]}`,children:e.jsx(h,{className:"w-4 h-4"})}),e.jsx("h3",{className:"font-bold text-white text-xs uppercase tracking-wider",children:d})]}),e.jsx("div",{className:"p-6",children:a})]})},u=({label:a,value:i,sub:d,highlight:h=!1,warning:p=!1})=>e.jsxs("div",{className:"mb-1",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1",children:a}),e.jsx("p",{className:`text-sm font-medium ${p?"text-red-400":h?"text-white":"text-slate-300"} truncate`,children:i||"-"}),d&&e.jsx("p",{className:"text-[10px] text-slate-500 font-mono mt-0.5",children:d})]}),k=({children:a,color:i="slate"})=>{const d={slate:"bg-slate-500/10 text-slate-400 border-slate-500/20",emerald:"bg-emerald-500/10 text-emerald-400 border-emerald-500/20",red:"bg-red-500/10 text-red-400 border-red-500/20",amber:"bg-amber-500/10 text-amber-400 border-amber-500/20",blue:"bg-blue-500/10 text-blue-400 border-blue-500/20",cyan:"bg-cyan-500/10 text-cyan-400 border-cyan-500/20",purple:"bg-purple-500/10 text-purple-400 border-purple-500/20",indigo:"bg-indigo-500/10 text-indigo-400 border-indigo-500/20"};return e.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider border ${d[i]}`,children:a})},g=(a,i="AOA")=>a==null?"-":ge(a),st=({document:a})=>{var J,Z,q;const[i,d]=N.useState(!1),[h,p]=N.useState(1),[y,A]=N.useState({x:0,y:0}),[C,V]=N.useState(!1),[P,K]=N.useState({x:0,y:0}),Q=N.useRef(null),ee=N.useRef(null),{stopNotificationSound:U}=xe();Y.useEffect(()=>{U()},[U]);const te=()=>p(s=>Math.min(s+.2,5)),se=()=>p(s=>Math.max(s-.2,.5)),ae=()=>{p(1),A({x:0,y:0})},le=s=>{const o=s.deltaY>0?-.1:.1;p(t=>Math.min(Math.max(.5,t+o),5))},re=s=>{h<=1||(V(!0),K({x:s.clientX-y.x,y:s.clientY-y.y}))},oe=s=>{C&&A({x:s.clientX-P.x,y:s.clientY-P.y})},B=()=>{V(!1)},E=Y.useMemo(()=>{var s;return a.fileUrl&&a.fileUrl.startsWith("http")?a.fileUrl:a.fileBase64?a.fileBase64:(s=a.data)!=null&&s.previewUrl?a.data.previewUrl:(console.warn("[AnalysisViewer] No valid image source found for document:",a.id),null)},[a.fileUrl,a.fileBase64,(J=a.data)==null?void 0:J.previewUrl,a.id]);if(!a)return null;const M=a.rawN8nResponse||{},r=(Array.isArray(M)?(Z=M[0])==null?void 0:Z.output:M.output||M.json||a.data||{})||{},f=r.emitente||{},W=r.cliente||{},l=r.documento||{},w=r.totais||{},x=r.resumo_por_agente||{},D=r.classificacao_fiscal||x.classificacao_fiscal||{},R=D.tipo_operacao||"INDETERMINADA",S=r.decisao_final||x.decisao_final||{},n=S.status||a.status,b=(n==null?void 0:n.includes("APROVADA"))||n==="CONFORME",_=n==null?void 0:n.includes("REJEITADA"),F=r.motivos_rejeicao_ou_ressalvas||x.motivos_rejeicao_ou_ressalvas||[],H=r.orientacao_ao_contabilista||x.orientacao_ao_contabilista||{},O=r.impacto_fiscal||x.impacto_fiscal||{},j=r.conclusao_executiva||x.conclusao_executiva||{},$=x;let I=$.agente_6_risco;!I&&((q=$.agente_5_compliance)!=null&&q.agente_6_risco)&&(I=$.agente_5_compliance.agente_6_risco);const ie=[{key:"agente_1_ocr",label:"1 OCR",icon:Ie},{key:"agente_2_consulta_agt",label:"2 Consulta AGT",icon:pe},{key:"agente_3_regime_fiscal",label:"3 Regime Fiscal",icon:Ne},{key:"agente_4_confronto",label:"4 Confronto",icon:ve},{key:"agente_5_compliance",label:"5 Compliance",icon:Ce},{key:"agente_6_risco",label:"6 Risco",icon:ye,dataOverride:I}],ne=Object.keys(x).length>0;return e.jsxs("div",{className:"flex h-full bg-[#080808] overflow-hidden",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-[40%] flex-col border-r border-white/5 relative z-10 bg-[#050505]",children:[e.jsx("div",{ref:Q,className:"flex-1 overflow-hidden flex items-center justify-center p-4 custom-scrollbar relative bg-black/40",onWheel:le,onMouseDown:re,onMouseMove:oe,onMouseUp:B,onMouseLeave:B,children:E?a.fileName.toLowerCase().endsWith(".pdf")?e.jsx("iframe",{src:`${E}#toolbar=0`,className:"w-full h-full rounded-lg bg-white shadow-2xl"},`pdf-${a.id}`):e.jsx("div",{className:"relative w-full h-full flex items-center justify-center overflow-hidden",children:e.jsx("img",{ref:ee,src:E,className:`shadow-2xl transition-transform duration-75 select-none ${C?"cursor-grabbing":h>1?"cursor-grab":"cursor-default"}`,style:{transform:`translate(${y.x}px, ${y.y}px) scale(${h})`,maxHeight:"90%",maxWidth:"90%",objectFit:"contain"},draggable:!1},`img-${a.id}`)}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-500 opacity-50",children:[e.jsx(G,{className:"w-16 h-16 mb-4"}),e.jsx("p",{children:"Sem Pré-visualização"})]})}),e.jsxs("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 z-50 flex items-center gap-2 bg-black/60 backdrop-blur-md px-3 py-2 rounded-full border border-white/10",children:[e.jsx("button",{onClick:se,className:"p-2 hover:bg-white/10 rounded-full text-slate-400",children:e.jsx(Be,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-xs font-mono text-cyan-500 w-12 text-center",children:[Math.round(h*100),"%"]}),e.jsx("button",{onClick:te,className:"p-2 hover:bg-white/10 rounded-full text-slate-400",children:e.jsx(Pe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ae,className:"p-2 hover:bg-white/10 rounded-full text-slate-400 border-l border-white/10 ml-1",children:e.jsx(Fe,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col h-full bg-[#080808] custom-scrollbar overflow-y-auto pb-32 pt-6 border-l border-white/5",children:[e.jsx("div",{className:`
                    relative overflow-hidden border-b border-white/5 p-6 flex-shrink-0
                    bg-gradient-to-r ${_?"from-red-900/10":b?"from-emerald-900/10":"from-amber-900/10"} to-transparent
                `,children:e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{color:_?"red":b?"emerald":"amber",children:n}),e.jsx(k,{color:R==="SAIDA"?"blue":R==="ENTRADA"?"purple":"slate",children:R})]}),e.jsx("h1",{className:"text-2xl font-bold text-white mt-1",children:f.nome||"Emitente Desconhecido"}),e.jsxs("div",{className:"text-sm text-slate-400 font-mono flex flex-col gap-0.5",children:[e.jsxs("span",{children:["NIF: ",f.nif||"N/A"]}),f.endereco&&e.jsx("span",{className:"text-xs opacity-70 truncate max-w-[300px]",children:f.endereco})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-4",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:()=>{me(()=>import("./jspdf.es.min-GtHmzv2i.js").then(s=>s.j),__vite__mapDeps([0,1,2])).then(async s=>{const o=s.default,t=new o;if(t.setFillColor(10,10,12),t.rect(0,0,210,30,"F"),t.setFontSize(22),t.setTextColor(255,255,255),t.setFont("helvetica","bold"),t.text("KwikDocs AI",15,20),t.setFontSize(10),t.setTextColor(150,150,150),t.text("Relatório de Análise Fiscal",200,20,{align:"right"}),t.setFillColor(245,247,250),t.rect(14,40,182,35,"F"),t.setFontSize(14),t.setTextColor(0,0,0),t.text(f.nome||"Emitente Desconhecido",20,52),t.setFontSize(10),t.setTextColor(100,100,100),t.text(`NIF: ${f.nif||"N/A"}`,20,60),t.text(`Data: ${l.data_emissao||"-"}`,20,66),t.setFillColor(b?220:255,b?255:220,220),t.setTextColor(b?0:200,b?100:0,0),t.setFont("helvetica","bold"),t.text(n||"PENDENTE",188,52,{align:"right"}),t.setFontSize(10),t.setTextColor(100,100,100),t.text("SUBTOTAL",130,95,{align:"right"}),t.text("IVA",130,102,{align:"right"}),t.setFontSize(12),t.setTextColor(0,0,0),t.text(g(w.subtotal||0,l.moeda),190,95,{align:"right"}),t.text(g(w.total_iva||0,l.moeda),190,102,{align:"right"}),t.setDrawColor(200,200,200),t.line(120,108,190,108),t.setFontSize(16),t.setFont("helvetica","bold"),t.setTextColor(0,0,0),t.text("TOTAL",130,118,{align:"right"}),t.text(g(w.total_geral||l.total||0,l.moeda),190,118,{align:"right"}),j.resumo_geral){t.setFontSize(12),t.setTextColor(0,100,200),t.text("Conclusão Executiva",14,135),t.setFontSize(10),t.setTextColor(50,50,50);const z=t.splitTextToSize(j.resumo_geral,180);t.text(z,14,145)}t.save(`Analise_${a.fileName||"Doc"}.pdf`)})},className:"px-3 py-1.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-xs font-bold text-white flex items-center gap-2 transition-all uppercase tracking-wider",children:[e.jsx(fe,{className:"w-3.5 h-3.5 text-cyan-400"}),"Exportar PDF"]})}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:`text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r ${b?"from-white to-slate-400":"from-amber-400 to-amber-600"}`,children:g(w.total_geral||l.total||0,l.moeda)}),e.jsxs("div",{className:"flex items-center gap-3 text-xs font-mono text-slate-500 mt-1",children:[e.jsxs("span",{className:"px-2 py-0.5 rounded bg-white/5 border border-white/5",children:["Sub: ",e.jsx("span",{className:"text-slate-300",children:g(w.subtotal||0,l.moeda)})]}),e.jsxs("span",{className:"px-2 py-0.5 rounded bg-white/5 border border-white/5",children:["IVA: ",e.jsx("span",{className:"text-slate-300",children:g(w.total_iva||0,l.moeda)})]})]})]})]})]})}),e.jsxs("div",{className:"p-6 grid grid-cols-1 gap-6",children:[(j.resumo_geral||j.descricao_simplificada)&&e.jsx(v,{title:"Conclusão Executiva",icon:be,color:_?"red":"blue",fullWidth:!0,children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"p-3 bg-white/5 rounded-xl shrink-0",children:e.jsx(he,{className:`w-6 h-6 ${_?"text-red-400":"text-blue-400"}`})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:['"',j.resumo_geral||j.descricao_simplificada,'"']}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{color:"slate",children:j.estado_documento_perante_agt||"N/A"}),D.justificacao&&e.jsxs("span",{className:"text-xs text-slate-500 mt-1 italic",children:["- ",D.justificacao]})]})]})]})}),ne&&e.jsx(v,{title:"Análise Multi-Agente AI",icon:je,color:"indigo",fullWidth:!0,children:e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:ie.map(s=>{const o=s.dataOverride||x[s.key]||{resultado:"PENDENTE",objetivo:"A aguardar..."},t=o.resultado,z=["CONFORME","COERENTE","BAIXO"].includes(t),ce=["INCOMPLETO","INCONSISTENTE","NAO_CONFORME","ALTO","INCOERENTE","NAO_CONFIRMADO"].includes(t);return e.jsxs("div",{className:"p-4 bg-white/[0.02] rounded-xl border border-white/5 hover:bg-white/[0.04] transition-colors flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:s.label})}),e.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${z?"bg-emerald-500/10 text-emerald-400":ce?"bg-red-500/10 text-red-400":"bg-amber-500/10 text-amber-400"}`,children:t||"N/A"})]}),e.jsx("p",{className:"text-xs text-white font-medium mb-1 line-clamp-2",children:o.objetivo}),e.jsx("div",{className:"mt-auto pt-2 space-y-1",children:o.detalhes&&Object.entries(o.detalhes).map(([L,c])=>{if(!c||Array.isArray(c)&&c.length===0||typeof c=="object"&&Object.keys(c).length===0)return null;const X=L.replace(/_/g," ");return Array.isArray(c)?e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-[9px] uppercase text-slate-600 font-bold mb-0.5",children:X}),c.slice(0,3).map((T,de)=>e.jsxs("div",{className:"text-[10px] text-slate-400 flex items-start gap-1 ml-1",children:[e.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-600 mt-1 shrink-0"}),e.jsx("span",{className:"truncate w-full",children:typeof T=="string"?T:T.descricao||JSON.stringify(T)})]},de))]},L):e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500",children:[e.jsxs("span",{children:[X,":"]}),e.jsx("span",{className:"text-slate-300 ml-1",children:typeof c=="string"?c:JSON.stringify(c)})]},L)}).slice(0,3)})]},s.key)})})}),F&&F.length>0&&e.jsx(v,{title:"Motivos & Ressalvas",icon:De,color:"red",fullWidth:!0,children:e.jsx("div",{className:"space-y-3",children:F.map((s,o)=>e.jsxs("div",{className:"flex gap-4 items-start p-3 bg-red-500/5 border border-red-500/10 rounded-xl",children:[e.jsx("div",{className:"p-2 bg-red-500/10 rounded-lg text-red-400 shrink-0",children:e.jsx(we,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-red-400 uppercase tracking-wider",children:s.origem||"SISTEMA"}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-red-900"}),e.jsx("span",{className:"text-[10px] text-red-300/70 uppercase tracking-wider",children:s.gravidade||"ALERTA"})]}),e.jsx("p",{className:"text-sm text-slate-200",children:s.descricao})]})]},o))})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 col-span-1 lg:col-span-2 xl:col-span-3",children:[e.jsx(v,{title:"Decisão & Risco",icon:Se,color:_?"red":"emerald",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold mb-1",children:"Decisão"}),e.jsx("p",{className:`text-lg font-bold ${_?"text-red-400":"text-emerald-400"}`,children:n})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold mb-1",children:"Risco"}),e.jsx("p",{className:`text-lg font-bold ${S.nivel_risco==="ALTO"?"text-red-400":"text-white"}`,children:S.nivel_risco})]})]}),e.jsxs("div",{className:"bg-[#111] p-3 rounded-xl border border-white/5",children:[e.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold mb-1",children:"Fundamentação"}),e.jsx("p",{className:"text-xs text-slate-300 leading-relaxed",children:S.fundamentacao_tecnica||"Sem dados."})]})]})}),e.jsx(v,{title:"Contabilidade & Compliance",icon:Te,color:"cyan",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(k,{color:O.iva_dedutivel?"emerald":"amber",children:["IVA DEDUTÍVEL: ",O.iva_dedutivel?"SIM":"NÃO"]}),e.jsxs(k,{color:O.risco_multa?"red":"emerald",children:["RISCO MULTA: ",O.risco_multa?"SIM":"NÃO"]})]}),H.acoes_recomendadas&&e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold mb-2",children:"Recomendações"}),e.jsx("ul",{className:"space-y-2",children:H.acoes_recomendadas.map((s,o)=>e.jsxs("li",{className:"flex gap-2 items-start text-xs text-cyan-300",children:[e.jsx(_e,{className:"w-3.5 h-3.5 mt-0.5 shrink-0 text-cyan-500"}),e.jsx("span",{children:s})]},o))})]})]})})]}),r.itens&&r.itens.length>0&&e.jsx(v,{title:`Itens da Fatura (${r.itens.length})`,icon:Le,color:"slate",fullWidth:!0,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-xs text-slate-400",children:[e.jsx("thead",{className:"text-[10px] uppercase bg-white/5 text-slate-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 rounded-l-lg",children:"Descrição"}),e.jsx("th",{className:"p-2 text-right",children:"Qtd"}),e.jsx("th",{className:"p-2 text-right",children:"Preço"}),e.jsx("th",{className:"p-2 text-right",children:"IVA"}),e.jsx("th",{className:"p-2 text-right rounded-r-lg",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:r.itens.map((s,o)=>e.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"p-2 font-medium text-white",children:s.descricao}),e.jsx("td",{className:"p-2 text-right",children:s.quantidade}),e.jsx("td",{className:"p-2 text-right",children:g(s.preco_unitario,l.moeda)}),e.jsxs("td",{className:"p-2 text-right",children:[s.taxa_iva,"%"]}),e.jsx("td",{className:"p-2 text-right font-bold text-slate-200",children:g(s.total_item,l.moeda)})]},o))})]})})}),e.jsx(v,{title:"Detalhes do Documento",icon:G,color:"slate",fullWidth:!0,children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(u,{label:"Número",value:l.numero}),e.jsx(u,{label:"Série",value:l.serie}),e.jsx(u,{label:"Data Emissão",value:l.data_emissao}),e.jsx(u,{label:"Vencimento",value:l.data_fornecimento}),e.jsx(u,{label:"Moeda",value:l.moeda}),e.jsx(u,{label:"Pagamento",value:l.forma_pagamento}),e.jsx(u,{label:"Cliente",value:W.nome,sub:W.nif}),e.jsx(u,{label:"Software",value:f.software_faturacao})]})})]}),e.jsxs("div",{className:"flex justify-center pb-8 border-t border-white/5 pt-6 mx-8 mt-auto",children:[e.jsxs("button",{onClick:()=>d(!i),className:"flex items-center gap-2 px-4 py-2 rounded-xl border border-white/10 text-[10px] font-bold text-slate-500 hover:text-white hover:bg-white/5 transition-all uppercase tracking-wider",children:[i?e.jsx(ke,{className:"w-3 h-3"}):e.jsx(ue,{className:"w-3 h-3"})," ",i?"Ocultar JSON":"Inspecionar JSON"]}),i&&e.jsx("pre",{className:"mt-4 p-4 text-[10px] font-mono text-emerald-500/80 bg-black/50 rounded-xl overflow-x-auto w-full",children:JSON.stringify(r,null,2)})]})]})]})};export{st as A};
