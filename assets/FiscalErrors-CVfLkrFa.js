import{d as Le,r as o,a as et,D as H,j as t,f as tt,B as at,Z as ce,n as de,g as rt,F as st}from"./index-CwiEtEVK.js";import{C as nt}from"./circle-x-oXnQTsBb.js";import{O as it}from"./octagon-alert-DaBkuUpV.js";import{S as Pe}from"./shield-check-BQ_LYInv.js";import{C as lt}from"./chevron-left-BmVSCQzK.js";import{C as ue}from"./circle-check-D7UCAnOO.js";import{S as ot}from"./shield-alert-BpbxRupY.js";import{T as ct}from"./triangle-alert-BnzwusOW.js";import{C as dt}from"./calculator-DGMAEhpa.js";import{F as ut}from"./file-exclamation-point-DnOVPo88.js";import{C as mt}from"./chevron-up-CbTPmuw1.js";import{S as pt}from"./scan-line-hUrym9r3.js";import{I as xt}from"./info-BkAF4-0Z.js";import{c as O,F as ee,G as ft,H as ht,I as F,K as vt,M as bt,N as Me,O as gt,P as yt,q as z,Q as jt,T as Nt,U as At,V as wt,s as _e,W as Pt,X as Et,Y as It,_ as Ot,$ as Dt,a0 as Ct,h as $e,a1 as kt,a2 as se,a3 as St,a4 as Tt,a5 as Rt,r as xe,D as Ke,A as Ve,R as Lt,a6 as Mt,a7 as ze,m as Z,a8 as _t,n as fe,L as J,Z as Ge,j as $t,w as Kt,J as Vt,a9 as zt,x as Ee,aa as Ie,ab as re,ac as me,ad as Gt,ae as Ft,af as Bt,ag as Wt,ah as Ut,ai as qt,aj as Ht,y as Jt,ak as Xt,al as Q,am as Oe,an as Zt,ao as Qt,ap as Yt,aq as ea,ar as ta,as as aa,at as ra,au as sa,B as na,E as ia}from"./CategoricalChart-Dvw5KUSO.js";import{S as la}from"./ActiveShapeUtils-DbrNhj7Z.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],ca=Le("mouse-pointer-2",oa);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ua=Le("square-pen",da);var Y=e=>null;Y.displayName="Cell";var Fe=e=>e.graphicalItems.polarItems,ma=O([ee,ft],ht),ne=O([Fe,F,ma],vt),pa=O([ne],bt),ie=O([pa,Me],gt),xa=O([ie,F,ne],yt);O([ie,F,ne],(e,a,r)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var c,u=z(s,(c=a.dataKey)!==null&&c!==void 0?c:i.dataKey);return{value:u,errorDomain:[]}})).filter(Boolean):(a==null?void 0:a.dataKey)!=null?e.map(s=>({value:z(s,a.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})));var De=()=>{},fa=O([ie,F,ne,jt,ee],Nt),ha=O([F,At,wt,De,fa,De,_e,ee],Pt),Be=O([F,_e,ie,xa,Et,ee,ha],It),va=O([Be,F,Ot],Dt);O([F,Be,va,ee],Ct);function Ce(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function ke(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Ce(Object(r),!0).forEach(function(s){ba(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function ba(e,a,r){return(a=ga(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function ga(e){var a=ya(e,"string");return typeof a=="symbol"?a:a+""}function ya(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var ja=(e,a)=>a,he=O([Fe,ja],(e,a)=>e.filter(r=>r.type==="pie").find(r=>r.id===a)),Na=[],ve=(e,a,r)=>(r==null?void 0:r.length)===0?Na:r,We=O([Me,he,ve],(e,a,r)=>{var{chartData:s}=e;if(a!=null){var i;if((a==null?void 0:a.data)!=null&&a.data.length>0?i=a.data:i=s,(!i||!i.length)&&r!=null&&(i=r.map(c=>ke(ke({},a.presentationProps),c.props))),i!=null)return i}}),Aa=O([We,he,ve],(e,a,r)=>{if(!(e==null||a==null))return e.map((s,i)=>{var c,u=z(s,a.nameKey,a.name),f;return r!=null&&(c=r[i])!==null&&c!==void 0&&(c=c.props)!==null&&c!==void 0&&c.fill?f=r[i].props.fill:typeof s=="object"&&s!=null&&"fill"in s?f=s.fill:f=a.fill,{value:$e(u,a.dataKey),color:f,payload:s,type:a.legendType}})}),wa=O([We,he,ve,kt],(e,a,r,s)=>{if(!(a==null||e==null))return Ha({offset:s,pieSettings:a,displayedData:e,cells:r})}),Pa=(e,a,r)=>{var s=se();return(i,c)=>u=>{e==null||e(i,c,u),s(St({activeIndex:String(c),activeDataKey:a,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}},Ea=e=>{var a=se();return(r,s)=>i=>{e==null||e(r,s,i),a(Tt())}},Ia=(e,a,r)=>{var s=se();return(i,c)=>u=>{e==null||e(i,c,u),s(Rt({activeIndex:String(c),activeDataKey:a,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}},Oa=["key"],Da=["onMouseEnter","onClick","onMouseLeave"],Ca=["id"],ka=["id"];function Se(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function y(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Se(Object(r),!0).forEach(function(s){Sa(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Sa(e,a,r){return(a=Ta(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function Ta(e){var a=Ra(e,"string");return typeof a=="symbol"?a:a+""}function Ra(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function G(){return G=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},G.apply(null,arguments)}function le(e,a){if(e==null)return{};var r,s,i=La(e,a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)r=c[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function La(e,a){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(a.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function Ma(e){var a=o.useMemo(()=>ze(e.children,Y),[e.children]),r=Z(s=>Aa(s,e.id,a));return r==null?null:o.createElement(_t,{legendPayload:r})}var _a=o.memo(e=>{var{dataKey:a,nameKey:r,sectors:s,stroke:i,strokeWidth:c,fill:u,name:f,hide:v,tooltipType:b,id:j}=e,A={dataDefinedOnItem:s.map(p=>p.tooltipPayload),positions:s.map(p=>p.tooltipPosition),settings:{stroke:i,strokeWidth:c,fill:u,dataKey:a,nameKey:r,name:$e(f,a),hide:v,type:b,color:u,unit:"",graphicalItemId:j}};return o.createElement($t,{tooltipEntrySettings:A})}),$a=(e,a)=>e>a?"start":e<a?"end":"middle",Ka=(e,a,r)=>typeof a=="function"?Q(a(e),r,r*.8):Q(a,r,r*.8),Va=(e,a,r)=>{var{top:s,left:i,width:c,height:u}=a,f=Xt(c,u),v=i+Q(e.cx,c,c/2),b=s+Q(e.cy,u,u/2),j=Q(e.innerRadius,f,0),A=Ka(r,e.outerRadius,f),p=e.maxRadius||Math.sqrt(c*c+u*u)/2;return{cx:v,cy:b,innerRadius:j,outerRadius:A,maxRadius:p}},za=(e,a)=>{var r=re(a-e),s=Math.min(Math.abs(a-e),360);return r*s};function Ga(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Fa=(e,a)=>{if(o.isValidElement(e))return o.cloneElement(e,a);if(typeof e=="function")return e(a);var r=fe("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:s}=a,i=le(a,Oa);return o.createElement(Zt,G({},i,{type:"linear",className:r}))},Ba=(e,a,r)=>{if(o.isValidElement(e))return o.cloneElement(e,a);var s=r;if(typeof e=="function"&&(s=e(a),o.isValidElement(s)))return s;var i=fe("recharts-pie-label-text",Ga(e));return o.createElement(Qt,G({},a,{alignmentBaseline:"middle",className:i}),s)};function Wa(e){var{sectors:a,props:r,showLabels:s}=e,{label:i,labelLine:c,dataKey:u}=r;if(!s||!i||!a)return null;var f=Ve(r),v=Oe(i),b=Oe(c),j=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,A=a.map((p,w)=>{var P=(p.startAngle+p.endAngle)/2,D=me(p.cx,p.cy,p.outerRadius+j,P),E=y(y(y(y({},f),p),{},{stroke:"none"},v),{},{index:w,textAnchor:$a(D.x,p.cx)},D),h=y(y(y(y({},f),p),{},{fill:"none",stroke:p.fill},b),{},{index:w,points:[me(p.cx,p.cy,p.outerRadius,P),D],key:"line"});return o.createElement(Ge,{zIndex:Ke.label,key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(w)},o.createElement(J,null,c&&Fa(c,h),Ba(i,E,z(p,u))))});return o.createElement(J,{className:"recharts-pie-labels"},A)}function Ua(e){var{sectors:a,props:r,showLabels:s}=e,{label:i}=r;return typeof i=="object"&&i!=null&&"position"in i?o.createElement(Jt,{label:i}):o.createElement(Wa,{sectors:a,props:r,showLabels:s})}function qa(e){var{sectors:a,activeShape:r,inactiveShape:s,allOtherPieProps:i,shape:c,id:u}=e,f=Z(Ft),v=Z(Bt),b=Z(Wt),{onMouseEnter:j,onClick:A,onMouseLeave:p}=i,w=le(i,Da),P=Pa(j,i.dataKey,u),D=Ea(p),E=Ia(A,i.dataKey,u);return a==null||a.length===0?null:o.createElement(o.Fragment,null,a.map((h,C)=>{if((h==null?void 0:h.startAngle)===0&&(h==null?void 0:h.endAngle)===0&&a.length!==1)return null;var M=b==null||b===u,R=String(C)===f&&(v==null||i.dataKey===v)&&M,k=f?s:null,g=r&&R?r:k,N=y(y({},h),{},{stroke:h.stroke,tabIndex:-1,[qt]:C,[Ut]:u});return o.createElement(J,G({key:"sector-".concat(h==null?void 0:h.startAngle,"-").concat(h==null?void 0:h.endAngle,"-").concat(h.midAngle,"-").concat(C),tabIndex:-1,className:"recharts-pie-sector"},Ht(w,h,C),{onMouseEnter:P(h,C),onMouseLeave:D(h,C),onClick:E(h,C)}),o.createElement(la,G({option:c??g,index:C,shapeType:"sector",isActive:R},N)))}))}function Ha(e){var a,{pieSettings:r,displayedData:s,cells:i,offset:c}=e,{cornerRadius:u,startAngle:f,endAngle:v,dataKey:b,nameKey:j,tooltipType:A}=r,p=Math.abs(r.minAngle),w=za(f,v),P=Math.abs(w),D=s.length<=1?0:(a=r.paddingAngle)!==null&&a!==void 0?a:0,E=s.filter(g=>z(g,b,0)!==0).length,h=(P>=360?E:E-1)*D,C=P-E*p-h,M=s.reduce((g,N)=>{var I=z(N,b,0);return g+(Ie(I)?I:0)},0),R;if(M>0){var k;R=s.map((g,N)=>{var I=z(g,b,0),_=z(g,j,N),S=Va(r,c,g),B=(Ie(I)?I:0)/M,K,W=y(y({},g),i&&i[N]&&i[N].props);N?K=k.endAngle+re(w)*D*(I!==0?1:0):K=f;var X=K+re(w)*((I!==0?p:0)+B*C),V=(K+X)/2,U=(S.innerRadius+S.outerRadius)/2,te=[{name:_,value:I,payload:W,dataKey:b,type:A,graphicalItemId:r.id}],oe=me(S.cx,S.cy,U,V);return k=y(y(y(y({},r.presentationProps),{},{percent:B,cornerRadius:typeof u=="string"?parseFloat(u):u,name:_,tooltipPayload:te,midAngle:V,middleRadius:U,tooltipPosition:oe},W),S),{},{value:I,dataKey:b,startAngle:K,endAngle:X,payload:W,paddingAngle:re(w)*D}),k})}return R}function Ja(e){var{showLabels:a,sectors:r,children:s}=e,i=o.useMemo(()=>!a||!r?[]:r.map(c=>({value:c.value,payload:c.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:c.cx,cy:c.cy,innerRadius:c.innerRadius,outerRadius:c.outerRadius,startAngle:c.startAngle,endAngle:c.endAngle,clockWise:!1},fill:c.fill})),[r,a]);return o.createElement(Gt,{value:a?i:void 0},s)}function Xa(e){var{props:a,previousSectorsRef:r,id:s}=e,{sectors:i,isAnimationActive:c,animationBegin:u,animationDuration:f,animationEasing:v,activeShape:b,inactiveShape:j,onAnimationStart:A,onAnimationEnd:p}=a,w=Kt(a,"recharts-pie-"),P=r.current,[D,E]=o.useState(!1),h=o.useCallback(()=>{typeof p=="function"&&p(),E(!1)},[p]),C=o.useCallback(()=>{typeof A=="function"&&A(),E(!0)},[A]);return o.createElement(Ja,{showLabels:!D,sectors:i},o.createElement(Vt,{animationId:w,begin:u,duration:f,isActive:c,easing:v,onAnimationStart:C,onAnimationEnd:h,key:w},M=>{var R=[],k=i&&i[0],g=k==null?void 0:k.startAngle;return i==null||i.forEach((N,I)=>{var _=P&&P[I],S=I>0?zt(N,"paddingAngle",0):0;if(_){var B=Ee(_.endAngle-_.startAngle,N.endAngle-N.startAngle,M),K=y(y({},N),{},{startAngle:g+S,endAngle:g+B+S});R.push(K),g=K.endAngle}else{var{endAngle:W,startAngle:X}=N,V=Ee(0,W-X,M),U=y(y({},N),{},{startAngle:g+S,endAngle:g+V+S});R.push(U),g=U.endAngle}}),r.current=R,o.createElement(J,null,o.createElement(qa,{sectors:R,activeShape:b,inactiveShape:j,allOtherPieProps:a,shape:a.shape,id:s}))}),o.createElement(Ua,{showLabels:!D,sectors:i,props:a}),a.children)}var Za={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Ke.area};function Qa(e){var{id:a}=e,r=le(e,Ca),{hide:s,className:i,rootTabIndex:c}=e,u=o.useMemo(()=>ze(e.children,Y),[e.children]),f=Z(j=>wa(j,a,u)),v=o.useRef(null),b=fe("recharts-pie",i);return s||f==null?(v.current=null,o.createElement(J,{tabIndex:c,className:b})):o.createElement(Ge,{zIndex:e.zIndex},o.createElement(_a,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:f,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:a}),o.createElement(J,{tabIndex:c,className:b},o.createElement(Xa,{props:y(y({},r),{},{sectors:f}),previousSectorsRef:v,id:a})))}function Ue(e){var a=xe(e,Za),{id:r}=a,s=le(a,ka),i=Ve(s);return o.createElement(Lt,{id:r,type:"pie"},c=>o.createElement(o.Fragment,null,o.createElement(Mt,{type:"pie",id:c,data:s.data,dataKey:s.dataKey,hide:s.hide,angleAxisId:0,radiusAxisId:0,name:s.name,nameKey:s.nameKey,tooltipType:s.tooltipType,legendType:s.legendType,fill:s.fill,cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,paddingAngle:s.paddingAngle,minAngle:s.minAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius,cornerRadius:s.cornerRadius,presentationProps:i,maxRadius:a.maxRadius}),o.createElement(Ma,G({},s,{id:c})),o.createElement(Qa,G({},s,{id:c}))))}Ue.displayName="Pie";function Ya(e){var a=se();return o.useEffect(()=>{a(Yt(e))},[a,e]),null}var er=["layout"];function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},pe.apply(null,arguments)}function tr(e,a){if(e==null)return{};var r,s,i=ar(e,a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)r=c[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ar(e,a){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(a.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var rr={top:5,right:5,bottom:5,left:5},qe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:rr,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},sr=o.forwardRef(function(a,r){var s,i=xe(a.categoricalChartProps,qe),{layout:c}=i,u=tr(i,er),{chartName:f,defaultTooltipEventType:v,validateTooltipEventTypes:b,tooltipPayloadSearcher:j}=a,A={chartName:f,defaultTooltipEventType:v,validateTooltipEventTypes:b,tooltipPayloadSearcher:j,eventEmitter:void 0};return o.createElement(ea,{preloadedState:{options:A},reduxStoreName:(s=i.id)!==null&&s!==void 0?s:f},o.createElement(ta,{chartData:i.data}),o.createElement(aa,{layout:c,margin:i.margin}),o.createElement(ra,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),o.createElement(Ya,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),o.createElement(sa,pe({},u,{ref:r})))});function Te(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function Re(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Te(Object(r),!0).forEach(function(s){nr(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Te(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function nr(e,a,r){return(a=ir(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function ir(e){var a=lr(e,"string");return typeof a=="symbol"?a:a+""}function lr(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var or=["item"],cr=Re(Re({},qe),{},{layout:"centric",startAngle:0,endAngle:360}),dr=o.forwardRef((e,a)=>{var r=xe(e,cr);return o.createElement(sr,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:or,tooltipPayloadSearcher:na,categoricalChartProps:r,ref:a})});const Dr=({isAccountingMode:e=!1})=>{const{documents:a,isAccountingMode:r,selectCompany:s,resolveError:i,setSelectedDocument:c}=et(),[u,f]=o.useState(null),[v,b]=o.useState("ALL"),[j,A]=o.useState("ALL"),[p,w]=o.useState(""),[P,D]=o.useState(new Set),[E,h]=o.useState(new Set),[C,M]=o.useState(null),[R,k]=o.useState(!1),[g,N]=o.useState(""),[I,_]=o.useState(null),[S,B]=o.useState(!1),[K,W]=o.useState(!1),[X,V]=o.useState(""),[U,te]=o.useState(!1),oe=async()=>{te(!0),W(!0);try{const n=localStorage.getItem("auth_token"),m=await fetch("/api/ai/generate-report",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({context:{stats:T,risks:$.slice(0,20),companyInfo:{filter:u||"All"}}})}),l=await m.json();m.ok?V(l.report):V("Erro ao gerar relatório: "+l.error)}catch{V("Erro de conexão ao gerar relatório.")}finally{te(!1)}},$=o.useMemo(()=>{const n=[],m=a.filter(d=>d.status===H.COMPLETED||d.status===H.ERROR||d.status===H.APROVADO||d.status===H.REJEITADO),l=new Map;return m.forEach(d=>{var be,ge,ye,je,Ne,Ae;const x=d.data||{},L=d.rawData||{};if(d.status===H.ERROR){n.push({id:`err-sys-${d.id}`,docId:d.id,docName:d.fileName,companyName:d.companyName||"N/A",companyNif:x.nif||"N/A",companyStatus:"CRITICO",errorTitle:"Erro no Processamento IA",description:"Ocorreu um erro técnico ao analisar este documento. Recomendamos reprocessar.",suggestion:"Tente reprocessar o documento ou verificar a conexão com o servidor.",priority:"ALTA",date:new Date(d.uploadDate).toLocaleDateString("pt-AO"),type:"COMPLIANCE",value:0});return}if(((x.fiscal_validation||L.fiscal_validation)==="REJEITADO"||d.status===H.REJEITADO)&&n.push({id:`err-rej-${d.id}`,docId:d.id,docName:x.merchantName||d.fileName,companyName:d.companyName||"N/A",companyNif:((be=x.issuer_data)==null?void 0:be.nif)||"N/A",companyStatus:"CRITICO",errorTitle:"Documento Rejeitado pela IA",description:x.justification||"A Inteligência Artificial identificou inconsistências críticas que invalidam este documento para fins fiscais.",suggestion:((ge=x.sugestoes_correcao)==null?void 0:ge[0])||"O documento deve ser revisado manualmente ou substituído por uma via válida.",priority:"ALTA",date:new Date(d.uploadDate).toLocaleDateString("pt-AO"),type:"COMPLIANCE",value:x.totalAmount||0}),!x.risk_accepted){const ae=`${(ye=x.merchantName)==null?void 0:ye.toLowerCase()}|${x.date}|${x.totalAmount}`;l.has(ae)?n.push({id:`err-dup-${d.id}`,docId:d.id,docName:x.merchantName||d.fileName,companyName:d.companyName||"N/A",companyNif:((je=x.issuer_data)==null?void 0:je.nif)||"N/A",companyStatus:"ESTAVEL",errorTitle:"Duplicidade Detectada",description:"Identificamos outro documento com o mesmo fornecedor, data e valor em sua base de dados.",suggestion:"Arquive este documento como duplicado para evitar lançamento duplo no SAFT.",priority:"ALTA",date:new Date(d.uploadDate).toLocaleDateString("pt-AO"),type:"DUPLICATE",value:x.totalAmount||0}):l.set(ae,[d.id])}if((((Ne=L.analise_matematica)==null?void 0:Ne.coerencia_matematica)==="INCOERENTE"||x.mathematical_coherence&&x.mathematical_coherence.includes("INCOERENTE"))&&n.push({id:`err-math-${d.id}`,docId:d.id,docName:x.merchantName||d.fileName,companyName:d.companyName||"N/A",companyNif:((Ae=x.issuer_data)==null?void 0:Ae.nif)||"N/A",errorTitle:"Incoerência Matemática",description:"A soma dos itens não corresponde ao total declarado no documento.",suggestion:"Verifique se existem taxas ocultas ou erros de OCR nos valores das linhas.",priority:"MEDIA",date:new Date(d.uploadDate).toLocaleDateString("pt-AO"),type:"TAX_RATE",value:x.totalAmount||0}),x.date){const ae=new Date(x.date),we=Math.ceil(Math.abs(new Date().getTime()-ae.getTime())/(1e3*60*60*24));we>90&&n.push({id:`err-date-${d.id}`,docId:d.id,docName:x.merchantName||d.fileName,companyName:d.companyName||"N/A",errorTitle:"Prazo CIVA Excedido",description:`Documento emitido há ${we} dias. O prazo legal para dedução do IVA pode ter expirado.`,suggestion:"Consulte o Art. 18 do CIVA ou aceite o custo sem dedução de imposto.",priority:"MEDIA",date:new Date(d.uploadDate).toLocaleDateString("pt-AO"),type:"COMPLIANCE",value:x.totalAmount||0})}}),n},[a]),q=o.useMemo(()=>{let n=$;if(r&&u&&(n=n.filter(l=>l.companyName===u)),p){const l=p.toLowerCase();n=n.filter(d=>d.docName.toLowerCase().includes(l)||d.errorTitle.toLowerCase().includes(l)||d.companyName.toLowerCase().includes(l))}v!=="ALL"&&(v==="DATE"?n=n.filter(l=>l.errorTitle.includes("Prazo")||l.errorTitle.includes("Data")):n=n.filter(l=>l.type===v)),j!=="ALL"&&(n=n.filter(l=>l.priority===j));const m={};return n.forEach(l=>{const d=`${l.companyName}-${l.errorTitle}`;m[d]||(m[d]={key:d,title:l.errorTitle,company:l.companyName,nif:l.companyNif||"N/A",companyStatus:l.companyStatus||"ESTAVEL",count:0,totalValue:0,type:l.type,priority:l.priority,description:l.description,suggestion:l.suggestion,items:[]}),m[d].count++,m[d].totalValue+=l.value,m[d].items.push(l)}),Object.values(m).sort((l,d)=>l.priority==="ALTA"&&d.priority!=="ALTA"?-1:d.priority==="ALTA"&&l.priority!=="ALTA"?1:d.count-l.count)},[$,r,u,v,j,p]),T=o.useMemo(()=>{const n=$.reduce((x,L)=>x+L.value,0),m=$.filter(x=>x.priority==="ALTA").length,l=a.length||1,d=Math.max(0,Math.min(100,100-$.length/l*100));return{totalRiskValue:n,criticalCount:m,healthScore:d,totalErrors:$.length}},[$,a.length]),He=o.useMemo(()=>{const n={};return a.forEach(m=>{const l=m.companyName||"N/A";n[l]||(n[l]={name:l,totalDocs:0,errors:0,critical:0,valueAtRisk:0}),n[l].totalDocs++}),$.forEach(m=>{const l=m.companyName||"Empresa Desconhecida";n[l]||(n[l]={name:l,totalDocs:0,errors:0,critical:0,valueAtRisk:0}),n[l].errors++,n[l].valueAtRisk+=m.value,m.priority==="ALTA"&&n[l].critical++}),Object.values(n).sort((m,l)=>l.critical-m.critical)},[a,$]),Je=n=>{const m=new Set(P);m.has(n)?m.delete(n):m.add(n),D(m)},Xe=async(n,m,l)=>{{_({key:n,action:m,items:l}),k(!0),N("");return}},Ze=async()=>{if(!(!I||!g.trim())){B(!0);try{const{key:n,action:m,items:l,isSingle:d}=I,x=new Set(E);x.add(n),h(x),k(!1),await new Promise(L=>setTimeout(L,600));for(const L of l)await i(L.docId,m,g);_(null)}catch(n){console.error("Failed to resolve:",n)}finally{B(!1)}}},Qe=(n,m)=>{_({key:`item-${n.id}`,action:m,items:[n],isSingle:!0}),k(!0),N("")},Ye=()=>t.jsxs("div",{className:"relative w-32 h-32",children:[t.jsx(ia,{width:"100%",height:"100%",children:t.jsx(dr,{children:t.jsxs(Ue,{data:[{value:T.healthScore},{value:100-T.healthScore}],cx:"50%",cy:"50%",innerRadius:45,outerRadius:55,startAngle:90,endAngle:-270,dataKey:"value",stroke:"none",cornerRadius:10,children:[t.jsx(Y,{fill:T.healthScore>80?"#10b981":T.healthScore>50?"#f59e0b":"#ef4444"}),t.jsx(Y,{fill:"#1a1a1a"})]})})}),t.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[t.jsxs("span",{className:`text-2xl font-bold tracking-tighter ${T.healthScore>80?"text-emerald-400":T.healthScore>50?"text-amber-400":"text-red-400"}`,children:[Math.round(T.healthScore),"%"]}),t.jsx("span",{className:"text-[8px] font-bold text-slate-500 uppercase tracking-widest",children:"Health"})]})]});return r&&!u?t.jsxs("div",{className:"max-w-7xl mx-auto animate-in fade-in slide-in-from-bottom-4 duration-500 space-y-8",children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-[#0c0c0c] border border-white/[0.03] rounded-[32px] p-6 relative overflow-hidden flex items-center justify-between",children:[t.jsxs("div",{className:"z-10",children:[t.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:"Compliance Global"}),t.jsx("p",{className:"text-slate-400 text-xs max-w-[150px]",children:"Média de saúde fiscal da carteira de clientes."}),t.jsx("div",{className:"mt-4 flex gap-2",children:t.jsxs("span",{className:"px-2 py-1 rounded bg-white/5 border border-white/5 text-[10px] text-slate-300 font-mono",children:[a.length," Docs"]})})]}),t.jsx(Ye,{})]}),t.jsxs("div",{className:"bg-[#0c0c0c] border border-white/[0.03] rounded-[32px] p-6 relative overflow-hidden flex flex-col justify-center",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{className:"p-1.5 bg-red-500/10 rounded-lg text-red-400 animate-pulse",children:t.jsx(tt,{className:"w-4 h-4"})}),t.jsx("span",{className:"text-[10px] font-bold text-red-400 uppercase tracking-widest",children:"Risco Financeiro Estimado"})]}),t.jsxs("div",{className:"text-4xl font-bold text-white tracking-tighter font-mono",children:["Kz ",(T.totalRiskValue/1e6).toFixed(1),"M"]}),t.jsx("p",{className:"text-slate-500 text-xs mt-2",children:"Valor acumulado em documentos com impedimento fiscal ou erros."}),t.jsx("div",{className:"absolute -bottom-10 -right-10 w-40 h-40 bg-red-500/5 blur-[60px] rounded-full pointer-events-none"})]}),t.jsxs("div",{className:"bg-[#0c0c0c] border border-white/[0.03] rounded-[32px] p-6 flex flex-col justify-center relative overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-white font-bold",children:"Diagnóstico Rápido"}),t.jsx("span",{className:"text-[10px] font-bold bg-white/5 px-2 py-1 rounded text-slate-400",children:"AGORA"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center text-xs",children:[t.jsxs("span",{className:"text-slate-400 flex items-center gap-2",children:[t.jsx(nt,{className:"w-3 h-3 text-red-500"})," Críticos"]}),t.jsx("span",{className:"text-white font-bold",children:T.criticalCount})]}),t.jsx("div",{className:"w-full bg-white/5 h-1.5 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-red-500",style:{width:`${T.criticalCount/T.totalErrors*100}%`}})}),t.jsxs("p",{className:"text-[10px] text-slate-500 text-right pt-1",children:[T.totalErrors," inconsistências totais detectadas."]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"h-px bg-white/10 flex-1"}),t.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Mapa de Ameaças (Heatmap)"}),t.jsx("div",{className:"h-px bg-white/10 flex-1"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:He.map(n=>{const m=n.totalDocs>0?n.errors/n.totalDocs*100:0,l=n.critical>0;return t.jsxs("div",{onClick:()=>f(n.name),className:`
                                    relative overflow-hidden rounded-[24px] p-6 cursor-pointer transition-all duration-500 group
                                    ${l?"bg-[#0f0505] border border-red-500/30 hover:border-red-500/60 shadow-[0_0_40px_rgba(220,38,38,0.1)]":"bg-[#0c0c0c] border border-white/5 hover:border-emerald-500/30 hover:bg-[#0c110c]"}
                                `,children:[l&&t.jsx("div",{className:"absolute inset-0 bg-red-500/5 animate-[pulse_3s_ease-in-out_infinite] pointer-events-none"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex justify-between items-start mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center text-slate-300 border shadow-inner ${l?"bg-red-950/20 border-red-500/20":"bg-[#151515] border-white/5"}`,children:t.jsx(at,{className:`w-5 h-5 ${l?"text-red-400":"text-slate-400"}`})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-white text-sm truncate max-w-[150px]",children:n.name}),t.jsxs("p",{className:"text-[10px] text-slate-500 font-mono",children:["NIF: ",n.nif]})]})]}),l?t.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded bg-red-500/10 border border-red-500/20 text-[9px] font-bold text-red-400 uppercase tracking-wider animate-pulse",children:[t.jsx(it,{className:"w-3 h-3"})," Crítico"]}):t.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded bg-emerald-500/10 border border-emerald-500/20 text-[9px] font-bold text-emerald-400 uppercase tracking-wider",children:[t.jsx(Pe,{className:"w-3 h-3"})," Estável"]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-end",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-bold",children:"Risco Acumulado"}),t.jsxs("p",{className:`text-xl font-bold font-mono tracking-tight ${l?"text-white":"text-slate-300"}`,children:["Kz ",(n.valueAtRisk/1e3).toFixed(0),"k"]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:`text-2xl font-bold ${l?"text-red-500":"text-slate-500"}`,children:n.errors}),t.jsxs("p",{className:"text-[9px] text-slate-600 uppercase font-bold",children:["Erros / ",n.totalDocs," Docs"]})]})]}),t.jsx("div",{className:"relative w-full h-1.5 bg-[#1a1a1a] rounded-full overflow-hidden",children:t.jsx("div",{className:`absolute left-0 top-0 bottom-0 rounded-full transition-all duration-500 ${l?"bg-red-500":"bg-emerald-500"}`,style:{width:`${m}%`}})}),t.jsxs("div",{className:"flex justify-between text-[9px] font-bold uppercase text-slate-600",children:[t.jsx("span",{children:"Docs Pendentes"}),t.jsxs("span",{children:[Math.round(m),"% Taxa de Erro"]})]})]})]})]},n.name)})})]}):t.jsxs("div",{className:"max-w-5xl mx-auto animate-in fade-in slide-in-from-bottom-4 duration-500 space-y-8 relative",children:[r&&u&&t.jsxs("button",{onClick:()=>f(null),className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors text-xs font-bold uppercase tracking-widest group",children:[t.jsx("div",{className:"p-1 rounded-full bg-white/5 group-hover:bg-white/10",children:t.jsx(lt,{className:"w-3 h-3"})}),"Voltar ao Mapa de Risco"]}),q.length>0&&t.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/20 to-blue-900/20 border border-cyan-500/20 rounded-[24px] p-6 relative overflow-hidden flex flex-col md:flex-row gap-6 items-center",children:[t.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-cyan-500/10 blur-[80px] rounded-full pointer-events-none"}),t.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-cyan-500/10 flex items-center justify-center text-cyan-400 border border-cyan-500/20 animate-pulse",children:t.jsx(ce,{className:"w-6 h-6 fill-current"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-white text-lg",children:"Insights da Inteligência Artificial"}),t.jsxs("p",{className:"text-slate-400 text-sm leading-snug max-w-lg",children:["Detectamos que ",t.jsxs("strong",{className:"text-cyan-400",children:[Math.round(q.filter(n=>n.type==="COMPLIANCE").length/Math.max(1,q.length)*100),"%"]})," dos problemas são relacionados a documentos expirados ou limites de data. Recomenda-se auditoria nos prazos de submissão."]})]})]}),t.jsx("div",{className:"ml-auto flex gap-3 relative z-10",children:t.jsx("button",{onClick:oe,className:"px-4 py-2 bg-cyan-500 hover:bg-cyan-400 text-black rounded-lg text-xs font-bold uppercase tracking-wide transition-all shadow-lg shadow-cyan-500/20",children:"Gerar Relatório IA"})})]}),t.jsxs("div",{className:"sticky top-4 z-40 bg-[#0a0b10]/90 backdrop-blur-xl border border-white/10 rounded-2xl p-2 flex flex-col md:flex-row gap-3 shadow-2xl items-center",children:[t.jsxs("div",{className:"flex flex-1 gap-2 overflow-x-auto w-full md:w-auto pb-2 md:pb-0 px-1 custom-scrollbar",children:[t.jsxs("div",{className:"relative group",children:[t.jsxs("select",{value:v,onChange:n=>b(n.target.value),className:"bg-[#151515] hover:bg-[#1a1a1a] text-white text-xs font-bold uppercase tracking-wide py-2.5 pl-4 pr-8 rounded-xl border border-white/10 appearance-none cursor-pointer focus:outline-none focus:border-cyan-500 transition-colors",children:[t.jsx("option",{value:"ALL",children:"Tipo: Todos"}),t.jsx("option",{value:"DUPLICATE",children:"Duplicidade"}),t.jsx("option",{value:"TAX_RATE",children:"Taxa de Câmbio/IVA"}),t.jsx("option",{value:"COMPLIANCE",children:"NIF / Compliance"}),t.jsx("option",{value:"DATE",children:"Prazos / Data"})]}),t.jsx(de,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-3 h-3 text-slate-500 pointer-events-none"})]}),t.jsxs("div",{className:"relative group",children:[t.jsxs("select",{value:j,onChange:n=>A(n.target.value),className:"bg-[#151515] hover:bg-[#1a1a1a] text-white text-xs font-bold uppercase tracking-wide py-2.5 pl-4 pr-8 rounded-xl border border-white/10 appearance-none cursor-pointer focus:outline-none focus:border-cyan-500 transition-colors",children:[t.jsx("option",{value:"ALL",children:"Prioridade: Todas"}),t.jsx("option",{value:"ALTA",children:"Alta (Crítico)"}),t.jsx("option",{value:"MEDIA",children:"Média (Atenção)"}),t.jsx("option",{value:"BAIXA",children:"Baixa (Info)"})]}),t.jsx(de,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-3 h-3 text-slate-500 pointer-events-none"})]})]}),t.jsxs("div",{className:"relative w-full md:w-64",children:[t.jsx(rt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-600 w-3.5 h-3.5"}),t.jsx("input",{type:"text",value:p,onChange:n=>w(n.target.value),placeholder:"Filtrar por nome ou ID...",className:"w-full bg-[#050505] border border-white/5 rounded-xl pl-9 pr-4 py-2.5 text-xs font-medium text-white focus:outline-none focus:border-cyan-500/50 transition-all placeholder-slate-600"})]})]}),t.jsx("div",{className:"space-y-4",children:q.filter(n=>!E.has(n.key)).length===0&&q.length===0?t.jsxs("div",{className:"text-center py-20 bg-[#080808] rounded-[32px] border border-white/5 border-dashed",children:[t.jsx(ue,{className:"w-16 h-16 text-emerald-500 mx-auto mb-4"}),t.jsx("h3",{className:"text-white font-bold text-lg",children:"Sistema Limpo"}),t.jsx("p",{className:"text-slate-400 text-sm",children:"Nenhuma inconsistência encontrada para este filtro."})]}):q.map(n=>{const m=E.has(n.key);return t.jsxs("div",{className:`group bg-[#0c0c0c] border border-white/[0.04] rounded-[24px] hover:border-white/10 transition-all duration-700 relative overflow-hidden
                                    ${m?"opacity-0 scale-95 translate-y-4 pointer-events-none":"opacity-100 scale-100 translate-y-0"}
                                `,children:[m&&t.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-[2px] transition-all duration-500",children:t.jsxs("div",{className:"flex flex-col items-center animate-in zoom-in-50 slide-in-from-bottom-4 duration-500",children:[t.jsx("div",{className:"w-16 h-16 bg-emerald-500 rounded-full flex items-center justify-center shadow-[0_0_40px_rgba(16,185,129,0.5)] mb-3",children:t.jsx(ue,{className:"w-8 h-8 text-black"})}),t.jsx("span",{className:"text-lg font-bold text-white tracking-widest uppercase text-shadow-lg",children:"Resolvido"})]})}),t.jsx("div",{className:`absolute left-0 top-6 bottom-6 w-1 rounded-r-full ${n.priority==="ALTA"?"bg-red-500":n.priority==="MEDIA"?"bg-amber-500":"bg-blue-500"}`}),n.type==="DUPLICATE"&&C===n.key&&!m&&t.jsxs("div",{className:"absolute right-0 top-0 bottom-0 w-64 bg-[#111] border-l border-white/10 shadow-2xl z-20 animate-in slide-in-from-right-4 fade-in duration-300 p-4 flex flex-col justify-center rounded-r-[24px]",children:[t.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-2",children:"Original Encontrado"}),t.jsx("div",{className:"aspect-[3/4] bg-white/5 rounded-lg border border-white/5 flex items-center justify-center mb-2",children:t.jsx(st,{className:"w-8 h-8 text-slate-600"})}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("p",{className:"text-xs text-white font-bold",children:["Doc #",n.items[0].docId.substring(0,4)]}),t.jsx("p",{className:"text-[10px] text-slate-400",children:n.items[0].date}),t.jsx("p",{className:"text-[10px] text-emerald-400 font-mono",children:"Valor Idêntico"})]})]}),t.jsxs("div",{className:"p-6 flex flex-col lg:flex-row gap-6 relative z-10",onMouseEnter:()=>n.type==="DUPLICATE"&&M(n.key),onMouseLeave:()=>M(null),children:[t.jsxs("div",{className:"flex gap-5 flex-1",children:[t.jsxs("div",{className:`
                                            w-12 h-12 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-inner relative
                                            ${n.priority==="ALTA"?"bg-red-500/10 text-red-500":"bg-slate-900 text-slate-400"}
                                        `,children:[n.type==="COMPLIANCE"?t.jsx(ot,{className:"w-6 h-6"}):n.type==="DUPLICATE"?t.jsx(ct,{className:"w-6 h-6"}):n.type==="TAX_RATE"?t.jsx(dt,{className:"w-6 h-6"}):t.jsx(ut,{className:"w-6 h-6"}),n.count>1&&t.jsx("div",{className:"absolute -top-2 -right-2 bg-white text-black text-[10px] font-bold w-5 h-5 rounded-full flex items-center justify-center border-2 border-[#0c0c0c]",children:n.count})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[t.jsxs("h3",{className:"text-base font-bold text-white group-hover:text-cyan-400 transition-colors cursor-pointer flex items-center gap-2",onClick:()=>{const l=a.find(d=>d.id===n.items[0].docId);l&&c(l)},children:[n.title,t.jsx(ca,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-all text-cyan-400"})]}),t.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-bold uppercase border ${n.priority==="ALTA"?"bg-red-500/10 text-red-400 border-red-500/20":"bg-slate-800 text-slate-400 border-slate-700"}`,children:n.priority})]}),t.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[t.jsxs("p",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-widest",children:["NIF: ",t.jsx("span",{className:"text-slate-300",children:n.nif})]}),t.jsx("div",{className:"w-1 h-1 rounded-full bg-white/10"}),t.jsxs("p",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-widest",children:["Estado:",t.jsx("span",{className:`ml-1 ${n.companyStatus==="CRITICO"?"text-red-400":"text-emerald-400"}`,children:n.companyStatus})]})]}),t.jsx("p",{className:"text-slate-400 text-sm leading-relaxed max-w-2xl",children:n.count>1?`${n.count} documentos da '${n.company}' apresentam o mesmo erro.`:n.description}),t.jsxs("div",{className:"mt-4 bg-[#111] rounded-xl p-3 border border-white/5 flex gap-3 items-start max-w-xl hover:border-cyan-500/20 transition-colors",children:[t.jsx(ce,{className:"w-4 h-4 text-cyan-400 fill-current mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("span",{className:"text-[10px] font-bold text-cyan-400 uppercase tracking-wider block mb-1",children:"KwikDocs AI Sugere:"}),t.jsx("p",{className:"text-xs text-slate-300 leading-snug",children:n.suggestion})]})]})]})]}),t.jsxs("div",{className:"flex flex-col gap-2 min-w-[200px] justify-center",children:[t.jsxs("button",{onClick:()=>Xe(n.key,"MANUAL_APPROVE",n.items),className:"flex items-center justify-center gap-2 bg-emerald-500 text-black py-2.5 rounded-lg text-xs font-bold uppercase tracking-wide hover:bg-emerald-400 transition-colors active:scale-95 shadow-lg shadow-emerald-500/20",children:[t.jsx(Pe,{className:"w-3.5 h-3.5"})," Aprovar Sugestão"]}),n.count>1&&t.jsxs("button",{onClick:()=>Je(n.key),className:"mt-2 text-xs text-center text-slate-500 hover:text-cyan-400 font-bold flex items-center justify-center gap-1",children:[P.has(n.key)?"Ocultar Detalhes":`Ver ${n.count} Documentos`,P.has(n.key)?t.jsx(mt,{className:"w-3 h-3"}):t.jsx(de,{className:"w-3 h-3"})]})]})]}),P.has(n.key)&&t.jsx("div",{className:"bg-[#0f0f0f] border-t border-white/5 p-2 space-y-2 animate-in slide-in-from-top-2",children:n.items.map(l=>E.has(`item-${l.id}`)?null:t.jsxs("div",{className:"group/item flex flex-col p-4 bg-white/[0.02] border border-white/5 rounded-2xl hover:bg-white/[0.04] transition-all",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${l.priority==="ALTA"?"bg-red-500":l.priority==="MEDIA"?"bg-amber-500":"bg-blue-500"}`}),t.jsx("span",{className:"text-xs font-bold text-slate-300",children:l.docName}),t.jsxs("span",{className:"text-[10px] text-slate-500 font-mono",children:["#",l.docId.substring(0,8)]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:"text-[10px] text-slate-500 font-mono",children:l.date}),t.jsxs("span",{className:"text-xs font-bold text-white font-mono",children:["Kz ",l.value.toLocaleString()]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>{const x=a.find(L=>L.id===l.id||L.id===l.docId);x&&c(x)},className:"px-3 py-1.5 bg-white/5 hover:bg-white/10 text-slate-300 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all flex items-center gap-1.5",children:[t.jsx(pt,{className:"w-3 h-3"})," Ver"]}),t.jsxs("button",{onClick:()=>Qe(l,"MANUAL_APPROVE"),className:"px-3 py-1.5 bg-emerald-500/10 hover:bg-emerald-500/20 text-emerald-400 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all flex items-center gap-1.5",children:[t.jsx(ue,{className:"w-3 h-3"})," Resolver"]})]})]})]}),t.jsxs("div",{className:"mt-3 pl-4 border-l border-cyan-500/20 py-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[t.jsx(ce,{className:"w-3 h-3 text-cyan-400 fill-current"}),t.jsx("span",{className:"text-[9px] font-bold text-cyan-400 uppercase tracking-widest",children:"Sugestão KwikDocs AI"})]}),t.jsxs("p",{className:"text-[11px] text-slate-400 italic leading-relaxed",children:['"',l.suggestion,'"']})]})]},l.id))})]},n.key)})}),R&&t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-300",children:t.jsx("div",{className:"bg-[#0c0c0c] border border-white/10 w-full max-w-md rounded-[32px] overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300",children:t.jsxs("div",{className:"p-8",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[t.jsx("div",{className:"w-12 h-12 rounded-2xl bg-cyan-500/10 flex items-center justify-center text-cyan-400 border border-cyan-500/20",children:t.jsx(ua,{className:"w-6 h-6"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white",children:"Resolver Inconsistência"}),t.jsx("p",{className:"text-slate-500 text-xs",children:"Informe o motivo da resolução manual."})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-2 block",children:"Observações / Justificativa"}),t.jsx("textarea",{autoFocus:!0,value:g,onChange:n=>N(n.target.value),placeholder:"Ex: Documento verificado fisicamente. O erro de NIF é apenas uma falha de impressão no original...",className:"w-full bg-[#151515] border border-white/10 rounded-2xl p-4 text-sm text-white placeholder:text-slate-600 focus:outline-none focus:border-cyan-500/50 min-h-[120px] resize-none transition-all"})]}),t.jsxs("div",{className:"bg-amber-500/5 border border-amber-500/10 rounded-xl p-3 flex gap-3",children:[t.jsx(xt,{className:"w-4 h-4 text-amber-500 shrink-0 mt-0.5"}),t.jsx("p",{className:"text-[10px] text-amber-500/80 leading-relaxed uppercase font-bold tracking-tight",children:"Esta ação será registrada com seu usuário para fins de auditoria e prestação de contas."})]})]}),t.jsxs("div",{className:"flex gap-3 mt-8",children:[t.jsx("button",{onClick:()=>k(!1),className:"flex-1 py-3 px-4 rounded-xl border border-white/5 text-slate-400 text-xs font-bold uppercase tracking-wider hover:bg-white/5 transition-all",children:"Cancelar"}),t.jsx("button",{disabled:!g.trim()||S,onClick:Ze,className:"flex-1 py-3 px-4 rounded-xl bg-cyan-500 text-black text-xs font-bold uppercase tracking-wider hover:bg-cyan-400 disabled:opacity-30 disabled:cursor-not-allowed transition-all shadow-lg shadow-cyan-500/20 flex items-center justify-center gap-2",children:S?"Processando...":"Confirmar Resolução"})]})]})})})]})};export{Dr as default};
