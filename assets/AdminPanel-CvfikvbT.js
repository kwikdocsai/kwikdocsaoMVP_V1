import{d as F,u as Ke,r,j as e,b as He,g as pe,B as H,f as z,S as le,L as Te,G as qe,c as We,i as Y,Z as D,H as j,R as De,P as Q,F as Ye,C as Qe,I as Se,J as oe}from"./index-DGU_5aUU.js";import{C as Xe}from"./chevron-right-CL69ODNs.js";import{C as Ze}from"./chevron-left-BudApby1.js";import{L as Je}from"./layout-dashboard-DvWR-4XH.js";import{B as ne}from"./bot-CLE0hCT2.js";import{U as be}from"./users-wxXRRKLP.js";import{C as et}from"./chart-column-Bg_DSKq4.js";import{C as ee,S as tt}from"./smartphone-BpXuAQ3b.js";import{D as re}from"./database-CVuvOKLk.js";import{S as Z}from"./shield-alert-xxCVV7Le.js";import{G as ce}from"./globe-CBFAlDDj.js";import{S as ue}from"./shield-CUxGGfkW.js";import{A as ge}from"./arrow-up-right-CIdnyOYb.js";import{A as st}from"./arrow-down-right-D9TqTi-C.js";import{T as Le}from"./trending-up-D9ElA1-W.js";import{S as te}from"./shield-check-DdE0ZdU2.js";import{C as fe}from"./circle-alert-CrI_V2XX.js";import{D as J}from"./dollar-sign-BPs6eOry.js";import{W as Me}from"./wallet-LCTzGwjg.js";import{S as Pe}from"./server-C-fy6UAQ.js";import{C as Oe}from"./clock-CM4-85hH.js";import{E as je,C as Ne}from"./external-link-CseaWC1Y.js";import{C as de}from"./circle-check-C0_zhOmv.js";import{C as X}from"./circle-x-BCID97TW.js";import{U as at,F as lt,S as Re}from"./user-plus-BKulcycc.js";import{M as rt}from"./mail-BXxIJBBZ.js";import{H as it}from"./history-C0v622-S.js";import{K as ot}from"./key-76RU7DJ-.js";import{T as Ae}from"./target-6-0OkLib.js";import{D as we}from"./download-DwJR7aBH.js";import{T as xe}from"./trash-2-CbLE-mx0.js";import{n as $}from"./index-BHQswb_Y.js";import{C as ae}from"./circle-check-big-Ca7NMe0M.js";import{U as nt}from"./user-DbGEY0rC.js";import{E as ve}from"./eye-PPCr0sL6.js";import{T as ct}from"./terminal-DxfGcIRT.js";import{L as ye}from"./lock-Pj93_gqj.js";import{R as ke}from"./refresh-cw-FO-j8P3O.js";import{C as me}from"./cpu-Doafvc8R.js";import{H as dt}from"./hard-drive-DXtrljmW.js";import{M as xt}from"./message-square-BVzf4iSz.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ce=F("badge-check",mt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],pt=F("circle-user",ht);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Ee=F("cloud",bt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],Ie=F("coins",ut);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ft=F("eye-off",gt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],_e=F("funnel",jt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],wt=F("log-in",Nt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],he=F("package",vt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],kt=F("pen",yt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],St=F("thermometer",_t);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Ct=F("user-x",At),Et=({currentView:l,onChangeView:S})=>{const{logout:u}=Ke(),[g,v]=r.useState(!1),k=[{id:"ADMIN_DASHBOARD",label:"Painel Global",icon:Je},{id:"ADMIN_AGENTS",label:"Agentes de IA",icon:ne},{id:"ADMIN_COMPANIES",label:"Tenants (Empresas)",icon:H},{id:"ADMIN_USERS",label:"Utilizadores SaaS",icon:be},{id:"ADMIN_BILLING",label:"Gestão Financeira (SaaS)",icon:et},{id:"ADMIN_BANK_ACCOUNTS",label:"Contas Bancárias",icon:H},{id:"ADMIN_PAYMENTS",label:"Pagamentos",icon:ee},{id:"ADMIN_INFRA",label:"Infraestrutura",icon:re},{id:"ADMIN_LOGS",label:"Logs de Auditoria",icon:z},{id:"ADMIN_SECURITY",label:"Segurança",icon:Z},{id:"ADMIN_SETTINGS",label:"Configurações Admin",icon:le}],c=n=>l===n,h=n=>`
        flex items-center w-full ${g?"justify-center px-2":"px-5"} py-3.5 mb-2 text-sm font-medium transition-all rounded-2xl group relative
        ${c(n)?"bg-amber-500/10 text-amber-400 shadow-[0_0_20px_rgba(245,158,11,0.1)]":"text-slate-500 hover:text-slate-200 hover:bg-white/5"}
    `;return e.jsxs("div",{className:`flex flex-col h-full ${g?"w-24":"w-72"} bg-[#0a0a0a] border-r border-amber-500/10 relative transition-all duration-300 ease-in-out`,children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-amber-500 via-purple-500 to-amber-500"}),e.jsxs("div",{className:`flex items-center justify-center h-28 transition-all relative overflow-hidden ${g?"px-2":"px-6"}`,children:[e.jsx(He,{className:`${g?"w-12 h-12":"w-48 h-16"} transition-all duration-300`,iconClassName:"w-full h-full"}),!g&&e.jsx("div",{className:"absolute top-16 right-6",children:e.jsx("span",{className:"text-[10px] font-black bg-amber-500 text-black px-1.5 py-0.5 rounded tracking-tighter uppercase",children:"Admin"})})]}),e.jsx("button",{onClick:()=>v(!g),className:"absolute -right-3 top-10 bg-[#1a1a1a] border border-amber-500/20 text-amber-500/50 hover:text-amber-500 rounded-full p-1.5 shadow-xl z-50 transition-colors",children:g?e.jsx(Xe,{className:"w-3 h-3"}):e.jsx(Ze,{className:"w-3 h-3"})}),e.jsx("div",{className:"px-4 mb-4",children:e.jsxs("div",{className:`flex items-center gap-3 bg-white/5 border border-white/5 rounded-xl ${g?"p-2 justify-center":"px-3 py-2"}`,children:[e.jsx(pe,{className:"w-4 h-4 text-slate-500"}),!g&&e.jsx("input",{type:"text",placeholder:"Procurar global...",className:"bg-transparent border-none outline-none text-xs text-white placeholder-slate-600 w-full"})]})}),e.jsxs("nav",{className:"flex-1 px-4 space-y-1 overflow-y-auto custom-scrollbar",children:[!g&&e.jsx("div",{className:"px-5 mb-4 mt-2 text-[10px] font-bold text-amber-500/50 uppercase tracking-widest",children:"Governança SaaS"}),k.map(n=>e.jsxs("button",{onClick:()=>S(n.id),className:h(n.id),title:g?n.label:void 0,children:[c(n.id)&&e.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-amber-500 rounded-r-full shadow-[0_0_10px_#f59e0b]"}),e.jsx(n.icon,{className:`w-5 h-5 flex-shrink-0 transition-colors ${c(n.id)?"text-amber-400":"text-slate-600 group-hover:text-amber-500/50"} ${g?"":"mr-3"}`}),!g&&e.jsx("span",{className:"truncate",children:n.label})]},n.id))]}),e.jsx("div",{className:"p-4 border-t border-white/[0.03]",children:e.jsxs("div",{className:"bg-gradient-to-br from-amber-500/5 to-purple-500/10 rounded-2xl p-4 border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-500/20 border border-amber-500/30 flex items-center justify-center text-amber-400 font-bold",children:"SA"}),!g&&e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("p",{className:"text-sm font-bold text-white truncate",children:"Super Admin"}),e.jsx("p",{className:"text-[10px] text-amber-500/70 uppercase tracking-wider font-bold",children:"KwikDocs Root"})]})]}),!g&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>S("OVERVIEW"),className:"w-full py-2 bg-amber-500/20 hover:bg-amber-500/30 text-amber-400 text-[10px] font-bold uppercase tracking-wider rounded-xl transition-all flex items-center justify-center gap-2 border border-amber-500/20",children:[e.jsx(ce,{className:"w-3 h-3"})," Voltar ao Hub"]}),e.jsxs("button",{onClick:u,className:"w-full py-2 bg-white/5 hover:bg-red-500/10 text-slate-400 hover:text-red-400 text-[10px] font-bold uppercase tracking-wider rounded-xl transition-all flex items-center justify-center gap-2",children:[e.jsx(Te,{className:"w-3 h-3"})," Terminar Sessão"]})]})]})})]})},It=({children:l,currentView:S,onChangeView:u,title:g})=>e.jsxs("div",{className:"flex h-screen bg-[#020202] text-slate-50 font-sans overflow-hidden relative animate-in fade-in duration-700",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[e.jsx("div",{className:"absolute top-[-10%] right-[-5%] w-[600px] h-[600px] bg-amber-900/10 rounded-full blur-[120px] animate-pulse duration-[10000ms]"}),e.jsx("div",{className:"absolute bottom-[-10%] left-[-5%] w-[500px] h-[500px] bg-purple-900/10 rounded-full blur-[120px] animate-pulse duration-[8000ms]"})]}),e.jsx("div",{className:"relative z-50 h-full backdrop-blur-xl bg-[#080808]/90 border-r border-amber-500/5 flex-shrink-0",children:e.jsx(Et,{currentView:S,onChangeView:u})}),e.jsx("main",{className:"flex-1 overflow-auto relative z-10 custom-scrollbar flex flex-col",children:e.jsxs("div",{className:"max-w-[1600px] mx-auto w-full p-6 md:p-10",children:[e.jsxs("header",{className:"mb-10 flex flex-col md:flex-row md:items-end justify-between gap-6 border-b border-white/5 pb-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ue,{className:"w-4 h-4 text-amber-500"}),e.jsx("span",{className:"text-[10px] font-bold text-amber-500/70 uppercase tracking-[0.2em]",children:"SaaS Backoffice"})]}),e.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight",children:g})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"hidden xl:flex items-center gap-2 text-[10px] font-bold text-slate-500 bg-white/5 px-3 py-1.5 rounded-lg border border-white/5",children:[e.jsx(qe,{className:"w-3 h-3"}),e.jsx("span",{children:"CMD + K"})]}),e.jsxs("button",{className:"relative p-2.5 rounded-xl bg-white/5 border border-white/5 text-slate-400 hover:text-white transition-all",children:[e.jsx(We,{className:"w-5 h-5"}),e.jsx("span",{className:"absolute top-2.5 right-2.5 w-2 h-2 bg-amber-500 rounded-full shadow-[0_0_8px_#f59e0b]"})]}),e.jsxs("div",{className:"flex items-center gap-2 py-2 px-4 bg-emerald-500/5 border border-emerald-500/20 rounded-xl",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse shadow-[0_0_8px_#10b981]"}),e.jsx("span",{className:"text-[10px] font-bold text-emerald-500 uppercase tracking-wider",children:"Sistemas Operacionais"})]})]})]}),e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-500",children:l})]})})]}),Tt=({onViewLogs:l})=>{const[S,u]=r.useState([]),[g,v]=r.useState([]),[k,c]=r.useState([]),[h,n]=r.useState([]),[d,N]=r.useState([]),[m,C]=r.useState(null),[i,y]=r.useState(!0);return r.useEffect(()=>{const x=async()=>{try{const f=await Promise.allSettled([j.getStats(),j.getActivity(),j.getHealth(),j.getAlerts(),j.getBillingStats(),j.getRealtimeStats(),j.getEngagementMetrics(),j.getGrowthStats(),j.getUsageHistory(),j.getInfraStats()]),a=f[0].status==="fulfilled"?f[0].value:{total_users:0,total_collaborators:0,total_companies:0,active_credits:0,consumed_credits:0,top_plan:"---",total_audits:0},_=f[1].status==="fulfilled"?f[1].value:[],I=f[2].status==="fulfilled"?f[2].value:[],B=f[3].status==="fulfilled"?f[3].value:null,L=f[4].status==="fulfilled"?f[4].value:{mrr:0,pending_payments:0,credits_sold:0,consumed_credits:0},P=f[5].status==="fulfilled"?f[5].value:{online_now:0,active_sessions:0},V=f[6].status==="fulfilled"?f[6].value:{avg_session_minutes:0,total_sessions_today:0},G=f[7].status==="fulfilled"?f[7].value:[],s=f[8].status==="fulfilled"?f[8].value:[],p=f[9].status==="fulfilled"?f[9].value:{uptime_pct:"---",latency_ms:"---",server_load:"---",db_size:"---",db_connections:0};f.forEach((o,M)=>{o.status==="rejected"&&console.error(`Admin request ${M} failed:`,o.reason)}),u([{label:"Receita Mensal (MRR)",value:`Kz ${parseFloat(L.mrr||0).toLocaleString()}`,change:"+15%",icon:J,color:"emerald",subText:`${parseFloat(L.pending_payments||0).toLocaleString()} Kz pendentes`},{label:"Utilizadores Online",value:(P.online_now||0).toLocaleString(),change:(P.online_now||0)>5?"+Live":"Estável",icon:ce,color:"blue",subText:`${(P.active_sessions||0).toLocaleString()} sessões ativas`},{label:"Tempo Médio (Sessão)",value:`${V.avg_session_minutes||0} min`,change:"+4%",icon:z,color:"purple",subText:`${(V.total_sessions_today||0).toLocaleString()} hoje`},{label:"Créditos Pagos (Mês)",value:(L.credits_sold||0).toLocaleString(),change:"+8%",icon:D,color:"amber",subText:`${(L.consumed_credits||0).toLocaleString()} consumidos`},{label:"Total de Utilizadores",value:(a.total_users||0).toLocaleString(),change:"Crescente",icon:be,color:"blue",subText:`${(a.total_collaborators||0).toLocaleString()} colaboradores`},{label:"Total de Empresas",value:(a.total_companies||0).toLocaleString(),change:"Estável",icon:H,color:"emerald",subText:"Tenants Ativos"},{label:"Créditos em Carteira",value:(a.active_credits||0).toLocaleString(),change:"Disponível",icon:Me,color:"amber",subText:"Total Global"},{label:"Créditos Consumidos",value:(a.consumed_credits||0).toLocaleString(),change:"Uso total",icon:ee,color:"purple",subText:"Auditados"},{label:"Plano Dominante",value:a.top_plan||"---",change:"Popular",icon:he,color:"blue",subText:"Maioria dos Tenants"},{label:"Total de Auditorias",value:(a.total_audits||0).toLocaleString(),change:"Acumulado",icon:D,color:"purple",subText:"Processos IA"},{label:"Estabilidade Infra",value:p.uptime_pct||"---",change:p.latency_ms||"---",icon:Pe,color:"emerald",subText:`Carga CPU: ${p.server_load||"---"}`},{label:"Banco de Dados",value:p.db_size||"---",change:"Saudável",icon:re,color:"blue",subText:`${p.db_connections||0} conexões ativas`}]),v(_),c(I),C(B),n(G),N(s)}catch(f){console.error("Fatal error loading admin dashboard:",f)}finally{y(!1)}};x();const E=setInterval(x,3e4);return()=>clearInterval(E)},[]),i?e.jsx("div",{className:"flex h-[60vh] items-center justify-center",children:e.jsx(Y,{className:"w-10 h-10 text-amber-500 animate-spin"})}):e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:S.map((x,E)=>e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-3xl p-6 hover:border-amber-500/20 transition-all group relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-white/5 text-amber-500 group-hover:scale-110 transition-transform",children:e.jsx(x.icon,{className:"w-6 h-6"})}),e.jsxs("div",{className:`flex items-center gap-1 text-[10px] font-bold ${x.change.startsWith("+")?"text-emerald-500":x.change==="Estável"?"text-slate-500":"text-red-500"}`,children:[x.change,x.change.startsWith("+")?e.jsx(ge,{className:"w-3 h-3"}):x.change!=="Estável"&&e.jsx(st,{className:"w-3 h-3"})]})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-wider mb-1",children:x.label}),e.jsx("h3",{className:"text-3xl font-black text-white leading-none",children:x.value}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-3 font-semibold flex items-center gap-1.5 uppercase tracking-wide",children:[e.jsx(z,{className:"w-3 h-3 opacity-50"}),x.subText]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-white/5"}),e.jsx("div",{className:`absolute bottom-0 left-0 h-1 bg-${x.color==="emerald"?"emerald":x.color==="purple"?"purple":x.color==="blue"?"blue":"amber"}-500 w-1/3 opacity-30`})]},E))}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"xl:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-3xl p-6 shadow-2xl relative overflow-hidden group",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 relative z-10",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5 text-amber-500"}),"Crescimento da Plataforma"]}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-1",children:"Utilizadores e Empresas (Últimos 7 dias)"})]}),e.jsxs("button",{onClick:l,className:"px-4 py-2 bg-white/5 border border-white/10 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-white hover:bg-white/10 transition-all flex items-center gap-2",children:[e.jsx(z,{className:"w-3 h-3"}),"Ver Auditoria"]})]}),e.jsx("div",{className:"flex items-end justify-between gap-2 h-48 mb-4",children:h.map((x,E)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2 group/bar",children:[e.jsxs("div",{className:"w-full flex gap-1 items-end justify-center h-full",children:[e.jsx("div",{className:"w-2 md:w-4 bg-purple-500/40 rounded-t-sm group-hover/bar:bg-purple-500 transition-all",style:{height:`${Math.max(10,x.users_total/(Math.max(...h.map(f=>f.users_total))||1)*100)}%`}}),e.jsx("div",{className:"w-1 md:w-2 bg-amber-500/40 rounded-t-sm group-hover/bar:bg-amber-500 transition-all",style:{height:`${Math.max(5,x.companies_total/(Math.max(...h.map(f=>f.companies_total))||1)*100)}%`}})]}),e.jsx("span",{className:"text-[9px] font-bold text-slate-600 uppercase tabular-nums",children:new Date(x.date).toLocaleDateString("pt-AO",{weekday:"short"})})]},E))}),e.jsxs("div",{className:"flex items-center gap-6 pt-6 border-t border-white/5 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-purple-500"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-widest",children:"Utilizadores"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-amber-500"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-widest",children:"Empresas"})]})]})]}),e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-3xl p-6 shadow-2xl relative overflow-hidden group",children:[e.jsx("div",{className:"flex justify-between items-center mb-8 relative z-10",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-black text-white flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-purple-500"}),"Processamento Faturix AI"]}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-1",children:"Volume de Auditorias (Volume Semanal)"})]})}),e.jsx("div",{className:"flex items-end justify-between gap-1 h-32 mb-4",children:d.map((x,E)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2 group/bar",children:[e.jsx("div",{className:"w-full bg-gradient-to-t from-emerald-500/10 to-emerald-500/40 rounded-t-lg group-hover/bar:from-emerald-500/30 group-hover/bar:to-emerald-500 transition-all relative overflow-hidden",style:{height:`${Math.max(10,x.audits_count/(Math.max(...d.map(f=>f.audits_count))||1)*100)}%`},children:e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-white/20"})}),e.jsx("span",{className:"text-[9px] font-bold text-slate-600 uppercase tabular-nums",children:new Date(x.date).toLocaleDateString("pt-AO",{day:"2-digit",month:"short"})})]},E))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-3xl p-6 shadow-2xl shadow-black/20",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5 text-amber-500"}),"Estado dos Serviços"]}),e.jsx("div",{className:"space-y-4",children:k.map((x,E)=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-white/[0.02] border border-white/5 hover:border-amber-500/20 transition-all hover:translate-x-1 group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-white/5 group-hover:bg-white/10 transition-colors",children:x.name.includes("AI")?e.jsx(D,{className:`w-4 h-4 ${x.color}`}):x.name.includes("Aut")?e.jsx(te,{className:`w-4 h-4 ${x.color}`}):x.name.includes("DB")||x.name.includes("Dados")?e.jsx(re,{className:`w-4 h-4 ${x.color}`}):e.jsx(z,{className:`w-4 h-4 ${x.color}`})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-bold text-slate-300 tracking-wide",children:x.name}),e.jsx("span",{className:"text-[9px] text-slate-500 uppercase font-black",children:"LATENCY: 42MS"})]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${x.status==="ONLINE"?"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]":"bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.5)]"} mb-1`}),e.jsx("span",{className:`text-[9px] font-black uppercase tracking-wider ${x.color}`,children:x.status})]})]},E))})]}),m&&e.jsxs("div",{className:"bg-gradient-to-br from-amber-500/10 via-amber-500/[0.05] to-purple-500/10 border border-amber-500/20 rounded-3xl p-6 shadow-2xl shadow-amber-950/20 relative group overflow-hidden",children:[e.jsx("div",{className:"absolute -right-8 -bottom-8 w-32 h-32 bg-amber-500/10 rounded-full blur-3xl group-hover:scale-125 transition-transform duration-700"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4 relative z-10",children:[e.jsx("div",{className:"p-2 bg-amber-500/20 rounded-xl",children:e.jsx(fe,{className:"w-5 h-5 text-amber-400"})}),e.jsx("h3",{className:"text-xs font-bold text-white uppercase tracking-[0.2em]",children:"Alerta de Governança"})]}),e.jsx("p",{className:"text-xs text-slate-400 leading-relaxed mb-6 font-medium relative z-10",children:m.message}),e.jsx("button",{className:"w-full py-4 bg-amber-500 hover:bg-amber-400 text-black text-[10px] font-black uppercase tracking-[0.2em] rounded-2xl transition-all shadow-xl shadow-amber-500/20 hover:shadow-amber-500/40 hover:-translate-y-0.5 active:translate-y-0 relative z-10",children:"Revisar Pendências"})]})]})]})]})},Dt=()=>{const[l,S]=r.useState(""),[u,g]=r.useState([]),[v,k]=r.useState(!0),[c,h]=r.useState(null),n=async()=>{try{const i=await j.getCompanies();g(i)}catch(i){console.error("Error loading companies:",i)}finally{k(!1)}};De.useEffect(()=>{n()},[]);const d=async(i,y)=>{try{await j.updateCompany(i,{creditsAdjustment:y}),n()}catch(x){console.error("Error adjusting credits:",x)}},N=async(i,y)=>{try{const x=y==="ACTIVE"?"SUSPENDED":"ACTIVE";await j.updateCompany(i,{status:x}),n()}catch(x){console.error("Error toggling status:",x)}},m=i=>{const y={ENTERPRISE:"bg-purple-500/10 text-purple-400 border-purple-500/20",PRO:"bg-amber-500/10 text-amber-400 border-amber-500/20",FREE:"bg-slate-500/10 text-slate-400 border-slate-500/20"};return e.jsx("span",{className:`text-[10px] font-black px-2 py-0.5 rounded border ${y[i]||y.FREE}`,children:i})},C=[{label:"Total de Empresas",value:u.length,icon:H,color:"blue",change:"Estável",subText:"Ecossistema Kwikdocs"},{label:"Empresas Ativas",value:u.filter(i=>i.status==="ACTIVE").length,icon:te,color:"emerald",change:`+${u.filter(i=>i.status==="ACTIVE").length}`,subText:"Operação Normal"},{label:"Empresas Suspensas",value:u.filter(i=>i.status!=="ACTIVE").length,icon:Z,color:"red",change:u.filter(i=>i.status!=="ACTIVE").length>0?`-${u.filter(i=>i.status!=="ACTIVE").length}`:"0",subText:"Requer Atenção"},{label:"Saldo Global Créditos",value:u.reduce((i,y)=>i+(y.credits||0),0).toLocaleString(),icon:D,color:"amber",change:"Live",subText:"Créditos Circulantes"}];return e.jsxs("div",{className:"space-y-6 relative pb-20",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:C.map((i,y)=>e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-3xl p-6 hover:border-amber-500/20 transition-all group relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[e.jsx("div",{className:`p-3 rounded-2xl bg-white/5 text-${i.color==="emerald"?"emerald":i.color==="red"?"red":i.color==="blue"?"blue":"amber"}-500 group-hover:scale-110 transition-transform`,children:e.jsx(i.icon,{className:"w-6 h-6"})}),e.jsxs("div",{className:`flex items-center gap-1 text-[10px] font-bold ${i.color==="emerald"?"text-emerald-500":i.color==="red"?"text-red-500":"text-slate-500"}`,children:[i.change,i.color==="emerald"&&e.jsx(ge,{className:"w-3 h-3"})]})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-wider mb-1",children:i.label}),e.jsx("h3",{className:"text-3xl font-black text-white leading-none",children:i.value}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-3 font-semibold flex items-center gap-1.5 uppercase tracking-wide",children:[e.jsx(z,{className:"w-3 h-3 opacity-50"}),i.subText]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-white/5"}),e.jsx("div",{className:`absolute bottom-0 left-0 h-1 bg-${i.color==="emerald"?"emerald":i.color==="red"?"red":i.color==="blue"?"blue":"amber"}-500 w-1/3 opacity-30`})]},y))}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 bg-white/5 border border-white/5 p-4 rounded-3xl",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(pe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),e.jsx("input",{type:"text",placeholder:"Procurar por nome, NIF ou ID...",className:"w-full bg-black/40 border border-white/5 rounded-xl py-2 pl-10 pr-4 text-sm text-white placeholder-slate-600 focus:border-amber-500/50 outline-none transition-all",value:l,onChange:i=>S(i.target.value)})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white/5 border border-white/5 rounded-xl text-xs font-bold text-slate-400 hover:text-white transition-all",children:[e.jsx(_e,{className:"w-4 h-4"}),"Filtros"]})]}),e.jsxs("button",{className:"flex items-center gap-2 px-6 py-2 bg-amber-500 hover:bg-amber-400 text-black text-xs font-black uppercase tracking-widest rounded-xl transition-all shadow-lg shadow-amber-500/20",children:[e.jsx(Q,{className:"w-4 h-4"}),"Novo Tenant"]})]}),e.jsx("div",{className:"bg-white/5 border border-white/5 rounded-3xl overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest border-b border-white/5 bg-white/[0.02]",children:[e.jsx("th",{className:"px-6 py-4",children:"Empresa / NIF"}),e.jsx("th",{className:"px-6 py-4",children:"Plano Atual"}),e.jsx("th",{className:"px-6 py-4",children:"Saldo de Créditos"}),e.jsx("th",{className:"px-6 py-4",children:"Estado"}),e.jsx("th",{className:"px-6 py-4",children:"Última Atividade"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:u.map(i=>e.jsxs("tr",{className:"hover:bg-white/[0.02] transition-colors group",children:[e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-slate-800 to-slate-900 border border-white/5 flex items-center justify-center group-hover:border-amber-500/30 transition-all",children:e.jsx(H,{className:"w-5 h-5 text-amber-500"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-bold text-white flex items-center gap-1.5",children:[i.name,i.credits>5e3&&e.jsx(Ce,{className:"w-3.5 h-3.5 text-amber-500"})]}),e.jsx("div",{className:"text-[10px] text-slate-500 font-mono tracking-wider uppercase",children:i.nif})]})]})}),e.jsx("td",{className:"px-6 py-5",children:m(i.plan)}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:`w-3.5 h-3.5 ${i.credits<100?"text-red-500":"text-amber-500"}`}),e.jsx("span",{className:"text-sm font-bold text-slate-200",children:i.credits.toLocaleString()})]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${i.status==="ACTIVE"?"bg-emerald-500":"bg-red-500"}`}),e.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${i.status==="ACTIVE"?"text-emerald-500":"text-red-500"}`,children:i.status==="ACTIVE"?"Ativo":"Suspenso"})]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[e.jsx(Oe,{className:"w-3.5 h-3.5 opacity-50"}),i.lastActive]})}),e.jsx("td",{className:"px-6 py-5 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>d(i.id,100),className:"p-2 hover:bg-white/5 rounded-lg text-amber-500 hover:scale-110 transition-all",title:"Adicionar +100 Créditos",children:e.jsx(D,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>N(i.id,i.status),className:`p-2 hover:bg-white/5 rounded-lg ${i.status==="ACTIVE"?"text-red-500 hover:text-red-400":"text-emerald-500 hover:text-emerald-400"} transition-all`,title:i.status==="ACTIVE"?"Suspender":"Reativar",children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>h(i),className:"p-2 hover:bg-white/5 rounded-lg text-slate-500 hover:text-white transition-all",title:"Ver Detalhes",children:e.jsx(je,{className:"w-4 h-4"})})]})})]},i.id))})]})})}),c&&e.jsxs("div",{className:"fixed inset-y-0 right-0 w-96 bg-[#0a0a0a] border-l border-white/5 shadow-2xl z-50 animate-in slide-in-from-right duration-300 p-8 flex flex-col gap-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-black text-white",children:"Detalhes Empresa"}),e.jsx("button",{onClick:()=>h(null),className:"text-slate-500 hover:text-white",children:"Fecha"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/5",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-2",children:"Informação Base"}),e.jsx("h4",{className:"text-lg font-bold text-white mb-1",children:c.name}),e.jsx("p",{className:"text-xs text-slate-400 font-mono",children:c.nif})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/5",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1",children:"Colaboradores"}),e.jsx("h4",{className:"text-xl font-black text-white",children:c.user_count})]}),e.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/5",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1",children:"Plano Atual"}),e.jsx("h4",{className:"text-sm font-black text-amber-500 uppercase",children:c.plan_name||"FREE"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-2",children:"Ações Administrativas"}),e.jsxs("button",{className:"w-full py-3 bg-white/5 border border-white/5 rounded-xl text-xs font-bold text-white hover:bg-white/10 transition-all flex items-center justify-center gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-amber-500"})," Transferência de Créditos"]}),e.jsxs("button",{className:"w-full py-3 bg-white/5 border border-white/5 rounded-xl text-xs font-bold text-white hover:bg-white/10 transition-all flex items-center justify-center gap-2",children:[e.jsx(Ce,{className:"w-4 h-4 text-purple-500"})," Upgrade de Plano"]}),e.jsx("button",{className:"w-full py-3 bg-red-500/10 border border-red-500/20 rounded-xl text-xs font-bold text-red-500 hover:bg-red-500/20 transition-all flex items-center justify-center gap-2",children:"Terminar Contrato (Delete)"})]})]})]})]})},Lt=()=>{var V,G;const[l,S]=r.useState(""),[u,g]=r.useState([]),[v,k]=r.useState(!0),[c,h]=r.useState(!1),[n,d]=r.useState(null),[N,m]=r.useState([]),[C,i]=r.useState([]),y=async()=>{try{k(!0);const s=await j.getUsers();g(s)}catch(s){console.error("Error loading users:",s)}finally{k(!1)}};r.useEffect(()=>{y()},[]);const x=async s=>{s.preventDefault();const p=new FormData(s.target),o=parseInt(p.get("limit"));try{await j.setUserLimit(n.id,o),h(!1),y()}catch{alert("Erro ao atualizar limite")}},E=async(s,p)=>{try{await j.updateUserStatus(s,!p),y()}catch(o){console.error("Error toggling user status:",o)}},f=async s=>{if(confirm(`Deseja enviar link de recuperação de senha para ${s}?`))try{alert("Link de recuperação enviado com sucesso.")}catch(p){console.error("Error resetting password:",p)}},a=async s=>{if(confirm("Aviso: Ao impersonar, entrará na sessão deste utilizador. Deseja continuar?"))try{const p=await j.impersonateUser(s);p.success&&alert(`Em modo de impersonação como: ${p.user.name}. A redirecionar...`)}catch(p){console.error("Impersonate error:",p)}},_=async s=>{if(N.length)try{if(s==="activate"&&await j.bulkUpdateUsers(N,{is_active:!0}),s==="suspend"&&await j.bulkUpdateUsers(N,{is_active:!1}),s==="credits"){const p=prompt("Deseja adicionar quantos créditos a cada selecionado?");p&&await j.bulkUpdateUsers(N,{creditsAdjustment:parseInt(p)})}m([]),y()}catch(p){console.error("Bulk action error:",p)}},I=async(s,p)=>{try{await j.updateUserRole(s,p),y(),(n==null?void 0:n.id)===s&&d({...n,role:p})}catch(o){console.error("Role change error:",o)}};r.useEffect(()=>{n?j.getUserActivity(n.id).then(i).catch(console.error):i([])},[n]);const B=s=>{const p={SUPER_ADMIN:"text-amber-400 bg-amber-500/10 border-amber-500/20",ACCOUNTANT:"text-purple-400 bg-purple-500/10 border-purple-500/20",CLIENT_ADMIN:"text-blue-400 bg-blue-500/10 border-blue-500/20",OPERATOR:"text-slate-400 bg-white/5 border-white/10"};return e.jsx("span",{className:`text-[9px] font-black px-2 py-0.5 rounded border uppercase tracking-tighter ${p[s]||p.OPERATOR}`,children:(s==null?void 0:s.replace("_"," "))||"USER"})},L=u.filter(s=>{var p,o,M;return((p=s.name)==null?void 0:p.toLowerCase().includes(l.toLowerCase()))||((o=s.email)==null?void 0:o.toLowerCase().includes(l.toLowerCase()))||((M=s.company_name)==null?void 0:M.toLowerCase().includes(l.toLowerCase()))}),P=[{label:"Total Utilizadores",value:u.length,icon:pt,color:"purple",change:"Live",subText:"Registados no sistema"},{label:"Utilizadores Online",value:u.filter(s=>Date.now()-new Date(s.last_seen_at).getTime()<300*1e3).length,icon:z,color:"emerald",change:`+${u.filter(s=>Date.now()-new Date(s.last_seen_at).getTime()<300*1e3).length}`,subText:"Ativos agora"},{label:"Acesso Mobile",value:u.filter(s=>{var p;return(p=s.last_user_agent)==null?void 0:p.toLowerCase().includes("mobile")}).length,icon:tt,color:"blue",change:"Estável",subText:"Dispositivos móveis"},{label:"Consumo Global",value:u.reduce((s,p)=>s+(p.current_month_consumption||0),0),icon:D,color:"amber",change:"Mês Atual",subText:"Créditos utilizados"}];return v&&!u.length?e.jsx("div",{className:"flex h-[60vh] items-center justify-center",children:e.jsx(Y,{className:"w-10 h-10 text-purple-500 animate-spin"})}):e.jsxs("div",{className:"space-y-6 relative pb-20",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:P.map((s,p)=>e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-3xl p-6 hover:border-purple-500/20 transition-all group relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[e.jsx("div",{className:`p-3 rounded-2xl bg-white/5 text-${s.color==="emerald"?"emerald":s.color==="blue"?"blue":s.color==="amber"?"amber":"purple"}-500 group-hover:scale-110 transition-transform`,children:e.jsx(s.icon,{className:"w-6 h-6"})}),e.jsxs("div",{className:`flex items-center gap-1 text-[10px] font-bold ${s.color==="emerald"?"text-emerald-500":"text-slate-500"}`,children:[s.change,s.color==="emerald"&&e.jsx(ge,{className:"w-3 h-3"})]})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-wider mb-1",children:s.label}),e.jsx("h3",{className:"text-3xl font-black text-white leading-none",children:s.value}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-3 font-semibold flex items-center gap-1.5 uppercase tracking-wide",children:[e.jsx(z,{className:"w-3 h-3 opacity-50"}),s.subText]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-white/5"}),e.jsx("div",{className:`absolute bottom-0 left-0 h-1 bg-${s.color==="emerald"?"emerald":s.color==="blue"?"blue":s.color==="amber"?"amber":"purple"}-500 w-1/3 opacity-30`})]},p))}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 bg-white/5 border border-white/5 p-4 rounded-3xl",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(pe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),e.jsx("input",{type:"text",placeholder:"Nome, e-mail ou empresa...",className:"w-full bg-black/40 border border-white/5 rounded-xl py-2.5 pl-10 pr-4 text-sm text-white placeholder-slate-600 focus:border-purple-500/50 outline-none transition-all",value:l,onChange:s=>S(s.target.value)})]}),N.length>0?e.jsxs("div",{className:"flex items-center gap-2 animate-in slide-in-from-left duration-300",children:[e.jsxs("span",{className:"text-[10px] font-black text-purple-500 bg-purple-500/10 px-3 py-2 rounded-xl border border-purple-500/20 uppercase tracking-widest leading-none",children:[N.length," Selecionados"]}),e.jsx("div",{className:"h-8 w-px bg-white/10 mx-1"}),e.jsx("button",{onClick:()=>_("activate"),className:"p-2.5 bg-white/5 hover:bg-emerald-500/20 text-emerald-500 rounded-xl transition-all",title:"Ativar Selecionados",children:e.jsx(de,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_("suspend"),className:"p-2.5 bg-white/5 hover:bg-red-500/20 text-red-500 rounded-xl transition-all",title:"Suspender Selecionados",children:e.jsx(X,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_("credits"),className:"p-2.5 bg-white/5 hover:bg-amber-500/20 text-amber-500 rounded-xl transition-all",title:"Add Créditos Em Massa",children:e.jsx(D,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>m([]),className:"p-2.5 text-slate-500 hover:text-white transition-all text-[10px] font-black uppercase tracking-widest",children:"Cancelar"})]}):e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2.5 bg-white/5 border border-white/5 rounded-xl text-xs font-bold text-slate-400 hover:text-white transition-all shadow-sm",children:[e.jsx(_e,{className:"w-4 h-4"}),"Avançado"]})]}),e.jsxs("button",{className:"flex items-center gap-2 px-6 py-2.5 bg-purple-600 hover:bg-purple-500 text-white text-xs font-black uppercase tracking-widest rounded-xl transition-all shadow-lg shadow-purple-600/20 active:scale-95",children:[e.jsx(at,{className:"w-4 h-4"}),"Novo Convite"]})]}),e.jsx("div",{className:"bg-white/5 border border-white/5 rounded-3xl overflow-hidden shadow-2xl shadow-black/20",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest border-b border-white/5 bg-white/[0.02]",children:[e.jsx("th",{className:"px-6 py-4 w-10",children:e.jsx("input",{type:"checkbox",checked:N.length===L.length&&L.length>0,onChange:s=>{s.target.checked?m(L.map(p=>p.id)):m([])},className:"w-4 h-4 rounded border-white/10 bg-white/5 text-purple-600 focus:ring-purple-500"})}),e.jsx("th",{className:"px-6 py-4",children:"Utilizador"}),e.jsx("th",{className:"px-6 py-4",children:"Papel"}),e.jsx("th",{className:"px-6 py-4",children:"Empresa (Tenant)"}),e.jsx("th",{className:"px-6 py-4",children:"Créditos / Consumo"}),e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4",children:"Última Atividade"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:L.map(s=>{var U,K;const p=s.last_seen_at?new Date(s.last_seen_at).getTime():0,o=Date.now()-p<300*1e3,M=T=>{if(!T)return"Nunca";const O=Math.floor((Date.now()-new Date(T).getTime())/1e3);if(O<60)return"Agora mesmo";const R=Math.floor(O/60);if(R<60)return`Há ${R} min`;const W=Math.floor(R/60);return W<24?`Há ${W} horas`:new Date(T).toLocaleDateString("pt-AO")};return e.jsxs("tr",{className:`hover:bg-white/[0.02] transition-all group ${N.includes(s.id)?"bg-purple-500/5":""}`,children:[e.jsx("td",{className:"px-6 py-5",children:e.jsx("input",{type:"checkbox",checked:N.includes(s.id),onChange:T=>{T.target.checked?m([...N,s.id]):m(N.filter(O=>O!==s.id))},className:"w-4 h-4 rounded border-white/10 bg-white/5 text-purple-600 focus:ring-purple-500"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500/10 to-blue-500/10 border border-white/5 flex items-center justify-center text-slate-300 font-black group-hover:border-purple-500/40 transition-all text-sm",children:((U=s.name)==null?void 0:U.charAt(0))||"U"}),o&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3.5 h-3.5 bg-emerald-500 border-2 border-[#0c0c0c] rounded-full shadow-[0_0_8px_rgba(16,185,129,0.5)]"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-white leading-tight",children:s.name}),e.jsxs("div",{className:"text-[10px] text-slate-500 flex items-center gap-1 mt-0.5 font-medium",children:[e.jsx(rt,{className:"w-3 h-3"}),s.email]})]})]})}),e.jsx("td",{className:"px-6 py-5",children:B(s.role)}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-slate-200",children:[e.jsx(H,{className:"w-3.5 h-3.5 text-slate-500"}),s.company_name||"Individual"]}),e.jsxs("span",{className:"text-[9px] text-slate-500 font-bold ml-5 uppercase",children:["ID: ",(K=s.company_id)==null?void 0:K.substring(0,8)]})]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between items-center text-[10px] font-bold",children:[e.jsxs("span",{className:"text-slate-400",children:["LIMITE: ",s.monthly_credit_limit||"∞"]}),e.jsxs("span",{className:`${(s.current_month_consumption||0)>(s.monthly_credit_limit||1/0)?"text-red-500":"text-emerald-500"}`,children:[s.current_month_consumption||0," CONSUMIDO"]})]}),e.jsx("div",{className:"w-24 h-1 bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-purple-500 transition-all duration-700",style:{width:`${Math.min((s.current_month_consumption||0)/(s.monthly_credit_limit||100)*100,100)}%`}})})]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${s.is_active!==!1?"bg-emerald-500":"bg-red-500"}`}),e.jsx("span",{className:`text-[10px] font-black uppercase tracking-wider ${s.is_active!==!1?"text-emerald-500":"text-red-500"}`,children:s.is_active!==!1?"Ativo":"Inativo"})]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`text-[10px] font-black uppercase tracking-wider ${o?"text-emerald-500 animate-pulse":"text-slate-500"}`,children:o?"Online":"Offline"}),e.jsx("span",{className:"text-[9px] text-slate-600 font-bold mt-0.5",children:M(s.last_seen_at)})]})}),e.jsx("td",{className:"px-6 py-5 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>{d(s),h(!0)},className:"p-2 hover:bg-white/5 rounded-lg text-amber-500 hover:scale-110 transition-all",title:"Gerir Créditos",children:e.jsx(D,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>E(s.id,s.is_active!==!1),className:`p-2 hover:bg-white/5 rounded-lg ${s.is_active!==!1?"text-red-500 hover:text-red-400":"text-emerald-500 hover:text-emerald-400"} transition-all`,title:s.is_active!==!1?"Suspender Conta":"Reativar Conta",children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>d(s),className:"p-2 hover:bg-white/5 rounded-lg text-slate-500 hover:text-white transition-all",title:"Ver Perfil Detalhado",children:e.jsx(je,{className:"w-4 h-4"})})]})})]},s.id)})})]})})}),n&&!c&&e.jsxs("div",{className:"fixed inset-y-0 right-0 w-96 bg-[#0a0a0a] border-l border-white/5 shadow-2xl z-50 animate-in slide-in-from-right duration-300 p-8 flex flex-col gap-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-black text-white",children:"Perfil do Utilizador"}),e.jsx("button",{onClick:()=>d(null),className:"text-slate-500 hover:text-white",children:"Fecha"})]}),e.jsxs("div",{className:"space-y-6 overflow-y-auto pr-2 custom-scrollbar",children:[e.jsxs("div",{className:"flex flex-col items-center text-center p-6 bg-white/5 rounded-[2rem] border border-white/5 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-500 to-blue-500 opacity-50"}),e.jsx("div",{className:"w-20 h-20 rounded-3xl bg-white/5 flex items-center justify-center text-3xl font-black text-white mb-4 border border-white/10 shadow-2xl",children:(V=n.name)==null?void 0:V.charAt(0)}),e.jsx("h4",{className:"text-lg font-bold text-white mb-1",children:n.name}),e.jsx("p",{className:"text-xs text-slate-500 mb-4",children:n.email}),B(n.role)]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/5",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1",children:"Empresa"}),e.jsx("h4",{className:"text-xs font-bold text-white truncate",children:n.company_name||"Individual"})]}),e.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/5",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1",children:"Último Login"}),e.jsx("h4",{className:"text-xs font-bold text-slate-300",children:n.last_login?new Date(n.last_login).toLocaleDateString():"Nunca"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-2 px-1 flex items-center justify-between",children:["Auditoria de Atividade",e.jsx("span",{className:"text-slate-600 lowercase font-normal italic",children:"Últimas 10 ações"})]}),e.jsx("div",{className:"space-y-3",children:C.length>0?C.map((s,p)=>e.jsxs("div",{className:"flex gap-3 animate-in fade-in duration-500",style:{animationDelay:`${p*100}ms`},children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-white/5 border border-white/10 flex items-center justify-center",children:e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-purple-500"})}),p<C.length-1&&e.jsx("div",{className:"w-px flex-1 bg-white/5 my-1"})]}),e.jsxs("div",{className:"flex-1 pb-4",children:[e.jsx("h5",{className:"text-[11px] font-bold text-white uppercase tracking-tight leading-none",children:s.title.replace("_"," ")}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:new Date(s.time).toLocaleString()})]})]},p)):e.jsxs("div",{className:"p-8 text-center bg-white/[0.02] rounded-3xl border border-dashed border-white/5",children:[e.jsx(it,{className:"w-8 h-8 text-slate-700 mx-auto mb-2 opacity-20"}),e.jsx("p",{className:"text-[10px] font-bold text-slate-600 uppercase",children:"Sem registos recentes"})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-2 px-1",children:"Segurança & Controlo"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>a(n.id),className:"p-4 bg-emerald-500/10 border border-emerald-500/20 rounded-2xl text-[10px] font-black text-emerald-500 hover:bg-emerald-500/20 transition-all flex flex-col items-center gap-2",children:[e.jsx(wt,{className:"w-5 h-5"})," Impersonate"]}),e.jsxs("button",{onClick:()=>f(n.email),className:"p-4 bg-white/5 border border-white/5 rounded-2xl text-[10px] font-black text-white hover:bg-white/10 transition-all flex flex-col items-center gap-2",children:[e.jsx(ot,{className:"w-5 h-5 text-amber-500"})," Reset Password"]})]}),e.jsxs("div",{className:"p-4 bg-white/5 border border-white/5 rounded-2xl space-y-3",children:[e.jsxs("p",{className:"text-[9px] font-bold text-slate-600 uppercase tracking-widest flex items-center gap-1",children:[e.jsx(ue,{className:"w-3 h-3"})," Alterar Cargo Operacional"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["OPERATOR","CLIENT_ADMIN","ACCOUNTANT","SUPER_ADMIN"].map(s=>e.jsx("button",{onClick:()=>I(n.id,s),className:`py-2 rounded-lg text-[9px] font-black border transition-all ${n.role===s?"bg-purple-600 border-purple-500 text-white":"bg-white/5 border-white/5 text-slate-500 hover:text-white"}`,children:s.replace("_"," ")},s))})]}),e.jsxs("button",{onClick:()=>{h(!0)},className:"w-full py-3.5 bg-white/5 border border-white/5 rounded-2xl text-xs font-bold text-white hover:bg-white/10 transition-all flex items-center justify-center gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-purple-500"})," Ajustar Limites de Crédito"]}),e.jsxs("button",{className:"w-full py-3.5 bg-red-500/10 border border-red-500/20 rounded-2xl text-xs font-bold text-red-500 hover:bg-red-500/20 transition-all flex items-center justify-center gap-2",children:[e.jsx(Te,{className:"w-4 h-4"})," Forçar Terminar Sessão"]})]}),e.jsxs("div",{className:"p-4 bg-white/[0.02] rounded-2xl border border-white/5 space-y-3",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest",children:"Informação Técnica"}),e.jsxs("div",{className:"flex justify-between items-center text-[10px] font-medium",children:[e.jsx("span",{className:"text-slate-500",children:"ID INTERNO:"}),e.jsxs("span",{className:"font-mono text-slate-400",children:[(G=n.id)==null?void 0:G.substring(0,16),"..."]})]}),e.jsxs("div",{className:"flex justify-between items-center text-[10px] font-medium",children:[e.jsx("span",{className:"text-slate-500",children:"DEVICE:"}),e.jsx("span",{className:"text-slate-400 truncate max-w-[150px]",children:n.last_user_agent||"Desconhecido"})]})]})]})]}),c&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in zoom-in duration-300",children:e.jsxs("div",{className:"bg-[#0c0c0c] border border-white/10 w-full max-w-sm rounded-[2rem] p-8 relative shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-purple-500/5 rounded-full blur-3xl -mr-16 -mt-16"}),e.jsxs("div",{className:"flex items-center gap-4 mb-6 relative z-10",children:[e.jsx("div",{className:"p-3 bg-purple-500/20 rounded-2xl",children:e.jsx(D,{className:"w-6 h-6 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-wider",children:"Limite de Crédito"}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase",children:n==null?void 0:n.name})]})]}),e.jsxs("form",{onSubmit:x,className:"space-y-6 relative z-10",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase px-1",children:"Limite Mensal (Créditos)"}),e.jsx("input",{name:"limit",type:"number",defaultValue:(n==null?void 0:n.monthly_credit_limit)||100,required:!0,className:"w-full bg-white/5 border border-white/10 rounded-[1.25rem] px-5 py-4 text-white text-sm outline-none focus:border-purple-500/50 transition-all",placeholder:"Ex: 500"}),e.jsx("p",{className:"text-[9px] text-slate-600 italic px-1",children:"Se definido como zero ou vazio, o sistema usará o padrão do plano."})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>h(!1),className:"flex-1 py-4 bg-white/5 border border-white/10 text-white text-[10px] font-black uppercase tracking-[0.2em] rounded-2xl hover:bg-white/10 transition-all",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 py-4 bg-purple-600 text-white text-[10px] font-black uppercase tracking-[0.2em] rounded-2xl hover:bg-purple-500 transition-all shadow-xl shadow-purple-600/20",children:"Atualizar"})]})]})]})})]})},Mt=()=>{const[l,S]=r.useState("overview"),[u,g]=r.useState([]),[v,k]=r.useState([]),[c,h]=r.useState([]),[n,d]=r.useState([]),[N,m]=r.useState([]),[C,i]=r.useState([]),[y,x]=r.useState([]),[E,f]=r.useState([]),[a,_]=r.useState(null),[I,B]=r.useState(!0),[L,P]=r.useState(!1),[V,G]=r.useState(!1),[s,p]=r.useState(!1),[o,M]=r.useState(null),[U,K]=r.useState(""),[T,O]=r.useState([]),R=async()=>{try{B(!0);const t=async(Be,Ve)=>{try{return await Be}catch(Ge){return console.warn("Silent failure on dashboard component:",Ge),Ve}},[w,b,A,q,ie,$e,ze,Ue,Fe]=await Promise.all([t(j.getBillingStats(),{mrr:0,pending_payments:0,pending_count:0,processed_count:0,active_users:0,consumed_credits:0}),t(j.getTransactions(10),[]),t(j.getPlans(),[]),t(j.getAllPlans(),[]),t(j.getCreditPackages(),[]),t(j.getOperationalCosts(),[]),t(j.getCompanyProfitability(),[]),t(j.getSettings(),[]),t(j.getBillingInsights(),{growth:0,message:"Dados indisponíveis"})]);g([{label:"Receita Mensal (MRR)",value:`Kz ${parseFloat(w.mrr||0).toLocaleString()}`,change:"+15%",icon:J,color:"emerald"},{label:"Depósitos Pendentes",value:`Kz ${parseFloat(w.pending_payments||0).toLocaleString()}`,change:`${w.pending_count||0} Qtd`,icon:ee,color:"amber"},{label:"Pagamentos Processados",value:`${w.processed_count||0} Qtd`,change:"Total",icon:de,color:"blue"},{label:"Utilizadores Ativos",value:(w.active_users||0).toString(),change:"+12%",icon:be,color:"purple"},{label:"Créditos Analisados",value:(w.consumed_credits||0).toLocaleString(),change:"+8%",icon:D,color:"blue"}]),k(b),h(A),d(q),m(ie),i($e),x(ze),f(Ue),_(Fe)}catch(t){console.error("Critical Error loading billing dashboard:",t)}finally{B(!1)}};r.useEffect(()=>{R();const t=setInterval(R,6e4);return()=>clearInterval(t)},[]);const W=async t=>{t.preventDefault();const w=new FormData(t.target),b={name:w.get("name"),slug:w.get("slug")||w.get("name").toUpperCase().replace(/\s+/g,"_"),description:w.get("description"),price_kz:parseFloat(w.get("price_kz")||"0"),monthly_credits:parseInt(w.get("monthly_credits")||"0"),max_users:parseInt(w.get("max_users")||"1"),max_documents:parseInt(w.get("max_documents")||"200"),cost_per_analysis:parseFloat(w.get("cost_per_analysis")||"1"),analysis_speed:w.get("analysis_speed"),analysis_time_seconds:parseInt(w.get("analysis_time_seconds")||"60"),gpu_specs:w.get("gpu_specs"),ram_gb:parseInt(w.get("ram_gb")||"4"),color:w.get("color"),is_visible:w.get("is_visible")==="true",welcome_credits:parseFloat(w.get("welcome_credits")||"0"),features:typeof(o==null?void 0:o.features)=="string"?JSON.parse(o.features):(o==null?void 0:o.features)||[]};try{o?await j.updatePlan(o.id,{...b,features:T}):await j.createPlan({...b,features:T}),P(!1),M(null),O([]),R()}catch{alert("Erro ao salvar plano")}},se=async(t,w)=>{try{await j.updateSetting(t,w,"Configuração do sistema"),R()}catch{alert("Erro ao atualizar configuração")}};return I&&!u.length?e.jsx("div",{className:"flex h-[60vh] items-center justify-center",children:e.jsx(Y,{className:"w-10 h-10 text-emerald-500 animate-spin"})}):e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[e.jsx("div",{className:"flex items-center gap-1 p-1 bg-white/5 border border-white/5 rounded-2xl w-fit overflow-x-auto",children:[{id:"overview",label:"Visão Geral",icon:Le},{id:"plans",label:"Servidores",icon:he},{id:"packages",label:"Pacotes",icon:Ie},{id:"costs",label:"Custos",icon:J},{id:"profitability",label:"Rentabilidade",icon:Ae},{id:"settings",label:"Definições",icon:le}].map(t=>e.jsxs("button",{onClick:()=>S(t.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl text-xs font-bold transition-all whitespace-nowrap ${l===t.id?"bg-emerald-500 text-black shadow-lg shadow-emerald-500/20":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(t.icon,{className:"w-4 h-4"}),t.label]},t.id))}),l==="overview"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:u.map((t,w)=>e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-3xl p-5 group hover:border-emerald-500/20 transition-all flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:`p-2.5 rounded-2xl bg-${t.color}-500/10 text-${t.color}-500 group-hover:scale-110 transition-transform`,children:e.jsx(t.icon,{className:"w-5 h-5"})}),e.jsx("div",{className:`flex items-center gap-1 text-[9px] font-black px-2 py-0.5 rounded-full bg-white/5 ${t.change.startsWith("+")?"text-emerald-500":"text-amber-500"}`,children:t.change})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 text-[10px] font-black uppercase tracking-widest mb-1.5 opacity-60",children:t.label}),e.jsx("h3",{className:"text-xl font-black text-white leading-tight truncate",children:t.value})]})]},w))}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"xl:col-span-2 bg-white/5 border border-white/5 rounded-3xl overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"p-6 border-b border-white/5 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5 text-emerald-500"}),"Fluxo de Caixa & Transações"]}),e.jsx("button",{className:"p-2 bg-white/5 rounded-lg text-slate-400 hover:text-white transition-colors",children:e.jsx(we,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest border-b border-white/5 bg-white/[0.02]",children:[e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4",children:"Empresa"}),e.jsx("th",{className:"px-6 py-4",children:"Tipo"}),e.jsx("th",{className:"px-6 py-4",children:"Valor"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Data"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:v.map(t=>e.jsxs("tr",{className:"hover:bg-white/[0.02] transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-[9px] font-black px-2 py-1 rounded-lg ${t.status==="COMPLETED"?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":"bg-amber-500/10 text-amber-400 border border-amber-500/20"}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm font-bold text-slate-200",children:t.company})}),e.jsx("td",{className:"px-6 py-4 text-[10px] font-medium text-slate-300",children:t.type==="TOPUP"?e.jsx("span",{className:"text-blue-400",children:"RECARGA"}):e.jsx("span",{className:"text-purple-400",children:"PLANO"})}),e.jsx("td",{className:"px-6 py-4 text-sm font-black text-white",children:t.value}),e.jsx("td",{className:"px-6 py-4 text-right text-[11px] text-slate-500 font-mono tracking-tighter",children:new Date(t.date).toLocaleDateString("pt-AO")})]},t.id))})]})})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-3xl p-6 shadow-2xl",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(Ne,{className:"w-5 h-5 text-purple-500"}),"Penetração de Planos"]}),e.jsx("div",{className:"space-y-6",children:c.map((t,w)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("span",{className:"text-[11px] font-bold text-slate-300 uppercase tracking-widest",children:t.name}),e.jsx("span",{className:"text-[10px] font-bold text-slate-500",children:t.count})]}),e.jsx("div",{className:"h-1.5 bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${t.color} rounded-full transition-all duration-1000 shadow-[0_0_100px_rgba(0,0,0,0.5)]`,style:{width:`${t.percentage}%`}})})]},w))})]})})]})]}),l==="plans"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-3xl p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Catálogo de Servidores Disponíveis"}),e.jsxs("button",{onClick:()=>{M(null),P(!0)},className:"flex items-center gap-2 px-4 py-2 bg-emerald-500 hover:bg-emerald-400 text-black text-xs font-black uppercase tracking-wider rounded-xl transition-all shadow-lg shadow-emerald-500/20",children:[e.jsx(Q,{className:"w-4 h-4"})," Novo Servidor"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(t=>e.jsxs("div",{className:`bg-white/5 border ${t.is_visible?"border-white/5":"border-red-500/20 opacity-60"} rounded-3xl p-6 hover:translate-y-[-4px] transition-all`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl ${t.color||"bg-slate-500"} flex items-center justify-center text-black`,children:e.jsx(he,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{M(t),O(Array.isArray(t.features)?t.features:typeof t.features=="string"?JSON.parse(t.features):[]),P(!0)},className:"p-2 bg-white/5 rounded-lg text-slate-400 hover:text-amber-500 transition-colors",children:e.jsx(kt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{confirm("Eliminar servidor?")&&j.deletePlan(t.id).then(R)},className:"p-2 bg-white/5 rounded-lg text-slate-400 hover:text-red-500 transition-colors",children:e.jsx(xe,{className:"w-4 h-4"})})]})]}),e.jsx("h4",{className:"text-lg font-black text-white uppercase tracking-wider mb-1",children:t.name}),e.jsxs("div",{className:"flex flex-col mb-6",children:[e.jsxs("p",{className:"text-2xl font-black text-emerald-500",children:[parseFloat(t.monthly_credits||0).toLocaleString(),e.jsx("span",{className:"text-[10px] text-slate-500 font-bold ml-1 uppercase",children:"Créditos/MÊS"})]}),e.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-1",children:["Setup: ",parseFloat(t.price_kz||0).toLocaleString()," Kz"]})]}),e.jsx("div",{className:"space-y-4 mb-4",children:e.jsx("p",{className:"text-[10px] text-slate-400 line-clamp-2",children:t.description})}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between text-[11px] font-bold text-slate-400",children:[e.jsx("span",{children:"BÓNUS BOAS-VINDAS"}),e.jsxs("span",{className:"text-emerald-400",children:["+",t.welcome_credits||0," CRÉD."]})]}),e.jsxs("div",{className:"flex items-center justify-between text-[11px] font-bold text-slate-400",children:[e.jsx("span",{children:"VELOCIDADE ANÁLISE"}),e.jsx("span",{className:"text-white",children:t.analysis_speed||"1x"})]}),e.jsxs("div",{className:"flex items-center justify-between text-[11px] font-bold text-slate-400",children:[e.jsx("span",{children:"MÁX. UTILIZADORES"}),e.jsx("span",{className:"text-white",children:t.max_users||0})]}),e.jsxs("div",{className:"flex items-center justify-between text-[11px] font-bold text-slate-400",children:[e.jsx("span",{children:"CUSTO / ANÁLISE"}),e.jsxs("span",{className:"text-white",children:["Kz ",t.cost_per_analysis||0]})]}),e.jsxs("div",{className:"pt-2 border-t border-white/5 space-y-1",children:[e.jsx("p",{className:"text-[9px] text-slate-500 font-black uppercase tracking-widest",children:"Hardware / Limites"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"text-[10px] bg-white/5 px-2 py-1 rounded text-slate-300 flex flex-col",children:[e.jsx("span",{className:"text-[8px] text-slate-500",children:"GPU"}),t.gpu_specs||"Shared CPU"]}),e.jsxs("div",{className:"text-[10px] bg-white/5 px-2 py-1 rounded text-slate-300 flex flex-col",children:[e.jsx("span",{className:"text-[8px] text-slate-500",children:"RAM"}),t.ram_gb||"4"," GB"]}),e.jsxs("div",{className:"text-[10px] bg-white/5 px-2 py-1 rounded text-slate-300 flex flex-col",children:[e.jsx("span",{className:"text-[8px] text-slate-500",children:"MAX DOCS"}),t.max_documents||"200"]}),e.jsxs("div",{className:"text-[10px] bg-white/5 px-2 py-1 rounded text-slate-300 flex flex-col",children:[e.jsx("span",{className:"text-[8px] text-slate-500",children:"TEMPO"}),t.analysis_time_seconds||"60","s"]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-slate-500 mt-auto",children:t.is_visible?e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"w-4 h-4 text-emerald-500"})," Ativo para Venda"]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-4 h-4 text-red-500"})," Oculto"]})})]},t.id))})]})}),l==="settings"&&e.jsxs("div",{className:"max-w-4xl space-y-8",children:[e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-3xl p-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-8 flex items-center gap-2",children:[e.jsx(le,{className:"w-6 h-6 text-emerald-500"}),"Configurações Globais do Ecossistema"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:E.map(t=>e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-[11px] font-black text-slate-500 uppercase tracking-[0.2em] mb-2",children:t.key.replace(/_/g," ")}),e.jsx("div",{className:"flex gap-2",children:e.jsx("input",{type:"text",defaultValue:t.value,className:"bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-sm text-white outline-none focus:border-emerald-500/50 transition-all flex-1",onBlur:w=>se(t.key,w.target.value)})}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-2 italic",children:t.description})]})},t.key))})]}),e.jsx("div",{className:"bg-gradient-to-br from-amber-500/5 to-emerald-500/5 border border-white/5 rounded-3xl p-8",children:e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"p-3 bg-amber-500/20 rounded-2xl",children:e.jsx(z,{className:"w-6 h-6 text-amber-500"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-black text-white uppercase tracking-wider",children:"Atenção Especial"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Qualquer mudança nestas definições afeta todos os utilizadores do sistema em tempo real."})]})]})})]}),l==="packages"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-3xl p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Ie,{className:"w-6 h-6 text-blue-500"}),"Pacotes de Créditos Avulsos"]}),e.jsxs("button",{onClick:()=>G(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-400 text-black text-xs font-black uppercase tracking-wider rounded-xl transition-all shadow-lg shadow-blue-500/20",children:[e.jsx(Q,{className:"w-4 h-4"})," Novo Pacote"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:N.map(t=>e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-3xl p-6 hover:translate-y-[-4px] transition-all",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl ${t.color} flex items-center justify-center text-black`,children:e.jsx(Me,{className:"w-6 h-6"})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>{confirm("Eliminar pacote?")&&j.deleteCreditPackage(t.id).then(R)},className:"p-2 bg-white/5 rounded-lg text-slate-400 hover:text-red-500 transition-colors",children:e.jsx(xe,{className:"w-4 h-4"})})})]}),e.jsx("h4",{className:"text-lg font-black text-white uppercase tracking-wider mb-1",children:t.name}),e.jsxs("p",{className:"text-2xl font-black text-blue-500 mb-2",children:["Kz ",parseFloat(t.price).toLocaleString()]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-[11px] font-bold text-slate-400",children:[e.jsx("span",{children:"CRÉDITOS BASE"}),e.jsx("span",{className:"text-white",children:t.credits})]}),t.bonus_credits>0&&e.jsxs("div",{className:"flex items-center justify-between text-[11px] font-bold text-emerald-400",children:[e.jsx("span",{children:"BÓNUS"}),e.jsxs("span",{children:["+",t.bonus_credits]})]}),e.jsxs("div",{className:"flex items-center justify-between text-[11px] font-bold text-slate-400",children:[e.jsx("span",{children:"TOTAL"}),e.jsx("span",{className:"text-emerald-500",children:t.credits+t.bonus_credits})]})]})]},t.id))})]})}),l==="costs"&&e.jsx("div",{className:"max-w-4xl space-y-6",children:e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-3xl p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(J,{className:"w-6 h-6 text-amber-500"}),"Custos Operacionais"]}),e.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-400 text-black text-xs font-black uppercase tracking-wider rounded-xl transition-all shadow-lg shadow-amber-500/20",children:[e.jsx(Q,{className:"w-4 h-4"})," Atualizar Custo"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest border-b border-white/5 bg-white/[0.02]",children:[e.jsx("th",{className:"px-6 py-4",children:"Recurso"}),e.jsx("th",{className:"px-6 py-4",children:"Custo por Unidade"}),e.jsx("th",{className:"px-6 py-4",children:"Unidade"}),e.jsx("th",{className:"px-6 py-4",children:"Efetivo Desde"}),e.jsx("th",{className:"px-6 py-4",children:"Notas"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:C.map(t=>e.jsxs("tr",{className:"hover:bg-white/[0.02] transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm font-bold text-white",children:t.resource_type.replace("_"," ")})}),e.jsxs("td",{className:"px-6 py-4 text-sm font-black text-emerald-500",children:["Kz ",parseFloat(t.cost_per_unit).toFixed(6)]}),e.jsx("td",{className:"px-6 py-4 text-xs text-slate-400",children:t.unit_name}),e.jsx("td",{className:"px-6 py-4 text-xs text-slate-500 font-mono",children:new Date(t.effective_from).toLocaleDateString("pt-AO")}),e.jsx("td",{className:"px-6 py-4 text-xs text-slate-500 italic",children:t.notes||"-"})]},t.id))})]})})]})}),l==="profitability"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-3xl p-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-8 flex items-center gap-2",children:[e.jsx(Ae,{className:"w-6 h-6 text-purple-500"}),"Rentabilidade por Empresa (Últimos 30 dias)"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest border-b border-white/5 bg-white/[0.02]",children:[e.jsx("th",{className:"px-6 py-4",children:"Empresa"}),e.jsx("th",{className:"px-6 py-4",children:"Plano"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Análises"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Créditos"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Custo Op."}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Margem"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Lucro Líquido"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:y.map(t=>e.jsxs("tr",{className:"hover:bg-white/[0.02] transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm font-bold text-white",children:t.name})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-xs font-bold text-slate-400",children:t.plan_name||"FREE"})}),e.jsx("td",{className:"px-6 py-4 text-right text-sm text-slate-300",children:t.total_analyses}),e.jsx("td",{className:"px-6 py-4 text-right text-sm text-blue-400",children:t.total_credits_consumed}),e.jsxs("td",{className:"px-6 py-4 text-right text-sm text-red-400",children:["Kz ",parseFloat(t.total_operational_cost||0).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("span",{className:`text-sm font-bold ${t.avg_margin_percentage>60?"text-emerald-500":t.avg_margin_percentage>30?"text-amber-500":"text-red-500"}`,children:[parseFloat(t.avg_margin_percentage||0).toFixed(1),"%"]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("span",{className:`text-sm font-black ${t.net_profit>0?"text-emerald-500":"text-red-500"}`,children:["Kz ",parseFloat(t.net_profit||0).toLocaleString()]})})]},t.id))})]})})]})}),L&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in zoom-in duration-300",children:e.jsxs("div",{className:"bg-[#0c0c0c] border border-white/10 w-full max-w-xl rounded-[2.5rem] p-10 relative shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-emerald-500/5 rounded-full blur-3xl -mr-16 -mt-16"}),e.jsx("h3",{className:"text-2xl font-black text-white mb-8",children:o?"Editar Servidor":"Novo Servidor de Performance"}),e.jsxs("form",{onSubmit:W,className:"space-y-6 max-h-[70vh] overflow-y-auto pr-2 custom-scrollbar",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase mb-2 block",children:"Nome do Servidor"}),e.jsx("input",{name:"name",defaultValue:o==null?void 0:o.name,required:!0,className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-sm outline-none focus:border-emerald-500/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase mb-2 block",children:"Slug ID (Ex: PRO_SERVER)"}),e.jsx("input",{name:"slug",defaultValue:o==null?void 0:o.slug,placeholder:"Opcional",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-sm outline-none focus:border-emerald-500/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase mb-2 block",children:"Setup Initial (Kz)"}),e.jsx("input",{name:"price_kz",type:"number",step:"0.01",defaultValue:o==null?void 0:o.price_kz,required:!0,className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-sm outline-none focus:border-emerald-500/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase mb-2 block",children:"Manutenção (Créditos/Mês)"}),e.jsx("input",{name:"monthly_credits",type:"number",defaultValue:o==null?void 0:o.monthly_credits,required:!0,className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-sm outline-none focus:border-emerald-500/50"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase mb-2 block",children:"Descrição"}),e.jsx("textarea",{name:"description",defaultValue:o==null?void 0:o.description,className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-sm outline-none focus:border-emerald-500/50 h-20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase mb-2 block",children:"Velocidade (Ex: 1x, 5x, 20x)"}),e.jsx("input",{name:"analysis_speed",defaultValue:(o==null?void 0:o.analysis_speed)||"1x",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-sm outline-none focus:border-emerald-500/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase mb-2 block",children:"Custo por Análise (Kz)"}),e.jsx("input",{name:"cost_per_analysis",type:"number",step:"0.1",defaultValue:o==null?void 0:o.cost_per_analysis,required:!0,className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-sm outline-none focus:border-emerald-500/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase mb-2 block",children:"Máx. Utilizadores"}),e.jsx("input",{name:"max_users",type:"number",defaultValue:o==null?void 0:o.max_users,required:!0,className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-sm outline-none focus:border-emerald-500/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase mb-2 block",children:"Máx. Documentos/Mês"}),e.jsx("input",{name:"max_documents",type:"number",defaultValue:(o==null?void 0:o.max_documents)||200,required:!0,className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-sm outline-none focus:border-emerald-500/50"})]}),e.jsx("div",{className:"col-span-1 md:col-span-2 text-[9px] font-black text-slate-500 uppercase tracking-widest mb-1 mt-4",children:"Especificações de Hardware"}),e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl space-y-3",children:[e.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase block",children:"Tempo (Segundos)"}),e.jsx("input",{name:"analysis_time_seconds",type:"number",defaultValue:(o==null?void 0:o.analysis_time_seconds)||60,className:"w-full bg-black/40 border border-white/10 rounded-xl px-3 py-2 text-white text-xs outline-none focus:border-emerald-500/50"})]}),e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl space-y-3",children:[e.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase block",children:"RAM (GB)"}),e.jsx("input",{name:"ram_gb",type:"number",defaultValue:(o==null?void 0:o.ram_gb)||4,className:"w-full bg-black/40 border border-white/10 rounded-xl px-3 py-2 text-white text-xs outline-none focus:border-emerald-500/50"})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 bg-white/5 p-4 rounded-xl space-y-3",children:[e.jsx("label",{className:"text-[9px] font-bold text-slate-400 uppercase block",children:"GPU Specs"}),e.jsx("input",{name:"gpu_specs",defaultValue:(o==null?void 0:o.gpu_specs)||"Shared CPU",className:"w-full bg-black/40 border border-white/10 rounded-xl px-3 py-2 text-white text-xs outline-none focus:border-emerald-500/50"})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 space-y-4 pt-4 border-t border-white/5",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase block",children:"Vantagens & Funcionalidades do Plano"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:U,onChange:t=>K(t.target.value),onKeyPress:t=>{t.key==="Enter"&&(t.preventDefault(),U&&(O([...T,U]),K("")))},placeholder:"Ex: Suporte 24/7, Prioridade Alta...",className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white outline-none focus:border-emerald-500/50"}),e.jsx("button",{type:"button",onClick:()=>{U&&(O([...T,U]),K(""))},className:"px-4 bg-white/10 hover:bg-white/20 rounded-xl text-white transition-all",children:e.jsx(Q,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:T.map((t,w)=>e.jsxs("span",{className:"flex items-center gap-2 px-3 py-1.5 bg-emerald-500/10 border border-emerald-500/20 rounded-lg text-[10px] font-bold text-emerald-400",children:[t,e.jsx("button",{type:"button",onClick:()=>O(T.filter((b,A)=>A!==w)),children:e.jsx(X,{className:"w-3 h-3 hover:text-white transition-colors"})})]},w))})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 grid grid-cols-1 md:grid-cols-3 gap-6 pt-4 border-t border-white/5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase mb-2 block",children:"Bónus Boas-Vindas"}),e.jsx("input",{name:"welcome_credits",type:"number",defaultValue:(o==null?void 0:o.welcome_credits)||0,required:!0,className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-sm outline-none focus:border-emerald-500/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase mb-2 block",children:"Cor do Badge"}),e.jsxs("select",{name:"color",defaultValue:(o==null?void 0:o.color)||"text-cyan-400",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-sm outline-none focus:border-emerald-500/50",children:[e.jsx("option",{value:"text-cyan-400",children:"Azul Ciano"}),e.jsx("option",{value:"text-blue-500",children:"Azul Royal"}),e.jsx("option",{value:"text-amber-500",children:"Laranja"}),e.jsx("option",{value:"text-emerald-500",children:"Verde"}),e.jsx("option",{value:"text-purple-500",children:"Roxo"}),e.jsx("option",{value:"text-rose-500",children:"Rosa"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase mb-2 block",children:"Visibilidade"}),e.jsxs("select",{name:"is_visible",defaultValue:(o==null?void 0:o.is_visible)!==!1?"true":"false",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-sm outline-none focus:border-emerald-500/50",children:[e.jsx("option",{value:"true",children:"Público (Venda)"}),e.jsx("option",{value:"false",children:"Oculto (Admin Only)"})]})]})]})]}),e.jsxs("div",{className:"flex gap-4 mt-8 pt-6 border-t border-white/5",children:[e.jsx("button",{type:"button",onClick:()=>P(!1),className:"flex-1 py-4 bg-white/5 border border-white/10 text-white text-xs font-black uppercase tracking-widest rounded-2xl hover:bg-white/10 transition-all",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 py-4 bg-emerald-500 text-black text-xs font-black uppercase tracking-widest rounded-2xl hover:bg-emerald-400 transition-all shadow-xl shadow-emerald-500/20",children:"Confirmar Servidor"})]})]})]})})]})},Pt=()=>{const[l,S]=r.useState([]),[u,g]=r.useState(!0),[v,k]=r.useState(null),[c,h]=r.useState(null),[n,d]=r.useState(null),[N,m]=r.useState(""),[C,i]=r.useState(!1);r.useEffect(()=>{y()},[]);const y=async()=>{try{const a=await j.getPendingPayments();S(a)}catch(a){console.error("Erro ao carregar pagamentos:",a),$.error("Erro ao carregar pagamentos pendentes")}finally{g(!1)}},x=async()=>{if(c){i(!0);try{await j.approvePayment(c),$.success("Pagamento aprovado com sucesso"),h(null),y()}catch(a){console.error(a),$.error("Erro ao aprovar pagamento")}finally{i(!1)}}},E=async()=>{if(!(!n||!N)){i(!0);try{await j.rejectPayment(n,N),$.success("Pagamento rejeitado"),d(null),m(""),y()}catch(a){console.error(a),$.error("Erro ao rejeitar pagamento")}finally{i(!1)}}},f=a=>a.startsWith("data:application/pdf")?e.jsx("iframe",{src:a,className:"w-full h-[600px] rounded-lg border border-slate-700",title:"Comprovativo PDF"}):e.jsx("img",{src:a,alt:"Comprovativo",className:"max-w-full max-h-[600px] rounded-lg border border-slate-700 mx-auto"});return u?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(Y,{className:"w-8 h-8 text-amber-500 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Aprovação de Pagamentos"}),e.jsx("p",{className:"text-slate-400",children:"Gerir solicitações de recarga pendentes"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>y(),className:"p-2 text-slate-400 hover:text-white bg-white/5 rounded-lg transition-colors",children:e.jsx(Y,{className:`w-5 h-5 ${u?"animate-spin":""}`})})})]}),l.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 border border-dashed border-white/10 rounded-2xl bg-white/5",children:[e.jsx(ae,{className:"w-12 h-12 text-slate-600 mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"Tudo em dia!"}),e.jsx("p",{className:"text-slate-400",children:"Não há pagamentos pendentes de aprovação no momento."})]}):e.jsx("div",{className:"grid gap-4",children:l.map(a=>e.jsx("div",{className:"bg-white/5 border border-white/5 rounded-xl p-6 hover:border-amber-500/20 transition-all",children:e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-500/10 flex items-center justify-center text-amber-500",children:e.jsx(ee,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[new Intl.NumberFormat("pt-AO",{style:"currency",currency:"AOA"}).format(a.amount),e.jsxs("span",{className:"text-xs font-normal px-2 py-0.5 rounded-full bg-amber-500/10 text-amber-500 border border-amber-500/20",children:[a.credits," Créditos"]})]}),e.jsx("p",{className:"text-sm text-slate-400",children:a.description})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-wider",children:"Solicitante"}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-300",children:[e.jsx(nt,{className:"w-4 h-4 text-amber-500/50"}),e.jsxs("span",{children:[a.user_name," (",a.user_email,")"]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-wider",children:"Beneficiário"}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-300",children:[e.jsx(H,{className:"w-4 h-4 text-purple-500/50"}),e.jsx("span",{children:a.company_name||"Conta Pessoal"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-wider",children:"Método"}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-300",children:[e.jsx(Ye,{className:"w-4 h-4 text-blue-500/50"}),e.jsx("span",{children:a.payment_method})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-wider",children:"Data"}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-300",children:[e.jsx(Ne,{className:"w-4 h-4 text-green-500/50"}),e.jsx("span",{children:new Date(a.created_at).toLocaleString()})]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 min-w-[200px] border-l border-white/5 pl-6 lg:justify-center",children:[a.proof_document?e.jsxs("button",{onClick:()=>k(a.proof_document),className:"w-full py-2 px-4 bg-blue-500/10 hover:bg-blue-500/20 text-blue-400 rounded-lg flex items-center justify-center gap-2 transition-colors border border-blue-500/20",children:[e.jsx(ve,{className:"w-4 h-4"})," Ver Comprovativo"]}):e.jsxs("div",{className:"w-full py-2 px-4 bg-slate-500/5 text-slate-500 rounded-lg flex items-center justify-center gap-2 border border-slate-500/10 cursor-not-allowed",children:[e.jsx(fe,{className:"w-4 h-4"})," Sem Comprovativo"]}),e.jsx("div",{className:"h-px bg-white/5 my-1"}),e.jsxs("button",{onClick:()=>h(a.id),disabled:C,className:"w-full py-2 px-4 bg-green-500 hover:bg-green-600 text-white font-medium rounded-lg flex items-center justify-center gap-2 transition-colors shadow-lg shadow-green-900/20 disabled:opacity-50",children:[e.jsx(ae,{className:"w-4 h-4"})," Aprovar"]}),e.jsxs("button",{onClick:()=>d(a.id),disabled:C,className:"w-full py-2 px-4 bg-red-500/10 hover:bg-red-500/20 text-red-400 font-medium rounded-lg flex items-center justify-center gap-2 transition-colors border border-red-500/20 disabled:opacity-50",children:[e.jsx(X,{className:"w-4 h-4"})," Rejeitar"]})]})]})},a.id))}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl border border-white/10 w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/5",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Comprovativo de Pagamento"}),e.jsx("button",{onClick:()=>k(null),className:"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-4 overflow-auto bg-[#0f0f0f] flex-1",children:f(v)}),e.jsx("div",{className:"p-4 border-t border-white/5 flex justifying-end",children:e.jsxs("a",{href:v,download:"comprovativo",className:"text-blue-400 hover:text-blue-300 text-sm flex items-center gap-2",children:[e.jsx(we,{className:"w-4 h-4"})," Baixar original"]})})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl border border-white/10 w-full max-w-md shadow-2xl p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/10 flex items-center justify-center text-green-500 mx-auto mb-4",children:e.jsx(ae,{className:"w-8 h-8"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Aprovar Pagamento"}),e.jsx("p",{className:"text-sm text-slate-400 mb-6",children:"Esta ação adicionará os créditos correspondentes à conta do usuário imediatamente. Confirmar?"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>h(null),className:"flex-1 py-2 px-4 bg-white/5 hover:bg-white/10 text-slate-300 font-medium rounded-lg transition-colors border border-white/5",children:"Cancelar"}),e.jsx("button",{onClick:x,disabled:C,className:"flex-1 py-2 px-4 bg-green-500 hover:bg-green-600 text-white font-medium rounded-lg transition-colors shadow-lg shadow-green-900/20 disabled:opacity-50",children:C?e.jsx(Y,{className:"w-4 h-4 animate-spin mx-auto"}):"Sim, Aprovar"})]})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl border border-white/10 w-full max-w-md shadow-2xl p-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center text-red-500 mx-auto mb-4",children:e.jsx(X,{className:"w-8 h-8"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2 text-center",children:"Rejeitar Pagamento"}),e.jsx("p",{className:"text-sm text-slate-400 mb-4 text-center",children:"Por favor, informe o motivo da rejeição para que o usuário possa corrigir."}),e.jsx("textarea",{value:N,onChange:a=>m(a.target.value),placeholder:"Motivo da rejeição...",className:"w-full h-32 bg-black/20 border border-white/10 rounded-lg p-3 text-white placeholder-slate-600 focus:outline-none focus:border-amber-500/50 mb-4 resize-none"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{d(null),m("")},className:"flex-1 py-2 px-4 bg-white/5 hover:bg-white/10 text-slate-300 font-medium rounded-lg transition-colors border border-white/5",children:"Cancelar"}),e.jsx("button",{onClick:E,disabled:!N||C,className:"flex-1 py-2 px-4 bg-red-500 hover:bg-red-600 text-white font-medium rounded-lg transition-colors disabled:opacity-50",children:C?e.jsx(Y,{className:"w-4 h-4 animate-spin mx-auto"}):"Confirmar Rejeição"})]})]})})]})},Ot=()=>{const[l,S]=r.useState(""),[u,g]=r.useState([]),[v,k]=r.useState(!0);De.useEffect(()=>{const h=async()=>{try{const d=await j.getActivity();g(d)}catch(d){console.error("Error loading logs:",d)}finally{k(!1)}};h();const n=setInterval(h,3e4);return()=>clearInterval(n)},[]);const c=h=>{const n={CRITICAL:"bg-red-500/10 text-red-500 border-red-500/20",SECURITY:"bg-purple-500/10 text-purple-400 border-purple-500/20",WARNING:"bg-amber-500/10 text-amber-400 border-amber-500/20",INFO:"bg-blue-500/10 text-blue-400 border-blue-500/20"};return e.jsx("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded border uppercase tracking-widest ${n[h]||n.INFO}`,children:h})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center justify-between gap-4 bg-white/5 border border-white/5 p-4 rounded-3xl",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 flex-1",children:[e.jsxs("div",{className:"relative flex-1 min-w-[300px] max-w-xl",children:[e.jsx(ct,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),e.jsx("input",{type:"text",placeholder:"Filtrar logs por ação, utilizador, alvo ou IP...",className:"w-full bg-black/40 border border-white/5 rounded-xl py-2 pl-10 pr-4 text-sm text-white placeholder-slate-600 focus:border-amber-500/50 outline-none transition-all",value:l,onChange:h=>S(h.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white/5 border border-white/5 rounded-xl text-xs font-bold text-slate-400 hover:text-white transition-all",children:[e.jsx(Ne,{className:"w-4 h-4"}),"Hoje",e.jsx(Qe,{className:"w-3 h-3"})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white/5 border border-white/5 rounded-xl text-xs font-bold text-slate-400 hover:text-white transition-all",children:[e.jsx(_e,{className:"w-4 h-4"}),"Nível"]})]})]}),e.jsxs("button",{className:"flex items-center gap-2 px-6 py-2 bg-white/5 border border-white/10 hover:bg-white/10 text-white text-xs font-bold uppercase tracking-widest rounded-xl transition-all",children:[e.jsx(we,{className:"w-4 h-4"}),"Exportar Auditoria"]})]}),e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-3xl overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-white/5 bg-white/[0.01] flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:[e.jsx(z,{className:"w-3.5 h-3.5"}),"Monitorização em Tempo Real"]}),e.jsx("div",{className:"flex items-center gap-2 ml-auto",children:e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-white/5 border border-white/5 rounded-lg text-[10px] font-bold text-slate-400",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),"Stream Ativo"]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest border-b border-white/5 bg-white/[0.02]",children:[e.jsx("th",{className:"px-6 py-4",children:"Status / Nível"}),e.jsx("th",{className:"px-6 py-4",children:"Executor"}),e.jsx("th",{className:"px-6 py-4",children:"Evento (Ação)"}),e.jsx("th",{className:"px-6 py-4",children:"Recurso Alvo"}),e.jsx("th",{className:"px-6 py-4",children:"Endereço IP"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Timestamp"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5 font-mono",children:v?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-20 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Sincronizando Auditoria..."})]})})}):u.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-20 text-center",children:e.jsx("span",{className:"text-xs text-slate-600",children:"Nenhum registo de auditoria encontrado."})})}):u.map(h=>e.jsxs("tr",{className:"hover:bg-white/[0.02] transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center gap-3",children:c(h.level||"INFO")})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[h.user==="Sistema"?e.jsx(ye,{className:"w-3.5 h-3.5 text-slate-500"}):e.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-300",children:h.user})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-[11px] font-bold text-white tracking-tight underline decoration-amber-500/20 underline-offset-4",children:h.action})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("code",{className:"text-[10px] bg-white/5 px-1.5 py-0.5 rounded text-slate-400",children:h.target})}),e.jsx("td",{className:"px-6 py-4 text-[10px] text-slate-600",children:h.ip||"---"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 text-xs text-slate-500 font-sans tabular-nums",children:[e.jsx(Oe,{className:"w-3.5 h-3.5 opacity-50"}),new Date(h.time).toLocaleTimeString("pt-AO")]})})]},h.id))})]})}),e.jsx("div",{className:"p-6 bg-black/20 border-t border-white/5",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-white/5 rounded-2xl",children:e.jsx(Z,{className:"w-6 h-6 text-amber-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-xs font-bold text-white uppercase tracking-widest mb-1",children:"Nota de Segurança"}),e.jsx("p",{className:"text-xs text-slate-500 leading-relaxed max-w-3xl",children:"Todos os logs de auditoria são assinados digitalmente e imutáveis. O acesso a estes registos é restrito a administradores de nível Root e é auditado globalmente pelo Compliance Engine da KwikDocs."})]}),e.jsx("button",{className:"px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-white transition-all",children:"Ver Documentação Legal"})]})})]})]})},Rt=()=>{var a,_,I,B,L,P,V,G,s,p,o,M,U,K,T,O,R,W,se,t,w;const[l,S]=r.useState(null),[u,g]=r.useState(!0),[v,k]=r.useState(""),[c,h]=r.useState([]),[n,d]=r.useState(!1),[N,m]=r.useState({provider:"contabo",endpoint:"",region:"usc1",bucket:"",access_key:"",secret_key:"",tenant_id:"",is_active:!1}),C=()=>localStorage.getItem("auth_token"),i=async()=>{try{const b=C(),A=await fetch("/api/admin/infra/health",{headers:{Authorization:`Bearer ${b}`}});if(!A.ok)throw new Error("Falha ao carregar status");const q=await A.json();S(q),k("")}catch(b){console.error("Infrastructure check failed:",b),k("Sistema Offline ou Inacessível")}finally{g(!1)}},y=async()=>{try{const b=C(),A=await fetch("/api/admin/storage-config",{headers:{Authorization:`Bearer ${b}`}});if(A.ok){const q=await A.json();h(q)}}catch{console.error("Failed to load storage configs")}};r.useEffect(()=>{i(),y();const b=setInterval(i,1e4);return()=>clearInterval(b)},[]);const x=async b=>{b.preventDefault();try{const A=C(),q=await fetch("/api/admin/storage-config",{method:"POST",headers:{Authorization:`Bearer ${A}`,"Content-Type":"application/json"},body:JSON.stringify(N)});if(!q.ok){const ie=await q.json();throw new Error(ie.error||"Erro ao salvar")}d(!1),y(),alert("Configuração salva com sucesso!")}catch(A){alert("Erro: "+A.message)}},E=async b=>{if(confirm("Deseja ativar esta configuração? Isso afetará todos os novos uploads."))try{const A=C();await fetch(`/api/admin/storage-config/${b}/activate`,{method:"PUT",headers:{Authorization:`Bearer ${A}`}}),y()}catch{alert("Erro ao ativar")}},f=c.find(b=>b.is_active);return u&&!l?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[400px] text-slate-500 animate-pulse",children:[e.jsx(ke,{className:"w-10 h-10 animate-spin mb-4 text-blue-500"}),e.jsx("p",{className:"text-sm font-bold uppercase tracking-widest",children:"Sincronizando Infraestrutura..."})]}):e.jsxs("div",{className:"min-h-screen bg-[#0a0c10] text-slate-300 p-4 lg:p-8 font-sans",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between mb-10 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-black text-white tracking-tighter flex items-center gap-3",children:[e.jsx(me,{className:"text-blue-500 w-10 h-10"}),"INFRASTRUCTURE"]}),e.jsx("p",{className:"text-slate-500 text-sm mt-2 font-medium tracking-wide",children:"Monitoramento de clusters, base de dados e canais de armazenamento."})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-white/5 border border-white/10 p-2 rounded-2xl backdrop-blur-md",children:[e.jsxs("div",{className:"px-4 border-r border-white/10",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase",children:"Uptime"}),e.jsx("p",{className:"text-emerald-400 font-mono text-sm",children:(a=l==null?void 0:l.system)!=null&&a.uptime?(l.system.uptime/3600).toFixed(1)+"h":"---"})]}),e.jsxs("div",{className:"px-4",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),e.jsx("p",{className:"text-white font-black text-sm uppercase",children:"Operational"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"xl:col-span-2 space-y-8",children:[e.jsxs("div",{className:"relative group bg-[#11141b] border border-white/5 rounded-[40px] overflow-hidden shadow-2xl transition-all hover:border-blue-500/20",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-600/50 via-purple-600/50 to-emerald-600/50 shadow-[0_0_20px_rgba(37,99,235,0.5)]"}),e.jsxs("div",{className:"p-8 pb-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-3",children:[e.jsx(Ee,{className:"text-blue-500"}),"STORAGE CHANNELS"]}),e.jsx("p",{className:"text-xs text-slate-500 font-medium mt-1",children:"Configuração de S3 Bucket e Contabo Object Storage."})]}),e.jsxs("button",{onClick:()=>d(!n),className:"px-6 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-2xl font-black text-xs uppercase tracking-widest transition-all shadow-lg active:scale-95 flex items-center gap-2 group",children:[e.jsx(Q,{className:"w-4 h-4 transition-transform group-hover:rotate-90"})," New Channel"]})]}),n&&e.jsx("div",{className:"m-8 p-8 bg-white/5 border border-white/10 rounded-[30px] backdrop-blur-xl animate-in fade-in slide-in-from-top-4 duration-500",children:e.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[[{label:"Provider",key:"provider",type:"select",options:["contabo","aws","minio"]},{label:"Endpoint URL",key:"endpoint",type:"text",placeholder:"https://usc1.contabostorage.com"},{label:"Bucket Name",key:"bucket",type:"text"},{label:"Region",key:"region",type:"text"},{label:"Access Key",key:"access_key",type:"text"},{label:"Secret Key",key:"secret_key",type:"password"},{label:"Tenant ID (Optional)",key:"tenant_id",type:"text"}].map(b=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:b.label}),b.type==="select"?e.jsx("select",{value:N[b.key],onChange:A=>m({...N,[b.key]:A.target.value}),className:"w-full h-12 px-5 rounded-xl bg-black/40 border border-white/10 text-white text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all outline-none",children:b.options.map(A=>e.jsx("option",{value:A,children:A.toUpperCase()},A))}):e.jsx("input",{type:b.type,value:N[b.key],placeholder:b.placeholder,onChange:A=>m({...N,[b.key]:A.target.value}),className:"w-full h-12 px-5 rounded-xl bg-black/40 border border-white/10 text-white text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all outline-none placeholder:text-slate-700",required:b.key!=="tenant_id"})]},b.key)),e.jsx("div",{className:"flex items-end pb-2 px-1",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:N.is_active,onChange:b=>m({...N,is_active:b.target.checked}),className:"w-6 h-6 rounded-lg bg-black border-white/10 text-blue-600 focus:ring-offset-black"}),e.jsx("span",{className:"text-xs font-bold text-slate-400 group-hover:text-blue-400 transition-colors uppercase tracking-widest",children:"Ativar em Produção"})]})}),e.jsxs("div",{className:"md:col-span-2 flex justify-end gap-4 mt-4 bg-black/20 p-4 rounded-2xl border border-white/5",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-6 py-3 text-slate-500 font-black text-xs uppercase tracking-widest hover:text-white transition-colors",children:"Abort"}),e.jsx("button",{type:"submit",className:"px-8 py-3 bg-white text-black rounded-xl font-black text-xs uppercase tracking-widest hover:bg-slate-200 shadow-xl transition-all active:scale-95",children:"Save Config"})]})]})}),e.jsx("div",{className:"overflow-x-auto p-4 lg:p-8",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] border-b border-white/5",children:[e.jsx("th",{className:"pb-6 px-4",children:"State"}),e.jsx("th",{className:"pb-6 px-4",children:"Provider"}),e.jsx("th",{className:"pb-6 px-4",children:"Bucket"}),e.jsx("th",{className:"pb-6 px-4",children:"Public URL Entry"}),e.jsx("th",{className:"pb-6 px-4 text-right",children:"Settings"})]})}),e.jsxs("tbody",{className:"divide-y divide-white/5",children:[c.map(b=>e.jsxs("tr",{className:"group hover:bg-white/[0.02] transition-all",children:[e.jsx("td",{className:"py-6 px-4",children:b.is_active?e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-emerald-500 text-black rounded-lg text-[10px] font-black uppercase shadow-[0_0_15px_rgba(16,185,129,0.3)]",children:[e.jsx(ae,{className:"w-3 h-3"})," ACTIVE"]}):e.jsx("div",{className:"flex items-center gap-2 px-3 py-1 bg-white/5 text-slate-500 rounded-lg text-[10px] font-black uppercase border border-white/5",children:"STANDBY"})}),e.jsx("td",{className:"py-6 px-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center border border-white/10 ${b.is_active?"bg-blue-600/20 text-blue-400":"bg-white/5 text-white/20"}`,children:e.jsx(dt,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-black text-white uppercase",children:b.provider}),e.jsx("p",{className:"text-[10px] text-slate-600 font-mono uppercase",children:b.region})]})]})}),e.jsx("td",{className:"py-6 px-4 font-mono text-xs text-blue-400 font-bold",children:b.bucket}),e.jsx("td",{className:"py-6 px-4",children:e.jsxs("div",{className:"flex items-center gap-2 group/url cursor-pointer",title:b.endpoint,children:[e.jsx("code",{className:"text-[10px] text-slate-500 truncate max-w-[120px] font-mono",children:b.endpoint}),e.jsx(je,{className:"w-3 h-3 text-slate-700 group-hover/url:text-blue-500 transition-colors"})]})}),e.jsx("td",{className:"py-6 px-4 text-right",children:b.is_active?e.jsx("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-widest",children:"Locked"}):e.jsx("button",{onClick:()=>E(b.id),className:"px-4 py-2 border border-white/10 rounded-xl text-[10px] font-black uppercase tracking-widest hover:border-blue-500 hover:text-blue-500 transition-all bg-black/40",children:"Activate"})})]},b.id)),c.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"py-20 text-center opacity-30",children:[e.jsx(Ee,{className:"w-16 h-16 mx-auto mb-4 text-slate-700"}),e.jsx("p",{className:"text-sm font-black uppercase tracking-widest",children:"Using ENV-Fallback Credentials"})]})})]})]})})]}),e.jsxs("div",{className:"bg-[#11141b] border border-white/5 rounded-[40px] p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-white uppercase tracking-tighter flex items-center gap-2",children:[e.jsx(z,{className:"text-emerald-500 w-5 h-5"}),"NETWORK GATEWAY"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.8)]"}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500/20"})]})]}),e.jsxs("div",{className:"bg-black/60 rounded-2xl p-4 font-mono text-[11px] space-y-1 text-slate-500 border border-white/5",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-emerald-500",children:"INIT"})," S3_PROXY_LAYER_UP (Port 3001)"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-blue-500",children:"INFO"})," DB_POOL_ESTABLISHED (AWS/RDS)"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-purple-500",children:"SYNC"})," ",f?`CONNECTED TO ${f.provider.toUpperCase()}`:"FALLBACK_ENV_STORAGE_ACTIVE"]}),e.jsxs("p",{className:"animate-pulse flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-slate-800 rounded-full"})," Listing buckets..."]})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#1c212b] to-[#11141b] border border-white/10 rounded-[40px] p-8 shadow-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-blue-600/10 rounded-full blur-[60px] -mr-20 -mt-20"}),e.jsxs("h3",{className:"text-white font-black flex items-center gap-3 mb-8 tracking-tighter",children:[e.jsx(re,{className:"text-blue-400"}),"CORE DATABASE"]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative pt-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{children:e.jsx("span",{className:"text-[10px] font-black inline-block py-1 px-2 uppercase rounded-full bg-blue-600 text-white tracking-widest",children:"Active Load"})}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"text-xs font-black text-white",children:[((I=(_=l==null?void 0:l.database)==null?void 0:_.stats)==null?void 0:I.active)||0,"/",((B=l==null?void 0:l.database)==null?void 0:B.poolSize)||0]})})]}),e.jsx("div",{className:"overflow-hidden h-2 mb-4 text-xs flex rounded-full bg-white/5 border border-white/5 p-0.5",children:e.jsx("div",{style:{width:`${((P=(L=l==null?void 0:l.database)==null?void 0:L.stats)==null?void 0:P.active)/((V=l==null?void 0:l.database)==null?void 0:V.poolSize)*100||0}%`},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500 rounded-full transition-all duration-1000"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white/5 border border-white/5 p-4 rounded-3xl",children:[e.jsx("p",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest mb-1",children:"Waiting"}),e.jsx("p",{className:`text-2xl font-black ${((s=(G=l==null?void 0:l.database)==null?void 0:G.stats)==null?void 0:s.waiting)>0?"text-amber-500":"text-white"}`,children:((o=(p=l==null?void 0:l.database)==null?void 0:p.stats)==null?void 0:o.waiting)||0})]}),e.jsxs("div",{className:"bg-white/5 border border-white/5 p-4 rounded-3xl",children:[e.jsx("p",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest mb-1",children:"Max Pool"}),e.jsx("p",{className:"text-2xl font-black text-white",children:((M=l==null?void 0:l.database)==null?void 0:M.poolSize)||0})]})]}),e.jsxs("div",{className:"p-4 bg-emerald-500/10 border border-emerald-500/20 rounded-2xl flex items-center gap-3",children:[e.jsx(te,{className:"w-5 h-5 text-emerald-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] font-black text-emerald-500 uppercase tracking-[0.2em]",children:"Data Integrity"}),e.jsx("p",{className:"text-[11px] text-slate-400 font-medium",children:"Postgres Cluster is Stable."})]})]})]})]}),e.jsxs("div",{className:"bg-[#11141b] border border-white/5 rounded-[40px] p-8 shadow-inner overflow-hidden relative group",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-white/5"}),e.jsxs("h3",{className:"text-white font-black flex items-center gap-3 mb-8 tracking-tighter uppercase text-sm",children:[e.jsx(z,{className:"text-amber-500"}),"Processor Metrics"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-600 uppercase tracking-widest",children:"CPU Average Load"}),e.jsx("p",{className:"text-3xl font-black text-white text-amber-500",children:(K=(U=l==null?void 0:l.system)==null?void 0:U.cpu)!=null&&K.load?l.system.cpu.load[0].toFixed(2):"0.00"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-600 uppercase tracking-widest",children:"Memory"}),e.jsxs("p",{className:"text-xl font-bold text-white",children:[((O=(T=l==null?void 0:l.system)==null?void 0:T.memory)==null?void 0:O.usagePercentage)||0,"%"]})]})]}),e.jsx("div",{className:"h-2 bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-amber-600 to-amber-400 rounded-full transition-all duration-1000",style:{width:`${((W=(R=l==null?void 0:l.system)==null?void 0:R.memory)==null?void 0:W.usagePercentage)||0}%`}})}),e.jsxs("div",{className:"space-y-2 border-t border-white/5 pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-[10px] font-bold",children:[e.jsx("span",{className:"text-slate-500 uppercase",children:"Architecture"}),e.jsxs("span",{className:"text-white uppercase tracking-widest",children:[(se=l==null?void 0:l.system)==null?void 0:se.platform," x64"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-[10px] font-bold",children:[e.jsx("span",{className:"text-slate-500 uppercase",children:"Logical Cores"}),e.jsxs("span",{className:"text-white",children:[(w=(t=l==null?void 0:l.system)==null?void 0:t.cpu)==null?void 0:w.count," CPUs"]})]})]})]})]})]})]})]})},$t=()=>e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-3xl p-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-amber-500/5 rounded-full blur-[100px] -mr-32 -mt-32"}),e.jsxs("h3",{className:"text-xl font-bold text-white mb-8 flex items-center gap-3",children:[e.jsx(ye,{className:"w-6 h-6 text-amber-500"}),"Posture de Segurança SaaS"]}),e.jsxs("div",{className:"space-y-6 relative z-10",children:[e.jsxs("div",{className:"p-4 bg-emerald-500/5 border border-emerald-500/20 rounded-2xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-xl",children:e.jsx(te,{className:"w-6 h-6 text-emerald-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-white",children:"Certificação SSL/TLS"}),e.jsx("p",{className:"text-[10px] text-slate-500 italic",children:"Expira em 242 dias"})]})]}),e.jsx("span",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-widest",children:"Ativo"})]}),e.jsxs("div",{className:"p-4 bg-white/5 border border-white/10 rounded-2xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-purple-500/10 rounded-xl",children:e.jsx(lt,{className:"w-6 h-6 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-white",children:"2FA Administrativo (Root)"}),e.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-tighter",children:"Obrigatório para Super Admins"})]})]}),e.jsx("span",{className:"text-[10px] font-black text-purple-400 uppercase tracking-widest",children:"Configurado"})]}),e.jsxs("div",{className:"pt-4 border-t border-white/5",children:[e.jsx("h4",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-[0.2em] mb-4",children:"Investigação Rápida"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{className:"flex items-center justify-center gap-2 py-3 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-[10px] font-bold text-slate-300 transition-all uppercase tracking-widest",children:[e.jsx(ve,{className:"w-3.5 h-3.5"})," Scan de Sessões"]}),e.jsxs("button",{className:"flex items-center justify-center gap-2 py-3 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-[10px] font-bold text-slate-300 transition-all uppercase tracking-widest",children:[e.jsx(Z,{className:"w-3.5 h-3.5"})," Audit Log"]})]})]})]})]}),e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-3xl p-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-8 flex items-center gap-3",children:[e.jsx(fe,{className:"w-6 h-6 text-red-500"}),"Prevenção de Ameaças"]}),e.jsx("div",{className:"space-y-4",children:[{title:"DDoS Protection",status:"Habilitado",color:"text-emerald-500"},{title:"WAF (Web App Firewall)",status:"Modo Bloqueio",color:"text-emerald-500"},{title:"Brute Force Detection",status:"Monitorando",color:"text-amber-500"},{title:"SQL Injection Watchpad",status:"Blindado",color:"text-emerald-500"}].map((l,S)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-black/20 border border-white/5 rounded-2xl",children:[e.jsx("span",{className:"text-xs font-bold text-slate-300",children:l.title}),e.jsx("span",{className:`text-[10px] font-black uppercase tracking-widest ${l.color}`,children:l.status})]},S))}),e.jsxs("div",{className:"mt-8 p-4 bg-red-500/5 border border-red-500/20 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ct,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-[10px] font-black text-red-500 uppercase",children:"Ações de Emergência"})]}),e.jsx("p",{className:"text-xs text-slate-400 mb-4 tracking-tight",children:"Cuidado: Estas ações afetam globalmente o sistema KwikDocs."}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.jsx("button",{className:"w-full py-2 bg-red-600 hover:bg-red-500 text-white text-[10px] font-black uppercase tracking-widest rounded-lg transition-all",children:"Suspender Todos os Tenants (Panic Mode)"})})]})]})]})}),zt=()=>{const[l,S]=r.useState([]),[u,g]=r.useState(!0),[v,k]=r.useState("ai"),[c,h]=r.useState(null),[n,d]=r.useState({}),[N,m]=r.useState({}),C=[{id:"ai",label:"Inteligência Artificial",icon:D},{id:"business",label:"Regras de Negócio",icon:J},{id:"integrations",label:"Integrações",icon:Pe},{id:"security",label:"Segurança & Infra",icon:ue}];r.useEffect(()=>{i()},[]);const i=async()=>{try{g(!0);const a=await Se.getAll();console.log("[SystemConfig] Dados recebidos:",a),console.log("[SystemConfig] Primeiro item:",a[0]),S(a);const _={};a.forEach(I=>{_[I.key]=I.value}),d(_)}catch(a){console.error(a),$.error("Erro ao carregar configurações.")}finally{g(!1)}},y=async a=>{try{h(a);const _=n[a];await Se.update(a,_),$.success("Configuração atualizada com sucesso!")}catch(_){console.error(_);const I=_.message||"Falha desconhecida ao salvar.";$.error(`Erro: ${I}`)}finally{h(null)}},x=(a,_)=>{d(I=>({...I,[a]:_}))},E=a=>{m(_=>({..._,[a]:!_[a]}))},f=l.filter(a=>v==="business"?a.group_name==="business"||a.group_name==="general":v==="security"?a.group_name==="security"||a.group_name==="infra":a.group_name===v);return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-8 h-8 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-2 flex items-center gap-3",children:[e.jsx(le,{className:"w-6 h-6 text-emerald-500"}),"Configurações do Sistema"]}),e.jsx("p",{className:"text-slate-400",children:"Gerenciamento centralizado de variáveis globais e chaves de API."})]}),e.jsx("div",{className:"flex gap-4 border-b border-white/10 pb-4 overflow-x-auto",children:C.map(a=>e.jsxs("button",{onClick:()=>k(a.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all whitespace-nowrap
                            ${v===a.id?"bg-emerald-500/10 text-emerald-500 border border-emerald-500/20":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(a.icon,{className:"w-4 h-4"}),a.label]},a.id))}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[f.length===0&&e.jsx("div",{className:"text-center py-12 bg-white/5 rounded-2xl border border-dashed border-white/10 text-slate-500",children:"Nenhuma configuração encontrada para este grupo."}),f.map(a=>e.jsx("div",{className:"bg-white/5 border border-white/5 p-6 rounded-2xl group hover:border-emerald-500/20 transition-all",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:"text-sm font-bold text-white",children:a.key}),a.is_secret&&e.jsxs("span",{className:"px-2 py-0.5 bg-amber-500/10 border border-amber-500/20 text-amber-500 text-[10px] rounded font-bold uppercase tracking-wider flex items-center gap-1",children:[e.jsx(ye,{className:"w-3 h-3"}),"Segredo"]}),e.jsx("span",{className:"px-2 py-0.5 bg-slate-800 text-slate-400 text-[10px] rounded font-mono",children:a.type})]}),e.jsx("p",{className:"text-xs text-slate-400 max-w-xl",children:a.description||"Sem descrição."})]}),e.jsxs("div",{className:"flex items-start gap-4 flex-1 w-full max-w-lg",children:[e.jsx("div",{className:"relative flex-1",children:a.is_secret?e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:N[a.key]?"text":"password",value:n[a.key]||"",onChange:_=>x(a.key,_.target.value),placeholder:a.value?"(Inalterado)":"Digite o novo segredo...",className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:border-emerald-500/50 pr-10 font-mono"}),e.jsx("button",{onClick:()=>E(a.key),className:"absolute right-3 top-2.5 text-slate-500 hover:text-white transition-colors",children:N[a.key]?e.jsx(ft,{className:"w-4 h-4"}):e.jsx(ve,{className:"w-4 h-4"})})]}):a.type==="boolean"?e.jsxs("select",{value:String(n[a.key]),onChange:_=>x(a.key,_.target.value==="true"),className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:border-emerald-500/50",children:[e.jsx("option",{value:"true",children:"Verdadeiro (Ativado)"}),e.jsx("option",{value:"false",children:"Falso (Desativado)"})]}):e.jsx("input",{type:a.type==="number"?"number":"text",value:n[a.key]||"",onChange:_=>x(a.key,a.type==="number"?Number(_.target.value):_.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:border-emerald-500/50"})}),e.jsx("button",{onClick:()=>y(a.key),disabled:c===a.key,className:"p-2.5 bg-emerald-500 text-white rounded-xl hover:bg-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Salvar Alteração",children:c===a.key?e.jsx(ke,{className:"w-4 h-4 animate-spin"}):e.jsx(Re,{className:"w-4 h-4"})})]})]})},a.key))]})]})},Ut=()=>{const[l,S]=r.useState([]),[u,g]=r.useState(!0),[v,k]=r.useState(null),[c,h]=r.useState(null);r.useEffect(()=>{d()},[]);const n=async m=>{try{await oe.update(m.id,{is_active:!m.is_active}),$.success(`${m.name} ${m.is_active?"pausado":"ativado"} com sucesso!`),d(),(c==null?void 0:c.id)===m.id&&h({...m,is_active:!m.is_active})}catch{$.error("Erro ao alterar status do agente.")}},d=async()=>{try{g(!0);const m=await oe.getAll();S(m),m.length>0&&!c&&h(m[0])}catch(m){console.error(m),$.error("Erro ao carregar agentes.")}finally{g(!1)}},N=async()=>{if(c)try{k(c.id),await oe.update(c.id,{prompt_text:c.prompt_text,model_override:c.model_override,temperature:c.temperature}),$.success(`${c.name} atualizado com sucesso!`),await d()}catch(m){console.error(m),$.error("Falha ao salvar agente.")}finally{k(null)}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-8 h-8 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-2 flex items-center gap-3",children:[e.jsx(ne,{className:"w-6 h-6 text-emerald-500"}),"Gestão de Agentes de IA"]}),e.jsx("p",{className:"text-slate-400",children:"Controle total sobre o comportamento, modelos e prompts dos agentes do ecossistema."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-white/10 bg-white/5",children:e.jsx("h3",{className:"text-sm font-bold text-slate-300 uppercase tracking-wider",children:"Agentes Ativos"})}),e.jsx("div",{className:"p-2 space-y-1",children:l.map(m=>e.jsxs("button",{onClick:()=>h(m),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-all
                                        ${(c==null?void 0:c.id)===m.id?"bg-emerald-500/10 text-emerald-500 border border-emerald-500/20":"text-slate-400 hover:bg-white/5 hover:text-white"}`,children:[e.jsx(me,{className:"w-4 h-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm font-bold",children:m.name}),!m.is_active&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-bold bg-rose-500/10 text-rose-500 border border-rose-500/20 uppercase",children:"Pausado"})]}),e.jsx("div",{className:"text-[10px] opacity-60 font-mono",children:m.agent_slug})]})]},m.id))})]}),e.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/10 p-4 rounded-2xl space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-emerald-500 text-sm font-bold",children:[e.jsx(te,{className:"w-4 h-4"}),"Ambiente Seguro"]}),e.jsx("p",{className:"text-xs text-slate-400 leading-relaxed",children:"Alterações nos prompts entram em vigor imediatamente nas próximas requisições dos agentes."})]})]}),e.jsx("div",{className:"lg:col-span-8",children:c?e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl overflow-hidden flex flex-col h-full min-h-[600px]",children:[e.jsxs("div",{className:"p-6 border-b border-white/10 bg-white/5 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-1 flex items-center gap-3",children:[c.name,e.jsx("div",{className:`px-2 py-0.5 rounded textxs font-bold uppercase border ${c.is_active?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":"bg-rose-500/10 text-rose-500 border-rose-500/20"}`,children:c.is_active?"Ativo":"Pausado"})]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Configurações de Engine e Personalidade"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>n(c),className:`px-4 py-2 rounded-xl text-xs font-bold uppercase transition-all border ${c.is_active?"bg-rose-500/10 text-rose-500 border-rose-500/20 hover:bg-rose-500/20":"bg-emerald-500/10 text-emerald-500 border-emerald-500/20 hover:bg-emerald-500/20"}`,children:c.is_active?"Pausar Agente":"Ativar Agente"}),e.jsxs("button",{onClick:N,disabled:v===c.id,className:"flex items-center gap-2 px-6 py-2.5 bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl font-bold transition-all disabled:opacity-50",children:[v===c.id?e.jsx(ke,{className:"w-4 h-4 animate-spin"}):e.jsx(Re,{className:"w-4 h-4"}),"Salvar Alterações"]})]})]}),e.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6 bg-black/20",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[e.jsx(me,{className:"w-3 h-3"})," Modelo de IA (Override)"]}),e.jsxs("select",{value:c.model_override,onChange:m=>h({...c,model_override:m.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-2 text-white focus:outline-none focus:border-emerald-500/50",children:[e.jsx("option",{value:"gpt-4o",children:"GPT-4o (Alta Performance)"}),e.jsx("option",{value:"gpt-4o-mini",children:"GPT-4o Mini (Rápido/Econômico)"}),e.jsx("option",{value:"gpt-4-turbo",children:"GPT-4 Turbo"}),e.jsx("option",{value:"o1-preview",children:"OpenAI o1 Preview"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[e.jsx(St,{className:"w-3 h-3"})," Temperatura (",c.temperature,")"]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:c.temperature,onChange:m=>h({...c,temperature:parseFloat(m.target.value)}),className:"w-full accent-emerald-500"}),e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500",children:[e.jsx("span",{children:"PRECISO"}),e.jsx("span",{children:"CRIATIVO"})]})]})]}),e.jsxs("div",{className:"p-6 flex-1 flex flex-col space-y-4",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[e.jsx(xt,{className:"w-3 h-3"})," System Prompt (Instruções Base)"]}),e.jsx("textarea",{value:c.prompt_text,onChange:m=>h({...c,prompt_text:m.target.value}),placeholder:"Defina as instruções de sistema para este agente...",className:"flex-1 w-full bg-black/40 border border-white/10 rounded-2xl p-6 text-sm text-slate-300 focus:outline-none focus:border-emerald-500/50 font-mono leading-relaxed resize-none"}),c.agent_slug==="rag"&&e.jsx("div",{className:"px-4 py-2 bg-emerald-500/10 border border-emerald-500/20 rounded-xl",children:e.jsxs("p",{className:"text-[10px] text-emerald-500 font-bold",children:["💡 Variáveis dinâmicas aceitas: ","{{CONTEXT}}",", ","{{QUESTION}}"]})})]})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center bg-white/5 border border-dashed border-white/10 rounded-3xl p-12 text-slate-500",children:[e.jsx(ne,{className:"w-16 h-16 opacity-10 mb-4"}),e.jsx("p",{children:"Selecione um agente na lista lateral para configurar seu prompt."})]})})]})]})},Ft=()=>{const[l,S]=r.useState([]),[u,g]=r.useState(!1),[v,k]=r.useState({bank_name:"",account_number:"",iban:"",swift:"",holder_name:""}),c=async()=>{g(!0);try{const d=await fetch("/api/public/bank-accounts");d.ok&&S(await d.json())}catch(d){console.error(d)}g(!1)};r.useEffect(()=>{c()},[]);const h=async d=>{d.preventDefault();try{(await fetch("/api/admin/bank-accounts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify(v)})).ok&&(c(),k({bank_name:"",account_number:"",iban:"",swift:"",holder_name:""}),alert("Conta adicionada!"))}catch{alert("Erro ao adicionar")}},n=async d=>{if(confirm("Remover conta?"))try{await fetch(`/api/admin/bank-accounts/${d}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),c()}catch{alert("Erro ao remover")}};return e.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(H,{className:"w-6 h-6 text-teal-400"})," Gestão de Contas Bancárias"]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-[#0c0c0c] border border-white/5 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-sm font-bold text-white mb-4 uppercase tracking-widest",children:"Nova Conta"}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 font-bold uppercase mb-1 block",children:"Banco"}),e.jsx("input",{value:v.bank_name,onChange:d=>k({...v,bank_name:d.target.value}),placeholder:"Ex: Banco BAI",className:"w-full bg-[#111] border border-white/10 rounded-lg p-3 text-white text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 font-bold uppercase mb-1 block",children:"Titular"}),e.jsx("input",{value:v.holder_name,onChange:d=>k({...v,holder_name:d.target.value}),placeholder:"Nome do Titular",className:"w-full bg-[#111] border border-white/10 rounded-lg p-3 text-white text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 font-bold uppercase mb-1 block",children:"Número de Conta"}),e.jsx("input",{value:v.account_number,onChange:d=>k({...v,account_number:d.target.value}),placeholder:"123.456...",className:"w-full bg-[#111] border border-white/10 rounded-lg p-3 text-white text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 font-bold uppercase mb-1 block",children:"IBAN"}),e.jsx("input",{value:v.iban,onChange:d=>k({...v,iban:d.target.value}),placeholder:"AO06...",className:"w-full bg-[#111] border border-white/10 rounded-lg p-3 text-white text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 font-bold uppercase mb-1 block",children:"SWIFT (Opcional)"}),e.jsx("input",{value:v.swift,onChange:d=>k({...v,swift:d.target.value}),placeholder:"BAIAOA...",className:"w-full bg-[#111] border border-white/10 rounded-lg p-3 text-white text-sm"})]}),e.jsxs("button",{type:"submit",className:"w-full py-3 bg-teal-500 hover:bg-teal-400 text-black font-bold rounded-lg uppercase text-xs tracking-widest transition-colors flex items-center justify-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"})," Adicionar Conta"]})]})]}),e.jsx("div",{className:"lg:col-span-2 space-y-4",children:u?e.jsx("p",{className:"text-slate-500",children:"Carregando..."}):l.length===0?e.jsx("p",{className:"text-slate-500 italic",children:"Nenhuma conta cadastrada."}):l.map(d=>e.jsxs("div",{className:"bg-[#111] border border-white/5 rounded-xl p-5 flex justify-between items-center group hover:border-white/20 transition-colors",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-slate-500"}),e.jsx("h4",{className:"text-white font-bold",children:d.bank_name}),e.jsx("span",{className:"text-[10px] bg-emerald-500/10 text-emerald-400 px-2 py-0.5 rounded border border-emerald-500/20",children:"Ativo"})]}),e.jsx("p",{className:"text-sm text-slate-400",children:d.holder_name}),e.jsxs("div",{className:"flex gap-4 text-xs font-mono text-slate-500 mt-2",children:[e.jsxs("span",{children:["IBAN: ",d.iban]}),d.swift&&e.jsxs("span",{children:["SWIFT: ",d.swift]})]})]}),e.jsx("button",{onClick:()=>n(d.id),className:"p-2 text-slate-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:e.jsx(xe,{className:"w-5 h-5"})})]},d.id))})]})]})},Es=()=>{const[l,S]=r.useState("ADMIN_DASHBOARD"),u=()=>({ADMIN_DASHBOARD:"Visão Geral do SaaS",ADMIN_COMPANIES:"Gestão de Tenants",ADMIN_USERS:"Controle de Utilizadores",ADMIN_BILLING:"Faturação e Planos",ADMIN_BANK_ACCOUNTS:"Contas Bancárias",ADMIN_PAYMENTS:"Aprovação de Pagamentos",ADMIN_INFRA:"Estado da Infraestrutura",ADMIN_LOGS:"Logs de Auditoria Global",ADMIN_SECURITY:"Central de Segurança",ADMIN_SETTINGS:"Configurações de Sistema",ADMIN_AGENTS:"Gestão de Agentes de IA"})[l]||"Backoffice Administrativo",g=()=>{switch(l){case"ADMIN_DASHBOARD":return e.jsx(Tt,{onViewLogs:()=>S("ADMIN_LOGS")});case"ADMIN_COMPANIES":return e.jsx(Dt,{});case"ADMIN_USERS":return e.jsx(Lt,{});case"ADMIN_BILLING":return e.jsx(Mt,{});case"ADMIN_BANK_ACCOUNTS":return e.jsx(Ft,{});case"ADMIN_PAYMENTS":return e.jsx(Pt,{});case"ADMIN_LOGS":return e.jsx(Ot,{});case"ADMIN_INFRA":return e.jsx(Rt,{});case"ADMIN_SECURITY":return e.jsx($t,{});case"ADMIN_SETTINGS":return e.jsx(zt,{});case"ADMIN_AGENTS":return e.jsx(Ut,{});default:return e.jsx("div",{className:"p-20 text-center border-2 border-dashed border-white/5 rounded-3xl",children:e.jsxs("p",{className:"text-slate-500 font-medium",children:['Módulo "',l,'" em desenvolvimento.']})})}};return e.jsx(It,{currentView:l,onChangeView:S,title:u(),children:g()})};export{Es as default};
