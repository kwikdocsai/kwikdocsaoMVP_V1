import{d as O,a as U,r as d,j as e,Z as o,f as _,A as u}from"./index-DGClD9bb.js";import{n as f}from"./index-bLD8kxit.js";import{C as A}from"./circle-check-DoWkVmXl.js";import{C as S}from"./cpu-B96NsVyB.js";import{H as j}from"./hard-drive-B_Ra99W-.js";import{S as B}from"./shield-check-BmpD1UBV.js";import{S as I}from"./server-VgMOb8-r.js";import{U as P}from"./users-RKY9sje9.js";import{X as H}from"./x-DXSFMCis.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],b=O("rocket",Z),F={HardDrive:j,Server:I,Rocket:b,ShieldCheck:B,Zap:o},se=()=>{var v,y,k,C;const{selectedCompany:a,refreshData:z}=U(),[t,N]=d.useState(null),[n,E]=d.useState([]),[L,w]=d.useState(!0),[c,g]=d.useState(null),[l,x]=d.useState(null),[J,$]=d.useState("");d.useEffect(()=>{(async()=>{if(!a||a==="ALL"){w(!1);return}try{const r=localStorage.getItem("auth_token"),[i,m]=await Promise.all([fetch(`${u}/servers/status?companyId=${a.id}`,{headers:{Authorization:`Bearer ${r}`}}),fetch(`${u}/server-plans`,{headers:{Authorization:`Bearer ${r}`}})]);if(i.ok){const h=await i.json();N(h)}if(m.ok){const T=(await m.json()).map(p=>({...p,features:typeof p.features=="string"?JSON.parse(p.features):p.features}));E(T)}}catch(r){console.error("Failed to fetch server data",r),f.error("Erro ao carregar planos.")}finally{w(!1)}})()},[a]);const M=s=>{if(!a||a==="ALL"){f.error("Selecione uma empresa.");return}x(s),$("")},D=async s=>{g(s.slug);try{const r=localStorage.getItem("auth_token"),i=await fetch(`${u}/servers/activate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({serverType:s.slug,companyId:a.id})});if(!i.ok){const h=await i.json();throw new Error(h.error||"Falha na ativação")}const m=await i.json();N(m),await z(!0),f.success(`Servidor ${s.name} ativado!`),x(null)}catch(r){f.error(r.message)}finally{g(null)}},R=((v=n.find(s=>s.slug===(t==null?void 0:t.server_type)))==null?void 0:v.name)||(t==null?void 0:t.server_type);return L?e.jsx("div",{className:"p-10 text-center animate-pulse text-slate-500",children:"Carregando dados da infraestrutura..."}):!a||a==="ALL"?e.jsx("div",{className:"p-10 text-center text-slate-500",children:"Selecione uma empresa."}):e.jsxs("div",{className:"max-w-7xl mx-auto animate-in fade-in duration-500 space-y-8 pb-20 relative",children:[c&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-black/60 backdrop-blur-md animate-in fade-in",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 blur-[60px] rounded-full animate-pulse"}),e.jsx("div",{className:"w-20 h-20 border-4 border-emerald-500/20 border-t-emerald-500 rounded-full animate-spin relative z-10"}),e.jsx(o,{className:"w-8 h-8 text-emerald-400 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 animate-pulse"})]}),e.jsx("h2",{className:"text-xl font-bold text-white tracking-tight mb-2",children:"Provisionando Infraestrutura"}),e.jsxs("p",{className:"text-slate-400 text-sm animate-pulse",children:["Configurando instâncias e largura de banda dedicada para ",e.jsx("b",{children:a.name}),"..."]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 p-6 bg-[#0a0a0a] border border-white/5 rounded-2xl",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx(o,{className:"w-6 h-6 text-yellow-400 fill-current"}),"Servidores de Performance"]}),e.jsxs("p",{className:"text-slate-400 text-sm mt-1",children:["Empresa: ",e.jsx("span",{className:"text-white font-bold",children:a.name})]})]}),e.jsx("div",{className:"flex items-center gap-4 bg-white/5 px-6 py-3 rounded-xl border border-white/5",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider",children:"Saldo"}),e.jsxs("div",{className:"text-2xl font-black text-white",children:[a.credits," ",e.jsx("span",{className:"text-sm font-normal text-slate-400",children:"créditos"})]})]})})]}),t&&t.status==="ACTIVE"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-gradient-to-r from-emerald-900/20 to-emerald-900/5 border border-emerald-500/30 rounded-2xl p-6 flex flex-col md:flex-row items-center gap-6",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-500/20 rounded-full flex items-center justify-center text-emerald-400 shrink-0",children:e.jsx(A,{className:"w-8 h-8"})}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsxs("h3",{className:"text-xl font-bold text-white",children:["Servidor Ativo: ",R]}),e.jsxs("p",{className:"text-emerald-400/80 text-sm mb-4",children:["Operacional • ",t.monthly_cost===0?"Gratuito":`${t.monthly_cost} créditos/mês`]}),e.jsxs("div",{className:"flex flex-wrap gap-3 justify-center md:justify-start",children:[e.jsxs("span",{className:"px-3 py-1 bg-white/5 border border-white/10 rounded-full text-[10px] font-bold text-slate-300 flex items-center gap-1.5",children:[e.jsx(S,{className:"w-3 h-3"})," ",((y=n.find(s=>s.slug===t.server_type))==null?void 0:y.cpu_cores)||"Standard"]}),e.jsxs("span",{className:"px-3 py-1 bg-white/5 border border-white/10 rounded-full text-[10px] font-bold text-slate-300 flex items-center gap-1.5",children:[e.jsx(j,{className:"w-3 h-3"})," ",((k=n.find(s=>s.slug===t.server_type))==null?void 0:k.ram_gb)||"Standard"]}),e.jsxs("span",{className:"px-3 py-1 bg-white/5 border border-white/10 rounded-full text-[10px] font-bold text-slate-300 flex items-center gap-1.5",children:[e.jsx(b,{className:"w-3 h-3"})," ",((C=n.find(s=>s.slug===t.server_type))==null?void 0:C.analysis_time)||"2-5s"]})]})]})]}),e.jsxs("div",{className:"bg-[#0a0a0a] border border-white/5 rounded-2xl p-6",children:[e.jsxs("h4",{className:"text-xs font-black text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[e.jsx(_,{className:"w-3 h-3 text-emerald-500"}),"Consumo do Servidor"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400",children:"UPTIME"}),e.jsx("span",{className:"text-xs font-black text-white font-mono",children:"99.9%"})]}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400",children:"LATÊNCIA MÉDIA"}),e.jsx("span",{className:"text-xs font-black text-emerald-400 font-mono",children:"142ms"})]}),e.jsx("div",{className:"h-1 bg-white/5 rounded-full overflow-hidden mt-2",children:e.jsx("div",{className:"h-full bg-emerald-500 w-full animate-pulse opacity-50"})}),e.jsx("p",{className:"text-[9px] text-slate-600 italic",children:"Sincronizado via Webhook dedicado."})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:n.map(s=>{const r=(t==null?void 0:t.server_type)===s.slug&&(t==null?void 0:t.status)==="ACTIVE";if(s.slug==="TRIAL")return null;const i=F[s.icon]||I;return Array.isArray(s.features)&&s.features,e.jsxs("div",{className:`relative flex flex-col p-6 rounded-2xl border transition-all duration-300 group ${r?"bg-emerald-900/10 border-emerald-500/50":"bg-[#0a0a0a] border-white/5 hover:-translate-y-1"}`,children:[r&&e.jsx("div",{className:"absolute top-4 right-4 text-emerald-500",children:e.jsx(A,{className:"w-5 h-5 fill-current text-[#0a0a0a]"})}),e.jsx("div",{className:`w-12 h-12 rounded-xl bg-white/5 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform ${s.color||"text-cyan-400"}`,children:e.jsx(i,{className:"w-6 h-6"})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:s.name}),e.jsx("p",{className:"text-slate-400 text-sm mb-6 flex-1 line-clamp-2",children:s.description}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between text-[11px] text-slate-500 font-bold border-b border-white/5 pb-2",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-3 h-3 text-emerald-500"})," CPU"]}),e.jsx("span",{className:"text-white font-mono",children:s.cpu_cores})]}),e.jsxs("div",{className:"flex items-center justify-between text-[11px] text-slate-500 font-bold border-b border-white/5 pb-2",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-3 h-3 text-blue-500"})," RAM"]}),e.jsx("span",{className:"text-white font-mono",children:s.ram_gb})]}),e.jsxs("div",{className:"flex items-center justify-between text-[11px] text-slate-500 font-bold border-b border-white/5 pb-2",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-3 h-3 text-purple-500"})," ANÁLISE"]}),e.jsx("span",{className:"text-white font-mono",children:s.analysis_time})]}),e.jsxs("div",{className:"flex items-center justify-between text-[11px] text-slate-500 font-bold border-b border-white/5 pb-2",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-3 h-3 text-cyan-500"})," MEMBROS"]}),e.jsx("span",{className:"text-white font-mono",children:s.max_users})]}),e.jsxs("div",{className:"flex items-center justify-between text-[11px] text-slate-500 font-bold border-b border-white/5 pb-2",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-3 h-3 text-amber-500"})," CUSTO/ANÁLISE"]}),e.jsxs("span",{className:"text-white font-mono",children:[s.analysis_cost," CRÉD."]})]}),s.welcome_credits>0&&e.jsxs("div",{className:"py-2 px-3 bg-emerald-500/10 rounded-lg border border-emerald-500/20 flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-widest",children:"Bónus Inicial"}),e.jsxs("span",{className:"text-xs font-black text-emerald-400",children:["+",s.welcome_credits," CRÉD."]})]})]}),e.jsxs("div",{className:"mt-auto pt-6 border-t border-white/5",children:[e.jsxs("div",{className:"flex items-baseline gap-1 mb-4",children:[e.jsx("span",{className:"text-2xl font-black text-white",children:s.monthly_credits}),e.jsx("span",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider ml-1",children:"créditos / mês"})]}),e.jsx("button",{onClick:()=>M(s),disabled:r||c!==null,className:`w-full py-3 rounded-lg font-bold text-sm uppercase transition-all ${r?"bg-emerald-500/20 text-emerald-400 cursor-default":"bg-white/10 hover:bg-white/20 text-white shadow-lg shadow-white/5"}`,children:r?"Ativo":c===s.slug?"Ativando...":"Ativar Servidor"})]})]},s.slug)})}),l&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-[#111] border border-white/10 w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"p-6 border-b border-white/5 flex justify-between items-center bg-gradient-to-r from-purple-900/20 to-blue-900/20",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(b,{className:"w-5 h-5 text-purple-400"}),"Upgrade de Performance"]}),e.jsxs("p",{className:"text-slate-400 text-xs mt-1",children:["Migrando para ",e.jsx("span",{className:"text-white font-bold",children:l.name})]})]}),e.jsx("button",{onClick:()=>x(null),className:"p-2 hover:bg-white/10 rounded-full text-slate-400 hover:text-white transition-colors",children:e.jsx(H,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-emerald-500/10 rounded-lg border border-emerald-500/20",children:[e.jsx(o,{className:"w-5 h-5 text-emerald-400"}),e.jsxs("span",{className:"text-sm font-bold text-emerald-100",children:["Processamento Otimizado ",l.analysis_time]})]}),l.welcome_credits>0&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-purple-500/10 rounded-lg border border-purple-500/20",children:[e.jsx(o,{className:"w-5 h-5 text-purple-400"}),e.jsxs("span",{className:"text-sm font-bold text-purple-100",children:["Bónus de +",l.welcome_credits," Créditos"]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-500/10 rounded-lg border border-blue-500/20",children:[e.jsx(P,{className:"w-5 h-5 text-blue-400"}),e.jsxs("span",{className:"text-sm font-bold text-blue-100",children:["Suporte para ",l.max_users," Utilizadores"]})]})]}),e.jsxs("div",{className:"p-4 bg-[#050505] rounded-xl border border-white/5 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-400 text-xs",children:"Taxa de Manutenção:"}),e.jsxs("span",{className:"text-white font-bold text-sm tracking-tight",children:[l.monthly_credits," Créditos/Mês"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-400 text-xs",children:"Custo por Análise:"}),e.jsxs("span",{className:"text-white font-bold text-sm tracking-tight",children:[l.analysis_cost," Créditos"]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-t border-white/5 mt-2",children:[e.jsx("span",{className:"text-slate-400 text-xs",children:"Seu Saldo:"}),e.jsxs("span",{className:`font-bold text-sm ${a.credits>=l.monthly_credits?"text-emerald-400":"text-red-500"}`,children:[a.credits," Créditos"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs uppercase text-slate-500 font-bold mb-2",children:"Ativar para a empresa:"}),e.jsx("div",{className:"w-full bg-[#050505] border border-white/10 rounded-lg px-4 py-3 text-white font-bold",children:a.name})]})]}),e.jsxs("div",{className:"p-6 border-t border-white/5 bg-[#050505] flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>x(null),className:"px-4 py-2 text-slate-400 hover:text-white text-sm font-medium transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:()=>D(l),disabled:a.credits<l.monthly_credits||c!==null,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-500 hover:to-blue-500 text-white font-bold text-sm rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-purple-500/20",children:c===l.slug?"Processando...":"Confirmar e Ativar"})]})]})})]})};export{se as default};
