import{d as Se,r as o,a as qe,D as U,j as t,f as He,B as Xe,Z as ne,C as le,g as Je,F as Ze}from"./index-BvHaD_sX.js";import{C as Qe}from"./circle-x-y-swrfdo.js";import{O as Ye}from"./octagon-alert-CgRl9J2w.js";import{S as Ne}from"./shield-check-PqfTO4CK.js";import{C as et}from"./chevron-left-erhv2y9N.js";import{C as oe}from"./circle-check-UNf_WtsO.js";import{S as tt}from"./shield-alert-5lCwvKjF.js";import{T as at}from"./triangle-alert-DZRd9F7q.js";import{C as rt}from"./calculator-BeKwgU5F.js";import{F as st}from"./file-exclamation-point-DLiUL1v7.js";import{C as it}from"./chevron-up-DdL1n8mO.js";import{S as nt}from"./scan-line-04XmWw6T.js";import{I as lt}from"./info-CEZ8rZmQ.js";import{c as C,F as Z,G as ot,H as ct,I as F,K as dt,M as ut,N as Te,O as mt,P as pt,q as V,Q as xt,T as ft,U as ht,V as vt,s as Re,W as bt,X as gt,Y as yt,_ as jt,$ as Nt,a0 as At,h as Le,a1 as wt,a2 as ee,a3 as Pt,a4 as Et,a5 as It,r as ue,D as Me,A as _e,R as Ot,a6 as Dt,a7 as $e,m as H,a8 as Ct,n as me,L as q,Z as Ke,j as kt,w as St,J as Tt,a9 as Rt,x as Ae,aa as we,ab as Y,ac as ce,ad as Lt,ae as Mt,af as _t,ag as $t,ah as Kt,ai as Vt,aj as zt,y as Ft,ak as Gt,al as X,am as Pe,an as Bt,ao as Wt,ap as Ut,aq as qt,ar as Ht,as as Xt,at as Jt,au as Zt,B as Qt,E as Yt}from"./CategoricalChart-BJLN2_rr.js";import{S as ea}from"./ActiveShapeUtils-Dx_zOv3g.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],aa=Se("mouse-pointer-2",ta);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],sa=Se("square-pen",ra);var J=e=>null;J.displayName="Cell";var Ve=e=>e.graphicalItems.polarItems,ia=C([Z,ot],ct),te=C([Ve,F,ia],dt),na=C([te],ut),ae=C([na,Te],mt),la=C([ae,F,te],pt);C([ae,F,te],(e,a,r)=>r.length>0?e.flatMap(s=>r.flatMap(n=>{var c,u=V(s,(c=a.dataKey)!==null&&c!==void 0?c:n.dataKey);return{value:u,errorDomain:[]}})).filter(Boolean):(a==null?void 0:a.dataKey)!=null?e.map(s=>({value:V(s,a.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})));var Ee=()=>{},oa=C([ae,F,te,xt,Z],ft),ca=C([F,ht,vt,Ee,oa,Ee,Re,Z],bt),ze=C([F,Re,ae,la,gt,Z,ca],yt),da=C([ze,F,jt],Nt);C([F,ze,da,Z],At);function Ie(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function Oe(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Ie(Object(r),!0).forEach(function(s){ua(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function ua(e,a,r){return(a=ma(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function ma(e){var a=pa(e,"string");return typeof a=="symbol"?a:a+""}function pa(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var xa=(e,a)=>a,pe=C([Ve,xa],(e,a)=>e.filter(r=>r.type==="pie").find(r=>r.id===a)),fa=[],xe=(e,a,r)=>(r==null?void 0:r.length)===0?fa:r,Fe=C([Te,pe,xe],(e,a,r)=>{var{chartData:s}=e;if(a!=null){var n;if((a==null?void 0:a.data)!=null&&a.data.length>0?n=a.data:n=s,(!n||!n.length)&&r!=null&&(n=r.map(c=>Oe(Oe({},a.presentationProps),c.props))),n!=null)return n}}),ha=C([Fe,pe,xe],(e,a,r)=>{if(!(e==null||a==null))return e.map((s,n)=>{var c,u=V(s,a.nameKey,a.name),f;return r!=null&&(c=r[n])!==null&&c!==void 0&&(c=c.props)!==null&&c!==void 0&&c.fill?f=r[n].props.fill:typeof s=="object"&&s!=null&&"fill"in s?f=s.fill:f=a.fill,{value:Le(u,a.dataKey),color:f,payload:s,type:a.legendType}})}),va=C([Fe,pe,xe,wt],(e,a,r,s)=>{if(!(a==null||e==null))return za({offset:s,pieSettings:a,displayedData:e,cells:r})}),ba=(e,a,r)=>{var s=ee();return(n,c)=>u=>{e==null||e(n,c,u),s(Pt({activeIndex:String(c),activeDataKey:a,activeCoordinate:n.tooltipPosition,activeGraphicalItemId:r}))}},ga=e=>{var a=ee();return(r,s)=>n=>{e==null||e(r,s,n),a(Et())}},ya=(e,a,r)=>{var s=ee();return(n,c)=>u=>{e==null||e(n,c,u),s(It({activeIndex:String(c),activeDataKey:a,activeCoordinate:n.tooltipPosition,activeGraphicalItemId:r}))}},ja=["key"],Na=["onMouseEnter","onClick","onMouseLeave"],Aa=["id"],wa=["id"];function De(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function y(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?De(Object(r),!0).forEach(function(s){Pa(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Pa(e,a,r){return(a=Ea(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function Ea(e){var a=Ia(e,"string");return typeof a=="symbol"?a:a+""}function Ia(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function z(){return z=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},z.apply(null,arguments)}function re(e,a){if(e==null)return{};var r,s,n=Oa(e,a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)r=c[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Oa(e,a){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(a.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function Da(e){var a=o.useMemo(()=>$e(e.children,J),[e.children]),r=H(s=>ha(s,e.id,a));return r==null?null:o.createElement(Ct,{legendPayload:r})}var Ca=o.memo(e=>{var{dataKey:a,nameKey:r,sectors:s,stroke:n,strokeWidth:c,fill:u,name:f,hide:v,tooltipType:b,id:j}=e,w={dataDefinedOnItem:s.map(m=>m.tooltipPayload),positions:s.map(m=>m.tooltipPosition),settings:{stroke:n,strokeWidth:c,fill:u,dataKey:a,nameKey:r,name:Le(f,a),hide:v,type:b,color:u,unit:"",graphicalItemId:j}};return o.createElement(kt,{tooltipEntrySettings:w})}),ka=(e,a)=>e>a?"start":e<a?"end":"middle",Sa=(e,a,r)=>typeof a=="function"?X(a(e),r,r*.8):X(a,r,r*.8),Ta=(e,a,r)=>{var{top:s,left:n,width:c,height:u}=a,f=Gt(c,u),v=n+X(e.cx,c,c/2),b=s+X(e.cy,u,u/2),j=X(e.innerRadius,f,0),w=Sa(r,e.outerRadius,f),m=e.maxRadius||Math.sqrt(c*c+u*u)/2;return{cx:v,cy:b,innerRadius:j,outerRadius:w,maxRadius:m}},Ra=(e,a)=>{var r=Y(a-e),s=Math.min(Math.abs(a-e),360);return r*s};function La(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Ma=(e,a)=>{if(o.isValidElement(e))return o.cloneElement(e,a);if(typeof e=="function")return e(a);var r=me("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:s}=a,n=re(a,ja);return o.createElement(Bt,z({},n,{type:"linear",className:r}))},_a=(e,a,r)=>{if(o.isValidElement(e))return o.cloneElement(e,a);var s=r;if(typeof e=="function"&&(s=e(a),o.isValidElement(s)))return s;var n=me("recharts-pie-label-text",La(e));return o.createElement(Wt,z({},a,{alignmentBaseline:"middle",className:n}),s)};function $a(e){var{sectors:a,props:r,showLabels:s}=e,{label:n,labelLine:c,dataKey:u}=r;if(!s||!n||!a)return null;var f=_e(r),v=Pe(n),b=Pe(c),j=typeof n=="object"&&"offsetRadius"in n&&typeof n.offsetRadius=="number"&&n.offsetRadius||20,w=a.map((m,E)=>{var I=(m.startAngle+m.endAngle)/2,k=ce(m.cx,m.cy,m.outerRadius+j,I),O=y(y(y(y({},f),m),{},{stroke:"none"},v),{},{index:E,textAnchor:ka(k.x,m.cx)},k),h=y(y(y(y({},f),m),{},{fill:"none",stroke:m.fill},b),{},{index:E,points:[ce(m.cx,m.cy,m.outerRadius,I),k],key:"line"});return o.createElement(Ke,{zIndex:Me.label,key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(E)},o.createElement(q,null,c&&Ma(c,h),_a(n,O,V(m,u))))});return o.createElement(q,{className:"recharts-pie-labels"},w)}function Ka(e){var{sectors:a,props:r,showLabels:s}=e,{label:n}=r;return typeof n=="object"&&n!=null&&"position"in n?o.createElement(Ft,{label:n}):o.createElement($a,{sectors:a,props:r,showLabels:s})}function Va(e){var{sectors:a,activeShape:r,inactiveShape:s,allOtherPieProps:n,shape:c,id:u}=e,f=H(Mt),v=H(_t),b=H($t),{onMouseEnter:j,onClick:w,onMouseLeave:m}=n,E=re(n,Na),I=ba(j,n.dataKey,u),k=ga(m),O=ya(w,n.dataKey,u);return a==null||a.length===0?null:o.createElement(o.Fragment,null,a.map((h,S)=>{if((h==null?void 0:h.startAngle)===0&&(h==null?void 0:h.endAngle)===0&&a.length!==1)return null;var $=b==null||b===u,L=String(S)===f&&(v==null||n.dataKey===v)&&$,T=f?s:null,g=r&&L?r:T,N=y(y({},h),{},{stroke:h.stroke,tabIndex:-1,[Vt]:S,[Kt]:u});return o.createElement(q,z({key:"sector-".concat(h==null?void 0:h.startAngle,"-").concat(h==null?void 0:h.endAngle,"-").concat(h.midAngle,"-").concat(S),tabIndex:-1,className:"recharts-pie-sector"},zt(E,h,S),{onMouseEnter:I(h,S),onMouseLeave:k(h,S),onClick:O(h,S)}),o.createElement(ea,z({option:c??g,index:S,shapeType:"sector",isActive:L},N)))}))}function za(e){var a,{pieSettings:r,displayedData:s,cells:n,offset:c}=e,{cornerRadius:u,startAngle:f,endAngle:v,dataKey:b,nameKey:j,tooltipType:w}=r,m=Math.abs(r.minAngle),E=Ra(f,v),I=Math.abs(E),k=s.length<=1?0:(a=r.paddingAngle)!==null&&a!==void 0?a:0,O=s.filter(g=>V(g,b,0)!==0).length,h=(I>=360?O:O-1)*k,S=I-O*m-h,$=s.reduce((g,N)=>{var D=V(N,b,0);return g+(we(D)?D:0)},0),L;if($>0){var T;L=s.map((g,N)=>{var D=V(g,b,0),K=V(g,j,N),R=Ta(r,c,g),G=(we(D)?D:0)/$,A,M=y(y({},g),n&&n[N]&&n[N].props);N?A=T.endAngle+Y(E)*k*(D!==0?1:0):A=f;var P=A+Y(E)*((D!==0?m:0)+G*S),W=(A+P)/2,B=(R.innerRadius+R.outerRadius)/2,se=[{name:K,value:D,payload:M,dataKey:b,type:w,graphicalItemId:r.id}],ie=ce(R.cx,R.cy,B,W);return T=y(y(y(y({},r.presentationProps),{},{percent:G,cornerRadius:typeof u=="string"?parseFloat(u):u,name:K,tooltipPayload:se,midAngle:W,middleRadius:B,tooltipPosition:ie},M),R),{},{value:D,dataKey:b,startAngle:A,endAngle:P,payload:M,paddingAngle:Y(E)*k}),T})}return L}function Fa(e){var{showLabels:a,sectors:r,children:s}=e,n=o.useMemo(()=>!a||!r?[]:r.map(c=>({value:c.value,payload:c.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:c.cx,cy:c.cy,innerRadius:c.innerRadius,outerRadius:c.outerRadius,startAngle:c.startAngle,endAngle:c.endAngle,clockWise:!1},fill:c.fill})),[r,a]);return o.createElement(Lt,{value:a?n:void 0},s)}function Ga(e){var{props:a,previousSectorsRef:r,id:s}=e,{sectors:n,isAnimationActive:c,animationBegin:u,animationDuration:f,animationEasing:v,activeShape:b,inactiveShape:j,onAnimationStart:w,onAnimationEnd:m}=a,E=St(a,"recharts-pie-"),I=r.current,[k,O]=o.useState(!1),h=o.useCallback(()=>{typeof m=="function"&&m(),O(!1)},[m]),S=o.useCallback(()=>{typeof w=="function"&&w(),O(!0)},[w]);return o.createElement(Fa,{showLabels:!k,sectors:n},o.createElement(Tt,{animationId:E,begin:u,duration:f,isActive:c,easing:v,onAnimationStart:S,onAnimationEnd:h,key:E},$=>{var L=[],T=n&&n[0],g=T==null?void 0:T.startAngle;return n==null||n.forEach((N,D)=>{var K=I&&I[D],R=D>0?Rt(N,"paddingAngle",0):0;if(K){var G=Ae(K.endAngle-K.startAngle,N.endAngle-N.startAngle,$),A=y(y({},N),{},{startAngle:g+R,endAngle:g+G+R});L.push(A),g=A.endAngle}else{var{endAngle:M,startAngle:P}=N,W=Ae(0,M-P,$),B=y(y({},N),{},{startAngle:g+R,endAngle:g+W+R});L.push(B),g=B.endAngle}}),r.current=L,o.createElement(q,null,o.createElement(Va,{sectors:L,activeShape:b,inactiveShape:j,allOtherPieProps:a,shape:a.shape,id:s}))}),o.createElement(Ka,{showLabels:!k,sectors:n,props:a}),a.children)}var Ba={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Me.area};function Wa(e){var{id:a}=e,r=re(e,Aa),{hide:s,className:n,rootTabIndex:c}=e,u=o.useMemo(()=>$e(e.children,J),[e.children]),f=H(j=>va(j,a,u)),v=o.useRef(null),b=me("recharts-pie",n);return s||f==null?(v.current=null,o.createElement(q,{tabIndex:c,className:b})):o.createElement(Ke,{zIndex:e.zIndex},o.createElement(Ca,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:f,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:a}),o.createElement(q,{tabIndex:c,className:b},o.createElement(Ga,{props:y(y({},r),{},{sectors:f}),previousSectorsRef:v,id:a})))}function Ge(e){var a=ue(e,Ba),{id:r}=a,s=re(a,wa),n=_e(s);return o.createElement(Ot,{id:r,type:"pie"},c=>o.createElement(o.Fragment,null,o.createElement(Dt,{type:"pie",id:c,data:s.data,dataKey:s.dataKey,hide:s.hide,angleAxisId:0,radiusAxisId:0,name:s.name,nameKey:s.nameKey,tooltipType:s.tooltipType,legendType:s.legendType,fill:s.fill,cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,paddingAngle:s.paddingAngle,minAngle:s.minAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius,cornerRadius:s.cornerRadius,presentationProps:n,maxRadius:a.maxRadius}),o.createElement(Da,z({},s,{id:c})),o.createElement(Wa,z({},s,{id:c}))))}Ge.displayName="Pie";function Ua(e){var a=ee();return o.useEffect(()=>{a(Ut(e))},[a,e]),null}var qa=["layout"];function de(){return de=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},de.apply(null,arguments)}function Ha(e,a){if(e==null)return{};var r,s,n=Xa(e,a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)r=c[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Xa(e,a){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(a.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var Ja={top:5,right:5,bottom:5,left:5},Be={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Ja,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Za=o.forwardRef(function(a,r){var s,n=ue(a.categoricalChartProps,Be),{layout:c}=n,u=Ha(n,qa),{chartName:f,defaultTooltipEventType:v,validateTooltipEventTypes:b,tooltipPayloadSearcher:j}=a,w={chartName:f,defaultTooltipEventType:v,validateTooltipEventTypes:b,tooltipPayloadSearcher:j,eventEmitter:void 0};return o.createElement(qt,{preloadedState:{options:w},reduxStoreName:(s=n.id)!==null&&s!==void 0?s:f},o.createElement(Ht,{chartData:n.data}),o.createElement(Xt,{layout:c,margin:n.margin}),o.createElement(Jt,{baseValue:void 0,accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className,reverseStackOrder:n.reverseStackOrder}),o.createElement(Ua,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),o.createElement(Zt,de({},u,{ref:r})))});function Ce(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function ke(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Ce(Object(r),!0).forEach(function(s){Qa(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Qa(e,a,r){return(a=Ya(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function Ya(e){var a=er(e,"string");return typeof a=="symbol"?a:a+""}function er(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var tr=["item"],ar=ke(ke({},Be),{},{layout:"centric",startAngle:0,endAngle:360}),rr=o.forwardRef((e,a)=>{var r=ue(e,ar);return o.createElement(Za,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:tr,tooltipPayloadSearcher:Qt,categoricalChartProps:r,ref:a})});const Nr=({isAccountingMode:e=!1})=>{const{documents:a,isAccountingMode:r,selectCompany:s,resolveError:n,setSelectedDocument:c}=qe(),[u,f]=o.useState(null),[v,b]=o.useState("ALL"),[j,w]=o.useState("ALL"),[m,E]=o.useState(""),[I,k]=o.useState(new Set),[O,h]=o.useState(new Set),[S,$]=o.useState(null),[L,T]=o.useState(!1),[g,N]=o.useState(""),[D,K]=o.useState(null),[R,G]=o.useState(!1),A=o.useMemo(()=>{const i=[],p=a.filter(d=>d.status===U.COMPLETED||d.status===U.ERROR||d.status===U.APROVADO||d.status===U.REJEITADO),l=new Map;return p.forEach(d=>{var fe,he,ve,be,ge,ye;const x=d.data||{},_=d.rawData||{};if(d.status===U.ERROR){i.push({id:`err-sys-${d.id}`,docId:d.id,docName:d.fileName,companyName:d.companyName||"N/A",companyNif:x.nif||"N/A",companyStatus:"CRITICO",errorTitle:"Erro no Processamento IA",description:"Ocorreu um erro técnico ao analisar este documento. Recomendamos reprocessar.",suggestion:"Tente reprocessar o documento ou verificar a conexão com o servidor.",priority:"ALTA",date:new Date(d.uploadDate).toLocaleDateString("pt-AO"),type:"COMPLIANCE",value:0});return}if(((x.fiscal_validation||_.fiscal_validation)==="REJEITADO"||d.status===U.REJEITADO)&&i.push({id:`err-rej-${d.id}`,docId:d.id,docName:x.merchantName||d.fileName,companyName:d.companyName||"N/A",companyNif:((fe=x.issuer_data)==null?void 0:fe.nif)||"N/A",companyStatus:"CRITICO",errorTitle:"Documento Rejeitado pela IA",description:x.justification||"A Inteligência Artificial identificou inconsistências críticas que invalidam este documento para fins fiscais.",suggestion:((he=x.sugestoes_correcao)==null?void 0:he[0])||"O documento deve ser revisado manualmente ou substituído por uma via válida.",priority:"ALTA",date:new Date(d.uploadDate).toLocaleDateString("pt-AO"),type:"COMPLIANCE",value:x.totalAmount||0}),!x.risk_accepted){const Q=`${(ve=x.merchantName)==null?void 0:ve.toLowerCase()}|${x.date}|${x.totalAmount}`;l.has(Q)?i.push({id:`err-dup-${d.id}`,docId:d.id,docName:x.merchantName||d.fileName,companyName:d.companyName||"N/A",companyNif:((be=x.issuer_data)==null?void 0:be.nif)||"N/A",companyStatus:"ESTAVEL",errorTitle:"Duplicidade Detectada",description:"Identificamos outro documento com o mesmo fornecedor, data e valor em sua base de dados.",suggestion:"Arquive este documento como duplicado para evitar lançamento duplo no SAFT.",priority:"ALTA",date:new Date(d.uploadDate).toLocaleDateString("pt-AO"),type:"DUPLICATE",value:x.totalAmount||0}):l.set(Q,[d.id])}if((((ge=_.analise_matematica)==null?void 0:ge.coerencia_matematica)==="INCOERENTE"||x.mathematical_coherence&&x.mathematical_coherence.includes("INCOERENTE"))&&i.push({id:`err-math-${d.id}`,docId:d.id,docName:x.merchantName||d.fileName,companyName:d.companyName||"N/A",companyNif:((ye=x.issuer_data)==null?void 0:ye.nif)||"N/A",errorTitle:"Incoerência Matemática",description:"A soma dos itens não corresponde ao total declarado no documento.",suggestion:"Verifique se existem taxas ocultas ou erros de OCR nos valores das linhas.",priority:"MEDIA",date:new Date(d.uploadDate).toLocaleDateString("pt-AO"),type:"TAX_RATE",value:x.totalAmount||0}),x.date){const Q=new Date(x.date),je=Math.ceil(Math.abs(new Date().getTime()-Q.getTime())/(1e3*60*60*24));je>90&&i.push({id:`err-date-${d.id}`,docId:d.id,docName:x.merchantName||d.fileName,companyName:d.companyName||"N/A",errorTitle:"Prazo CIVA Excedido",description:`Documento emitido há ${je} dias. O prazo legal para dedução do IVA pode ter expirado.`,suggestion:"Consulte o Art. 18 do CIVA ou aceite o custo sem dedução de imposto.",priority:"MEDIA",date:new Date(d.uploadDate).toLocaleDateString("pt-AO"),type:"COMPLIANCE",value:x.totalAmount||0})}}),i},[a]),M=o.useMemo(()=>{let i=A;if(r&&u&&(i=i.filter(l=>l.companyName===u)),m){const l=m.toLowerCase();i=i.filter(d=>d.docName.toLowerCase().includes(l)||d.errorTitle.toLowerCase().includes(l)||d.companyName.toLowerCase().includes(l))}v!=="ALL"&&(v==="DATE"?i=i.filter(l=>l.errorTitle.includes("Prazo")||l.errorTitle.includes("Data")):i=i.filter(l=>l.type===v)),j!=="ALL"&&(i=i.filter(l=>l.priority===j));const p={};return i.forEach(l=>{const d=`${l.companyName}-${l.errorTitle}`;p[d]||(p[d]={key:d,title:l.errorTitle,company:l.companyName,nif:l.companyNif||"N/A",companyStatus:l.companyStatus||"ESTAVEL",count:0,totalValue:0,type:l.type,priority:l.priority,description:l.description,suggestion:l.suggestion,items:[]}),p[d].count++,p[d].totalValue+=l.value,p[d].items.push(l)}),Object.values(p).sort((l,d)=>l.priority==="ALTA"&&d.priority!=="ALTA"?-1:d.priority==="ALTA"&&l.priority!=="ALTA"?1:d.count-l.count)},[A,r,u,v,j,m]),P=o.useMemo(()=>{const i=A.reduce((x,_)=>x+_.value,0),p=A.filter(x=>x.priority==="ALTA").length,l=a.length||1,d=Math.max(0,Math.min(100,100-A.length/l*100));return{totalRiskValue:i,criticalCount:p,healthScore:d,totalErrors:A.length}},[A,a.length]),W=o.useMemo(()=>{const i={};return a.forEach(p=>{const l=p.companyName||"N/A";i[l]||(i[l]={name:l,totalDocs:0,errors:0,critical:0,valueAtRisk:0}),i[l].totalDocs++}),A.forEach(p=>{const l=p.companyName||"Empresa Desconhecida";i[l]||(i[l]={name:l,totalDocs:0,errors:0,critical:0,valueAtRisk:0}),i[l].errors++,i[l].valueAtRisk+=p.value,p.priority==="ALTA"&&i[l].critical++}),Object.values(i).sort((p,l)=>l.critical-p.critical)},[a,A]),B=i=>{const p=new Set(I);p.has(i)?p.delete(i):p.add(i),k(p)},se=async(i,p,l)=>{{K({key:i,action:p,items:l}),T(!0),N("");return}},ie=async()=>{if(!(!D||!g.trim())){G(!0);try{const{key:i,action:p,items:l,isSingle:d}=D,x=new Set(O);x.add(i),h(x),T(!1),await new Promise(_=>setTimeout(_,600));for(const _ of l)await n(_.docId,p,g);K(null)}catch(i){console.error("Failed to resolve:",i)}finally{G(!1)}}},We=(i,p)=>{K({key:`item-${i.id}`,action:p,items:[i],isSingle:!0}),T(!0),N("")},Ue=()=>t.jsxs("div",{className:"relative w-32 h-32",children:[t.jsx(Yt,{width:"100%",height:"100%",children:t.jsx(rr,{children:t.jsxs(Ge,{data:[{value:P.healthScore},{value:100-P.healthScore}],cx:"50%",cy:"50%",innerRadius:45,outerRadius:55,startAngle:90,endAngle:-270,dataKey:"value",stroke:"none",cornerRadius:10,children:[t.jsx(J,{fill:P.healthScore>80?"#10b981":P.healthScore>50?"#f59e0b":"#ef4444"}),t.jsx(J,{fill:"#1a1a1a"})]})})}),t.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[t.jsxs("span",{className:`text-2xl font-bold tracking-tighter ${P.healthScore>80?"text-emerald-400":P.healthScore>50?"text-amber-400":"text-red-400"}`,children:[Math.round(P.healthScore),"%"]}),t.jsx("span",{className:"text-[8px] font-bold text-slate-500 uppercase tracking-widest",children:"Health"})]})]});return r&&!u?t.jsxs("div",{className:"max-w-7xl mx-auto animate-in fade-in slide-in-from-bottom-4 duration-500 space-y-8",children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-[#0c0c0c] border border-white/[0.03] rounded-[32px] p-6 relative overflow-hidden flex items-center justify-between",children:[t.jsxs("div",{className:"z-10",children:[t.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:"Compliance Global"}),t.jsx("p",{className:"text-slate-400 text-xs max-w-[150px]",children:"Média de saúde fiscal da carteira de clientes."}),t.jsx("div",{className:"mt-4 flex gap-2",children:t.jsxs("span",{className:"px-2 py-1 rounded bg-white/5 border border-white/5 text-[10px] text-slate-300 font-mono",children:[a.length," Docs"]})})]}),t.jsx(Ue,{})]}),t.jsxs("div",{className:"bg-[#0c0c0c] border border-white/[0.03] rounded-[32px] p-6 relative overflow-hidden flex flex-col justify-center",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{className:"p-1.5 bg-red-500/10 rounded-lg text-red-400 animate-pulse",children:t.jsx(He,{className:"w-4 h-4"})}),t.jsx("span",{className:"text-[10px] font-bold text-red-400 uppercase tracking-widest",children:"Risco Financeiro Estimado"})]}),t.jsxs("div",{className:"text-4xl font-bold text-white tracking-tighter font-mono",children:["Kz ",(P.totalRiskValue/1e6).toFixed(1),"M"]}),t.jsx("p",{className:"text-slate-500 text-xs mt-2",children:"Valor acumulado em documentos com impedimento fiscal ou erros."}),t.jsx("div",{className:"absolute -bottom-10 -right-10 w-40 h-40 bg-red-500/5 blur-[60px] rounded-full pointer-events-none"})]}),t.jsxs("div",{className:"bg-[#0c0c0c] border border-white/[0.03] rounded-[32px] p-6 flex flex-col justify-center relative overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-white font-bold",children:"Diagnóstico Rápido"}),t.jsx("span",{className:"text-[10px] font-bold bg-white/5 px-2 py-1 rounded text-slate-400",children:"AGORA"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center text-xs",children:[t.jsxs("span",{className:"text-slate-400 flex items-center gap-2",children:[t.jsx(Qe,{className:"w-3 h-3 text-red-500"})," Críticos"]}),t.jsx("span",{className:"text-white font-bold",children:P.criticalCount})]}),t.jsx("div",{className:"w-full bg-white/5 h-1.5 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-red-500",style:{width:`${P.criticalCount/P.totalErrors*100}%`}})}),t.jsxs("p",{className:"text-[10px] text-slate-500 text-right pt-1",children:[P.totalErrors," inconsistências totais detectadas."]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"h-px bg-white/10 flex-1"}),t.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Mapa de Ameaças (Heatmap)"}),t.jsx("div",{className:"h-px bg-white/10 flex-1"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:W.map(i=>{const p=i.totalDocs>0?i.errors/i.totalDocs*100:0,l=i.critical>0;return t.jsxs("div",{onClick:()=>f(i.name),className:`
                                    relative overflow-hidden rounded-[24px] p-6 cursor-pointer transition-all duration-500 group
                                    ${l?"bg-[#0f0505] border border-red-500/30 hover:border-red-500/60 shadow-[0_0_40px_rgba(220,38,38,0.1)]":"bg-[#0c0c0c] border border-white/5 hover:border-emerald-500/30 hover:bg-[#0c110c]"}
                                `,children:[l&&t.jsx("div",{className:"absolute inset-0 bg-red-500/5 animate-[pulse_3s_ease-in-out_infinite] pointer-events-none"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex justify-between items-start mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center text-slate-300 border shadow-inner ${l?"bg-red-950/20 border-red-500/20":"bg-[#151515] border-white/5"}`,children:t.jsx(Xe,{className:`w-5 h-5 ${l?"text-red-400":"text-slate-400"}`})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-white text-sm truncate max-w-[150px]",children:i.name}),t.jsxs("p",{className:"text-[10px] text-slate-500 font-mono",children:["NIF: ",i.nif]})]})]}),l?t.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded bg-red-500/10 border border-red-500/20 text-[9px] font-bold text-red-400 uppercase tracking-wider animate-pulse",children:[t.jsx(Ye,{className:"w-3 h-3"})," Crítico"]}):t.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded bg-emerald-500/10 border border-emerald-500/20 text-[9px] font-bold text-emerald-400 uppercase tracking-wider",children:[t.jsx(Ne,{className:"w-3 h-3"})," Estável"]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-end",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-bold",children:"Risco Acumulado"}),t.jsxs("p",{className:`text-xl font-bold font-mono tracking-tight ${l?"text-white":"text-slate-300"}`,children:["Kz ",(i.valueAtRisk/1e3).toFixed(0),"k"]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:`text-2xl font-bold ${l?"text-red-500":"text-slate-500"}`,children:i.errors}),t.jsxs("p",{className:"text-[9px] text-slate-600 uppercase font-bold",children:["Erros / ",i.totalDocs," Docs"]})]})]}),t.jsx("div",{className:"relative w-full h-1.5 bg-[#1a1a1a] rounded-full overflow-hidden",children:t.jsx("div",{className:`absolute left-0 top-0 bottom-0 rounded-full transition-all duration-500 ${l?"bg-red-500":"bg-emerald-500"}`,style:{width:`${p}%`}})}),t.jsxs("div",{className:"flex justify-between text-[9px] font-bold uppercase text-slate-600",children:[t.jsx("span",{children:"Docs Pendentes"}),t.jsxs("span",{children:[Math.round(p),"% Taxa de Erro"]})]})]})]})]},i.name)})})]}):t.jsxs("div",{className:"max-w-5xl mx-auto animate-in fade-in slide-in-from-bottom-4 duration-500 space-y-8 relative",children:[r&&u&&t.jsxs("button",{onClick:()=>f(null),className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors text-xs font-bold uppercase tracking-widest group",children:[t.jsx("div",{className:"p-1 rounded-full bg-white/5 group-hover:bg-white/10",children:t.jsx(et,{className:"w-3 h-3"})}),"Voltar ao Mapa de Risco"]}),M.length>0&&t.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/20 to-blue-900/20 border border-cyan-500/20 rounded-[24px] p-6 relative overflow-hidden flex flex-col md:flex-row gap-6 items-center",children:[t.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-cyan-500/10 blur-[80px] rounded-full pointer-events-none"}),t.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-cyan-500/10 flex items-center justify-center text-cyan-400 border border-cyan-500/20 animate-pulse",children:t.jsx(ne,{className:"w-6 h-6 fill-current"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-white text-lg",children:"Insights da Inteligência Artificial"}),t.jsxs("p",{className:"text-slate-400 text-sm leading-snug max-w-lg",children:["Detectamos que ",t.jsxs("strong",{className:"text-cyan-400",children:[Math.round(M.filter(i=>i.type==="COMPLIANCE").length/Math.max(1,M.length)*100),"%"]})," dos problemas são relacionados a documentos expirados ou limites de data. Recomenda-se auditoria nos prazos de submissão."]})]})]}),t.jsx("div",{className:"ml-auto flex gap-3 relative z-10",children:t.jsx("button",{className:"px-4 py-2 bg-cyan-500 hover:bg-cyan-400 text-black rounded-lg text-xs font-bold uppercase tracking-wide transition-all shadow-lg shadow-cyan-500/20",children:"Gerar Relatório IA"})})]}),t.jsxs("div",{className:"sticky top-4 z-40 bg-[#0a0b10]/90 backdrop-blur-xl border border-white/10 rounded-2xl p-2 flex flex-col md:flex-row gap-3 shadow-2xl items-center",children:[t.jsxs("div",{className:"flex flex-1 gap-2 overflow-x-auto w-full md:w-auto pb-2 md:pb-0 px-1 custom-scrollbar",children:[t.jsxs("div",{className:"relative group",children:[t.jsxs("select",{value:v,onChange:i=>b(i.target.value),className:"bg-[#151515] hover:bg-[#1a1a1a] text-white text-xs font-bold uppercase tracking-wide py-2.5 pl-4 pr-8 rounded-xl border border-white/10 appearance-none cursor-pointer focus:outline-none focus:border-cyan-500 transition-colors",children:[t.jsx("option",{value:"ALL",children:"Tipo: Todos"}),t.jsx("option",{value:"DUPLICATE",children:"Duplicidade"}),t.jsx("option",{value:"TAX_RATE",children:"Taxa de Câmbio/IVA"}),t.jsx("option",{value:"COMPLIANCE",children:"NIF / Compliance"}),t.jsx("option",{value:"DATE",children:"Prazos / Data"})]}),t.jsx(le,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-3 h-3 text-slate-500 pointer-events-none"})]}),t.jsxs("div",{className:"relative group",children:[t.jsxs("select",{value:j,onChange:i=>w(i.target.value),className:"bg-[#151515] hover:bg-[#1a1a1a] text-white text-xs font-bold uppercase tracking-wide py-2.5 pl-4 pr-8 rounded-xl border border-white/10 appearance-none cursor-pointer focus:outline-none focus:border-cyan-500 transition-colors",children:[t.jsx("option",{value:"ALL",children:"Prioridade: Todas"}),t.jsx("option",{value:"ALTA",children:"Alta (Crítico)"}),t.jsx("option",{value:"MEDIA",children:"Média (Atenção)"}),t.jsx("option",{value:"BAIXA",children:"Baixa (Info)"})]}),t.jsx(le,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-3 h-3 text-slate-500 pointer-events-none"})]})]}),t.jsxs("div",{className:"relative w-full md:w-64",children:[t.jsx(Je,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-600 w-3.5 h-3.5"}),t.jsx("input",{type:"text",value:m,onChange:i=>E(i.target.value),placeholder:"Filtrar por nome ou ID...",className:"w-full bg-[#050505] border border-white/5 rounded-xl pl-9 pr-4 py-2.5 text-xs font-medium text-white focus:outline-none focus:border-cyan-500/50 transition-all placeholder-slate-600"})]})]}),t.jsx("div",{className:"space-y-4",children:M.filter(i=>!O.has(i.key)).length===0&&M.length===0?t.jsxs("div",{className:"text-center py-20 bg-[#080808] rounded-[32px] border border-white/5 border-dashed",children:[t.jsx(oe,{className:"w-16 h-16 text-emerald-500 mx-auto mb-4"}),t.jsx("h3",{className:"text-white font-bold text-lg",children:"Sistema Limpo"}),t.jsx("p",{className:"text-slate-400 text-sm",children:"Nenhuma inconsistência encontrada para este filtro."})]}):M.map(i=>{const p=O.has(i.key);return t.jsxs("div",{className:`group bg-[#0c0c0c] border border-white/[0.04] rounded-[24px] hover:border-white/10 transition-all duration-700 relative overflow-hidden
                                    ${p?"opacity-0 scale-95 translate-y-4 pointer-events-none":"opacity-100 scale-100 translate-y-0"}
                                `,children:[p&&t.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-[2px] transition-all duration-500",children:t.jsxs("div",{className:"flex flex-col items-center animate-in zoom-in-50 slide-in-from-bottom-4 duration-500",children:[t.jsx("div",{className:"w-16 h-16 bg-emerald-500 rounded-full flex items-center justify-center shadow-[0_0_40px_rgba(16,185,129,0.5)] mb-3",children:t.jsx(oe,{className:"w-8 h-8 text-black"})}),t.jsx("span",{className:"text-lg font-bold text-white tracking-widest uppercase text-shadow-lg",children:"Resolvido"})]})}),t.jsx("div",{className:`absolute left-0 top-6 bottom-6 w-1 rounded-r-full ${i.priority==="ALTA"?"bg-red-500":i.priority==="MEDIA"?"bg-amber-500":"bg-blue-500"}`}),i.type==="DUPLICATE"&&S===i.key&&!p&&t.jsxs("div",{className:"absolute right-0 top-0 bottom-0 w-64 bg-[#111] border-l border-white/10 shadow-2xl z-20 animate-in slide-in-from-right-4 fade-in duration-300 p-4 flex flex-col justify-center rounded-r-[24px]",children:[t.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-2",children:"Original Encontrado"}),t.jsx("div",{className:"aspect-[3/4] bg-white/5 rounded-lg border border-white/5 flex items-center justify-center mb-2",children:t.jsx(Ze,{className:"w-8 h-8 text-slate-600"})}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("p",{className:"text-xs text-white font-bold",children:["Doc #",i.items[0].docId.substring(0,4)]}),t.jsx("p",{className:"text-[10px] text-slate-400",children:i.items[0].date}),t.jsx("p",{className:"text-[10px] text-emerald-400 font-mono",children:"Valor Idêntico"})]})]}),t.jsxs("div",{className:"p-6 flex flex-col lg:flex-row gap-6 relative z-10",onMouseEnter:()=>i.type==="DUPLICATE"&&$(i.key),onMouseLeave:()=>$(null),children:[t.jsxs("div",{className:"flex gap-5 flex-1",children:[t.jsxs("div",{className:`
                                            w-12 h-12 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-inner relative
                                            ${i.priority==="ALTA"?"bg-red-500/10 text-red-500":"bg-slate-900 text-slate-400"}
                                        `,children:[i.type==="COMPLIANCE"?t.jsx(tt,{className:"w-6 h-6"}):i.type==="DUPLICATE"?t.jsx(at,{className:"w-6 h-6"}):i.type==="TAX_RATE"?t.jsx(rt,{className:"w-6 h-6"}):t.jsx(st,{className:"w-6 h-6"}),i.count>1&&t.jsx("div",{className:"absolute -top-2 -right-2 bg-white text-black text-[10px] font-bold w-5 h-5 rounded-full flex items-center justify-center border-2 border-[#0c0c0c]",children:i.count})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[t.jsxs("h3",{className:"text-base font-bold text-white group-hover:text-cyan-400 transition-colors cursor-pointer flex items-center gap-2",onClick:()=>{const l=a.find(d=>d.id===i.items[0].docId);l&&c(l)},children:[i.title,t.jsx(aa,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-all text-cyan-400"})]}),t.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-bold uppercase border ${i.priority==="ALTA"?"bg-red-500/10 text-red-400 border-red-500/20":"bg-slate-800 text-slate-400 border-slate-700"}`,children:i.priority})]}),t.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[t.jsxs("p",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-widest",children:["NIF: ",t.jsx("span",{className:"text-slate-300",children:i.nif})]}),t.jsx("div",{className:"w-1 h-1 rounded-full bg-white/10"}),t.jsxs("p",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-widest",children:["Estado:",t.jsx("span",{className:`ml-1 ${i.companyStatus==="CRITICO"?"text-red-400":"text-emerald-400"}`,children:i.companyStatus})]})]}),t.jsx("p",{className:"text-slate-400 text-sm leading-relaxed max-w-2xl",children:i.count>1?`${i.count} documentos da '${i.company}' apresentam o mesmo erro.`:i.description}),t.jsxs("div",{className:"mt-4 bg-[#111] rounded-xl p-3 border border-white/5 flex gap-3 items-start max-w-xl hover:border-cyan-500/20 transition-colors",children:[t.jsx(ne,{className:"w-4 h-4 text-cyan-400 fill-current mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("span",{className:"text-[10px] font-bold text-cyan-400 uppercase tracking-wider block mb-1",children:"KwikDocs AI Sugere:"}),t.jsx("p",{className:"text-xs text-slate-300 leading-snug",children:i.suggestion})]})]})]})]}),t.jsxs("div",{className:"flex flex-col gap-2 min-w-[200px] justify-center",children:[t.jsxs("button",{onClick:()=>se(i.key,"MANUAL_APPROVE",i.items),className:"flex items-center justify-center gap-2 bg-emerald-500 text-black py-2.5 rounded-lg text-xs font-bold uppercase tracking-wide hover:bg-emerald-400 transition-colors active:scale-95 shadow-lg shadow-emerald-500/20",children:[t.jsx(Ne,{className:"w-3.5 h-3.5"})," Aprovar Sugestão"]}),i.count>1&&t.jsxs("button",{onClick:()=>B(i.key),className:"mt-2 text-xs text-center text-slate-500 hover:text-cyan-400 font-bold flex items-center justify-center gap-1",children:[I.has(i.key)?"Ocultar Detalhes":`Ver ${i.count} Documentos`,I.has(i.key)?t.jsx(it,{className:"w-3 h-3"}):t.jsx(le,{className:"w-3 h-3"})]})]})]}),I.has(i.key)&&t.jsx("div",{className:"bg-[#0f0f0f] border-t border-white/5 p-2 space-y-2 animate-in slide-in-from-top-2",children:i.items.map(l=>O.has(`item-${l.id}`)?null:t.jsxs("div",{className:"group/item flex flex-col p-4 bg-white/[0.02] border border-white/5 rounded-2xl hover:bg-white/[0.04] transition-all",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${l.priority==="ALTA"?"bg-red-500":l.priority==="MEDIA"?"bg-amber-500":"bg-blue-500"}`}),t.jsx("span",{className:"text-xs font-bold text-slate-300",children:l.docName}),t.jsxs("span",{className:"text-[10px] text-slate-500 font-mono",children:["#",l.docId.substring(0,8)]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:"text-[10px] text-slate-500 font-mono",children:l.date}),t.jsxs("span",{className:"text-xs font-bold text-white font-mono",children:["Kz ",l.value.toLocaleString()]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>{const x=a.find(_=>_.id===l.id||_.id===l.docId);x&&c(x)},className:"px-3 py-1.5 bg-white/5 hover:bg-white/10 text-slate-300 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all flex items-center gap-1.5",children:[t.jsx(nt,{className:"w-3 h-3"})," Ver"]}),t.jsxs("button",{onClick:()=>We(l,"MANUAL_APPROVE"),className:"px-3 py-1.5 bg-emerald-500/10 hover:bg-emerald-500/20 text-emerald-400 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all flex items-center gap-1.5",children:[t.jsx(oe,{className:"w-3 h-3"})," Resolver"]})]})]})]}),t.jsxs("div",{className:"mt-3 pl-4 border-l border-cyan-500/20 py-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[t.jsx(ne,{className:"w-3 h-3 text-cyan-400 fill-current"}),t.jsx("span",{className:"text-[9px] font-bold text-cyan-400 uppercase tracking-widest",children:"Sugestão KwikDocs AI"})]}),t.jsxs("p",{className:"text-[11px] text-slate-400 italic leading-relaxed",children:['"',l.suggestion,'"']})]})]},l.id))})]},i.key)})}),L&&t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-300",children:t.jsx("div",{className:"bg-[#0c0c0c] border border-white/10 w-full max-w-md rounded-[32px] overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300",children:t.jsxs("div",{className:"p-8",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[t.jsx("div",{className:"w-12 h-12 rounded-2xl bg-cyan-500/10 flex items-center justify-center text-cyan-400 border border-cyan-500/20",children:t.jsx(sa,{className:"w-6 h-6"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white",children:"Resolver Inconsistência"}),t.jsx("p",{className:"text-slate-500 text-xs",children:"Informe o motivo da resolução manual."})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-2 block",children:"Observações / Justificativa"}),t.jsx("textarea",{autoFocus:!0,value:g,onChange:i=>N(i.target.value),placeholder:"Ex: Documento verificado fisicamente. O erro de NIF é apenas uma falha de impressão no original...",className:"w-full bg-[#151515] border border-white/10 rounded-2xl p-4 text-sm text-white placeholder:text-slate-600 focus:outline-none focus:border-cyan-500/50 min-h-[120px] resize-none transition-all"})]}),t.jsxs("div",{className:"bg-amber-500/5 border border-amber-500/10 rounded-xl p-3 flex gap-3",children:[t.jsx(lt,{className:"w-4 h-4 text-amber-500 shrink-0 mt-0.5"}),t.jsx("p",{className:"text-[10px] text-amber-500/80 leading-relaxed uppercase font-bold tracking-tight",children:"Esta ação será registrada com seu usuário para fins de auditoria e prestação de contas."})]})]}),t.jsxs("div",{className:"flex gap-3 mt-8",children:[t.jsx("button",{onClick:()=>T(!1),className:"flex-1 py-3 px-4 rounded-xl border border-white/5 text-slate-400 text-xs font-bold uppercase tracking-wider hover:bg-white/5 transition-all",children:"Cancelar"}),t.jsx("button",{disabled:!g.trim()||R,onClick:ie,className:"flex-1 py-3 px-4 rounded-xl bg-cyan-500 text-black text-xs font-bold uppercase tracking-wider hover:bg-cyan-400 disabled:opacity-30 disabled:cursor-not-allowed transition-all shadow-lg shadow-cyan-500/20 flex items-center justify-center gap-2",children:R?"Processando...":"Confirmar Resolução"})]})]})})})]})};export{Nr as default};
