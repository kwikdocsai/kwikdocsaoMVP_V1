import{d as _,r as s,j as e,i as L}from"./index-J78_TlI6.js";import{M as T}from"./maximize-2-Dfra4tmr.js";import{B as g}from"./bot-BI8oJrgp.js";import{X as $}from"./x-DVT6Ih4m.js";import{S as z}from"./sparkles-Cd9PslOP.js";import{S}from"./send-DUro_Yo1.js";import{U as P}from"./user-B17Erjve.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],V=_("message-circle",R);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],W=_("minimize-2",K),Q=({mode:d,user:a})=>{const[n,w]=s.useState(!1),[j,p]=s.useState(!1),[m,E]=s.useState(d==="public"),[o,C]=s.useState(""),[b,D]=s.useState(""),[f,x]=s.useState([]),[h,y]=s.useState(""),[i,v]=s.useState(!1),N=s.useRef(null);s.useEffect(()=>{var t;if(n&&f.length===0&&!m){const r=d==="public"?`Olá ${o.split(" ")[0]}! Sou o assistente virtual da KwikDocs. Como posso ajudar a sua empresa hoje?`:`Olá ${(t=a==null?void 0:a.name)==null?void 0:t.split(" ")[0]}! Precisa de ajuda técnica ou fiscal? Estou aqui para apoiar.`;x([{id:"welcome",role:"agent",text:r,timestamp:new Date}])}},[n,m,d,a,o]),s.useEffect(()=>{var t;(t=N.current)==null||t.scrollIntoView({behavior:"smooth"})},[f,n,i]);const I=t=>{t.preventDefault(),!(!o.trim()||!b.trim())&&E(!1)},k=async()=>{if(!h.trim())return;const t={id:crypto.randomUUID(),role:"user",text:h,timestamp:new Date};x(r=>[...r,t]),y(""),v(!0);try{let r="",l={};d==="public"?(r="https://n8n.conversio.ao/webhook-test/CHAT_NEW_LEAD_SITE",l={message:t.text,leadName:o,leadContact:b,timestamp:new Date().toISOString()}):(r="https://n8n.conversio.ao/webhook-test/AGENTE_SUPORTE_PLATAFORMA",l={message:t.text,userId:a==null?void 0:a.id,userName:a==null?void 0:a.name,userEmail:a==null?void 0:a.email,timestamp:new Date().toISOString()});const u=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!u.ok)throw new Error("Webhook failed");const c=await u.json(),O=typeof c=="string"?c:c.output||c.message||c.text||"Recebemos sua mensagem. Um agente responderá em breve.",U={id:crypto.randomUUID(),role:"agent",text:O,timestamp:new Date};x(A=>[...A,U])}catch(r){console.error("Chat Error:",r);const l={id:crypto.randomUUID(),role:"agent",text:"Desculpe, tive um problema de conexão. Pode tentar novamente?",timestamp:new Date};x(u=>[...u,l])}finally{v(!1)}},M=()=>{w(!n),p(!1)};return n?e.jsx("div",{className:`fixed bottom-6 right-6 z-[60] flex flex-col transition-all duration-500 cubic-bezier(0.16, 1, 0.3, 1) ${j?"w-auto":"w-[400px] max-w-[90vw]"}`,children:j?e.jsxs("button",{onClick:()=>p(!1),className:"bg-[#050505]/80 backdrop-blur-2xl border border-white/10 p-4 rounded-full shadow-2xl flex items-center gap-3 hover:bg-[#0a0a0a] hover:border-cyan-500/20 transition-all group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inset-0 bg-green-500 rounded-full animate-ping opacity-75"}),e.jsx("div",{className:"w-2.5 h-2.5 bg-green-500 rounded-full relative border border-black"})]}),e.jsx("span",{className:"text-white font-bold text-sm tracking-wide group-hover:text-cyan-400 transition-colors",children:"Suporte Online"}),e.jsx(T,{className:"w-4 h-4 text-slate-500 group-hover:text-white ml-2 transition-colors"})]}):e.jsxs("div",{className:"bg-[#050505]/90 backdrop-blur-2xl border border-white/10 rounded-[2rem] shadow-[0_20px_50px_rgba(0,0,0,0.5)] overflow-hidden flex flex-col h-[650px] max-h-[85vh] animate-in slide-in-from-bottom-5 fade-in zoom-in-95 duration-300 ring-1 ring-white/5",children:[e.jsxs("div",{className:"bg-gradient-to-r from-zinc-900/50 to-zinc-900/0 p-5 flex items-center justify-between border-b border-white/5 backdrop-blur-md relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent opacity-50"}),e.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[e.jsx("div",{className:"w-11 h-11 bg-gradient-to-br from-cyan-500/10 to-blue-600/10 rounded-2xl flex items-center justify-center border border-white/5 shadow-inner",children:e.jsx(g,{className:"w-6 h-6 text-cyan-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-white text-sm tracking-wide",children:"KwikDocs AI"}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full shadow-[0_0_10px_#22c55e]"}),e.jsx("span",{className:"text-[10px] text-zinc-400 font-bold uppercase tracking-wider",children:"Online agora"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>p(!0),className:"w-8 h-8 flex items-center justify-center rounded-xl text-zinc-500 hover:text-white hover:bg-white/5 transition-all",children:e.jsx(W,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>w(!1),className:"w-8 h-8 flex items-center justify-center rounded-xl text-zinc-500 hover:text-red-400 hover:bg-red-500/10 transition-all",children:e.jsx($,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-5 custom-scrollbar bg-transparent relative scroll-smooth",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_0%,rgba(6,182,212,0.05),transparent_50%)] pointer-events-none"}),m?e.jsxs("div",{className:"h-full flex flex-col justify-center animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-3xl mx-auto flex items-center justify-center mb-6 shadow-xl shadow-cyan-500/20 rotate-3 hover:rotate-6 transition-transform",children:e.jsx(z,{className:"w-8 h-8 text-white"})}),e.jsx("h4",{className:"text-2xl font-black text-white mb-3 tracking-tight",children:"Vamos começar?"}),e.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed px-4",children:"Preciso apenas de alguns dados para personalizar o seu atendimento."})]}),e.jsxs("form",{onSubmit:I,className:"space-y-4 px-2",children:[e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-[10px] font-black text-zinc-500 uppercase tracking-widest mb-2 group-focus-within:text-cyan-500 transition-colors",children:"Nome ou Empresa"}),e.jsx("input",{type:"text",required:!0,value:o,onChange:t=>C(t.target.value),className:"w-full bg-zinc-900/50 border border-white/10 rounded-2xl px-5 py-4 text-white placeholder-zinc-700 focus:outline-none focus:border-cyan-500/50 focus:ring-4 focus:ring-cyan-500/10 transition-all font-medium text-sm",placeholder:"Como podemos lhe chamar?"})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-[10px] font-black text-zinc-500 uppercase tracking-widest mb-2 group-focus-within:text-cyan-500 transition-colors",children:"WhatsApp ou Email"}),e.jsx("input",{type:"text",required:!0,value:b,onChange:t=>D(t.target.value),className:"w-full bg-zinc-900/50 border border-white/10 rounded-2xl px-5 py-4 text-white placeholder-zinc-700 focus:outline-none focus:border-cyan-500/50 focus:ring-4 focus:ring-cyan-500/10 transition-all font-medium text-sm",placeholder:"O seu melhor contato"})]}),e.jsxs("button",{type:"submit",className:"w-full bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-black py-4 rounded-2xl uppercase text-[10px] tracking-[0.2em] shadow-lg shadow-cyan-500/20 hover:shadow-cyan-500/40 hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 mt-6 border border-white/10",children:["Iniciar Atendimento ",e.jsx(S,{className:"w-4 h-4"})]})]}),e.jsx("p",{className:"text-center mt-8 text-[10px] text-zinc-700 font-medium",children:"Ao continuar, aceita a nossa política de privacidade."})]}):e.jsxs("div",{className:"space-y-6",children:[f.map(t=>e.jsxs("div",{className:`flex gap-4 ${t.role==="user"?"flex-row-reverse":""} group animate-in slide-in-from-bottom-2 duration-300`,children:[e.jsx("div",{className:`w-10 h-10 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg border ${t.role==="agent"?"bg-zinc-900/80 text-cyan-400 border-white/5":"bg-cyan-950/30 text-white border-white/5"}`,children:t.role==="agent"?e.jsx(g,{className:"w-5 h-5"}):e.jsx(P,{className:"w-5 h-5"})}),e.jsxs("div",{className:`
                                            p-4 rounded-[1.25rem] text-sm leading-relaxed max-w-[85%] shadow-md border
                                            ${t.role==="user"?"bg-gradient-to-br from-cyan-600 to-blue-600 border-cyan-400/20 text-white rounded-tr-sm":"bg-zinc-900/80 border-white/5 text-slate-300 rounded-tl-sm"}
                                        `,children:[e.jsx("p",{className:"whitespace-pre-wrap",children:t.text}),e.jsx("span",{className:`text-[10px] font-bold mt-2 block opacity-50 ${t.role==="user"?"text-blue-100":"text-zinc-500"}`,children:t.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},t.id)),i&&e.jsxs("div",{className:"flex gap-4 animate-in fade-in duration-300",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-zinc-900/80 text-cyan-400 flex items-center justify-center flex-shrink-0 border border-white/5",children:e.jsx(g,{className:"w-5 h-5"})}),e.jsxs("div",{className:"bg-zinc-900/80 px-5 py-4 rounded-[1.25rem] rounded-tl-sm border border-white/5 flex gap-1.5 items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-cyan-500 rounded-full animate-bounce"}),e.jsx("span",{className:"w-2 h-2 bg-cyan-500 rounded-full animate-bounce delay-100"}),e.jsx("span",{className:"w-2 h-2 bg-cyan-500 rounded-full animate-bounce delay-200"})]})]}),e.jsx("div",{ref:N})]})]}),!m&&e.jsxs("div",{className:"p-5 bg-[#050505]/95 border-t border-white/5 backdrop-blur-xl",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",value:h,onChange:t=>y(t.target.value),onKeyDown:t=>t.key==="Enter"&&k(),placeholder:"Escreva sua mensagem...",className:"w-full bg-zinc-900/50 border border-white/10 rounded-2xl pl-5 pr-14 py-4 text-sm text-white focus:outline-none focus:border-cyan-500/50 focus:ring-4 focus:ring-cyan-500/10 placeholder-zinc-600 transition-all font-medium shadow-inner",disabled:i}),e.jsx("button",{onClick:k,disabled:!h.trim()||i,className:"absolute right-2 top-2 p-2.5 bg-cyan-600 rounded-xl text-white hover:bg-cyan-500 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:bg-transparent disabled:scale-100 disabled:text-zinc-600 transition-all shadow-lg shadow-cyan-900/20",children:i?e.jsx(L,{className:"w-4 h-4 animate-spin"}):e.jsx(S,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex justify-center mt-3",children:e.jsxs("span",{className:"text-[9px] font-black text-zinc-700 uppercase tracking-[0.2em] flex items-center gap-1.5 hover:text-cyan-500/50 transition-colors cursor-default",children:[e.jsx(z,{className:"w-3 h-3"})," Powered by KwikDocs AI"]})})]})]})}):e.jsxs("button",{onClick:M,className:"fixed bottom-6 right-6 z-[60] group flex items-center justify-center animate-in zoom-in duration-300",children:[e.jsx("div",{className:"absolute inset-0 bg-cyan-500 rounded-full blur opacity-20 group-hover:opacity-40 transition-opacity duration-500 animate-pulse"}),e.jsxs("div",{className:"relative w-14 h-14 bg-[#050505] border border-white/10 group-hover:border-cyan-500/50 rounded-full flex items-center justify-center shadow-[0_0_30px_rgba(0,0,0,0.5)] hover:scale-110 transition-all duration-300",children:[e.jsx(V,{className:"w-6 h-6 text-white group-hover:text-cyan-400 transition-colors"}),e.jsx("span",{className:"absolute top-0 right-0 w-3.5 h-3.5 bg-red-500 rounded-full border-[3px] border-[#050505] flex items-center justify-center",children:e.jsx("span",{className:"w-full h-full bg-red-400 rounded-full animate-ping opacity-75 absolute"})})]})]})};export{Q as default};
